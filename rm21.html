<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<base target="_blank">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<style>
		p {
			margin: 0px;
		}

		.b1 {
			border: dotted 1px;
		}

		td {
			border: dotted 1px;
		}

		.margin1 {
			margin-left: 20px;
		}

	</style>
</head>

<body>
	<ol>
		<p>Android2.pdf</p>
		<p></p>
		<p></p>
		<p></p>
		<p></p>
		<p></p>
		<p></p>
		<p></p>
		<li>
			<p></p>
			<listing>

=====================================
D:\programs\android\B11Notif\app\src\main
\res\layout\activity_main.xml
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"&gt;

    &lt;EditText
        android:id="@+id/editText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#DDF"
        android:text=""
        android:textSize="18sp" /&gt;

    &lt;Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/editText"
        android:layout_centerHorizontal="true"
        android:onClick="onClick"
        android:text="@android:string/ok"
        android:textSize="18sp" /&gt;

&lt;/RelativeLayout&gt;

=====================================
D:\programs\android\B11Notif\app\src\main
\java\study\com\b11notif\MainActivity.java	package study.com.b11notif;

import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends AppCompatActivity {

    public static final String KEY_TEXT = "KEY_TEXT";
    EditText mEditText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mEditText = findViewById(R.id.editText);
    }

    public void onClick(View view) {
        String string =
                mEditText.getText().toString();
        Intent intent = new Intent(view.getContext(), SecondActivity.class);
        intent.putExtra(KEY_TEXT, string);
        startActivity(intent);
    }
}



=====================================
D:\programs\android\B11Notif\app\src\main\
res\layout\activity_second.xml
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"&gt;

    &lt;TextView

        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#DFE"
        android:text=""
        android:textSize="18sp" /&gt;

&lt;/RelativeLayout&gt;

=====================================
D:\programs\android\B11Notif\app\src\main\
java\study\com\b11notif\SecondActivity.javapackage study.com.b11notif;

import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.TextView;

public class SecondActivity extends AppCompatActivity {

    public static final String KEY_TEXT = "KEY_TEXT";
    TextView mTextView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);
        mTextView = findViewById(R.id.textView);
        Intent intent = getIntent();
        String string =
                intent.getStringExtra(KEY_TEXT);
        if(string != null){
            mTextView.setText(string);
        }
    }
}
=====================================
D:\programs\android\B11Notif\app\src\main
\AndroidManifest.xml
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="study.com.b11notif"&gt;

    &lt;application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme"&gt;
        &lt;activity android:name=".SecondActivity"&gt;

        &lt;/activity&gt;
        &lt;activity android:name=".MainActivity"&gt;
            &lt;intent-filter&gt;
                &lt;action android:name="android.intent.action.MAIN" /&gt;

                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
			</listing>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
		</li>
		<li>
			<p>Service</p>
			<p>MyCoolService
			<snap>android.app.Service</snap>
			<snap>onBind</snap>
			<snap>Nullable</snap>
			<snap>00:13:00</snap>
			<snap>12.mp4</snap>
			<snap>onCreate</snap>
			<snap>onStartCommand</snap>
			<snap>onDestroy</snap>
			<snap>JenyMotion</snap>
			<snap><a href="https://www.genymotion.com/">genymotion</a></snap>
			<snap>Android emulator</snap>
			<snap>Log.d</snap>
			<snap>service android:name=".MyCoolService"</snap>
			<snap>build - не надо</snap>
			<snap>28:00</snap>
			<snap>START_STICKY - запустит</snap>
			<snap>START_NOT_STICKY - не запустит обратно</snap>
			<snap>START_REDELIVER_INTENT - повторный перезапуск</snap>
			<snap><a href="http://developer.alexanderklimov.ru/android/theory/services-theory.php">Служба (Service) Освой Android играючи</a></snap>
			<snap>stopSelf(startId);</snap>
			<snap>Runnable - объкт, который передается другому для выполнения</snap>
			<snap>myRunnable.run();</snap>
			<snap>mHandler.post(myRunnable); - поставить в очередь</snap>
			<snap>onCreate onStartCommand 111 MyCoolService Runnable MyCoolService onDestroy</snap>
			<snap>runnable.run();</snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			</p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
		</li>
		<li>
			<p>B13Serv</p>
			<p>Сервисы - реализован механизм повторяющегося запуска</p>
			<listing>
====================================
D:\programs\android\B13Serv\app\src\
main\AndroidManifest.xml
<service
            android:name=".MyCoolService"
            android:enabled="true"
            android:exported="true"></service>
====================================
D:\programs\android\B13Serv\app\src\
main\java\com\example\freon\b13serv\MainActivity.java
        Intent intent = new Intent(MainActivity.this, MyCoolService.class);
        String string = mEditText.getText().toString();
        intent.putExtra(MyCoolService.KEY_TEXT,string);
        startService(intent);
====================================
D:\programs\android\B13Serv\app\src\
main\java\com\example\freon\b13serv\MyCoolService.java
package com.example.freon.b13serv;

import android.app.Service;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.util.Log;

public class MyCoolService extends Service {

    private Handler mHandler;
    Runnable runnable;

    public MyCoolService() {
    }

    public static final String KEY_TEXT = "KEY_TEXT";

    @Override
    public IBinder onBind(Intent intent) {
        // TODO: Return the communication channel to the service.
        throw new UnsupportedOperationException("Not yet implemented");
    }

    @Override
    public void onCreate() {
        super.onCreate();
        Log.d("happy","onCreate");
        mHandler = new Handler();

        doSomething();



    }

    private void doSomething() {

        runnable = new Runnable() {
            @Override
            public void run() {
                doSomething();
                Log.d("happy", "Runnable");
            }
        };
        mHandler.postDelayed(runnable, 1000);
        //runnable.run();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);
        String string = intent.getStringExtra(KEY_TEXT);
        Log.d("happy","onStartCommand " + string);

        stopSelf(startId);
        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.d("happy","onDestroy");
        //mHandler.removeCallbacks(runnable);
    }
}
====================================
			</listing>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
		</li>
		<li>
			<p></p>
			<p>
			<snap>onEvent</snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			<snap></snap>
			</p>
<p>EventBus in 3 steps</p>
<p>Define events:</p>
<p>public static class MessageEvent { /* Additional fields if needed */ }</p>
<p>Prepare subscribers: Declare and annotate your subscribing method, optionally specify a thread mode:</p>
<p>@Subscribe(threadMode = ThreadMode.MAIN)</p>
<p>public void onMessageEvent(MessageEvent event) {/* Do something */};</p>
<p>Register and unregister your subscriber. For example on Android, activities and fragments should usually register according to their life cycle:</p>
<p>@Override</p>
<p>public void onStart() {</p>
<p>super.onStart();</p>
<p>EventBus.getDefault().register(this);</p>
<p>}</p>
<p>@Override</p>
<p>public void onStop() {</p>
<p>super.onStop();</p>
<p>EventBus.getDefault().unregister(this);</p>
<p>}</p>
<p>Post events:</p>
<p>EventBus.getDefault().post(new MessageEvent());</p>
<p>Read the full <a href="http://greenrobot.org/eventbus/documentation/how-to-get-started/">getting started guide</a>.</p>


			<p><a href=""></a></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
		</li>
		<li>
			<p>Notification</p>
			<listing>
    private void showNotification() {
        Notification.Builder builder = new Notification.Builder(this);
        builder.setContentTitle("Wow!");
        builder.setContentText(""+mString+" "+mCounter);
        builder.setSmallIcon(android.R.drawable.stat_sys_warning);

        Notification notification = builder.build();

        NotificationManagerCompat managerCompat = NotificationManagerCompat.from(this);
        managerCompat.notify(1, notification);
    }
			</listing>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
		</li>
		<li>
			<p>showNotification + PendingIntent</p>
			<p></p>
			<list>
    private void showNotification() {
        Intent intent = new Intent(this, SecondaryActivity.class);
        intent.putExtra(KEY_TEXT, "" + mString + " " + mCounter);

        mPendingIntent = PendingIntent.getActivity(this,
                1,
                intent,
                PendingIntent.FLAG_UPDATE_CURRENT);

        Notification.Builder builder = new Notification.Builder(this);
        builder.setContentTitle("Wow!");
        builder.setContentText("" + mString + " " + mCounter);
        builder.setSmallIcon(android.R.drawable.stat_sys_warning);
        builder.setContentIntent(mPendingIntent);

        Notification notification = builder.build();

        NotificationManagerCompat managerCompat = NotificationManagerCompat.from(this);
        managerCompat.notify(1, notification);
    }

			</list>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
		</li>
		<li>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
		</li>
		<li>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
		</li>
		<li>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
		</li>
	</ol>

</body>

</html>
