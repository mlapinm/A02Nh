## Part VII IP Version 6
Часть VII IP версии 6   
__|__
--|--
|
Part VII Review|Часть VII Обзор
## Chapter 22 Fundamentals of IP Version 6
Глава 22 Основы IP версии 6   
__|__
--|--
|
This chapter covers the following exam topics:|В этой главе рассматриваются следующие экзаменационные темы:
###### 1.0 Network Fundamentals
1.0 Основы сети   
###### 1.8 Configure and verify IPv6 addressing and prefix
1.8 Настройка и проверка адресации и префикса IPv6   
__|__
--|--
|
IPv4 has been a solid and highly useful part of the growth of TCP/IP and the Internet.|IPv4 был прочной и очень полезной частью роста TCP / IP и Интернета.
For most of the long history of the Internet, and for most corporate networks that use TCP/IP, IPv4 is the core protocol that defines addressing and routing.|На протяжении большей части долгой истории Интернета и для большинства корпоративных сетей, использующих TCP / IP, IPv4 является основным протоколом, определяющим адресацию и маршрутизацию.
However, even though IPv4 has many great qualities, it does have some shortcomings, creating the need for a replacement protocol: IP version 6 (IPv6).|Однако, несмотря на то, что IPv4 обладает многими замечательными качествами, у него есть некоторые недостатки, вызывающие необходимость в замене протокола: IP версии 6 (IPv6).
|
IPv6 defines the same general functions as IPv4, but with different methods of implementing those functions.|IPv6 определяет те же общие функции, что и IPv4, но с другими методами реализации этих функций.
For example, both IPv4 and IPv6 define addressing, the concepts of subnetting larger groups of addresses into smaller groups, headers used to create an IPv4 or IPv6 packet, and the rules for routing those packets.|Например, как IPv4, так и IPv6 определяют адресацию, концепции разделения больших групп адресов на более мелкие группы, заголовки, используемые для создания пакетов IPv4 или IPv6, и правила маршрутизации этих пакетов.
At the same time, IPv6 handles the details differently; for example, using a 128-bit IPv6 address rather than the 32-bit IPv4 address.|В то же время IPv6 по-другому обрабатывает детали; например, используя 128-битный IPv6-адрес вместо 32-битного IPv4-адреса.
|
This chapter focuses on the core network layer functions of addressing and routing.|В этой главе основное внимание уделяется основным функциям адресации и маршрутизации сетевого уровня.
The first section of this chapter looks at the big concepts, while the second section looks at the specifics of how to write and type IPv6 addresses.|В первом разделе этой главы рассматриваются основные концепции, а во втором разделе рассматриваются особенности написания и ввода адресов IPv6.
### “Do I Know This Already?” Quiz
«Знаю ли я это уже?» Викторина   
__|__
--|--
|
Take the quiz (either here or use the PTP software) if you want to use the score to help you decide how much time to spend on this chapter.|Пройдите тест (здесь или воспользуйтесь программой PTP), если вы хотите использовать оценку, чтобы решить, сколько времени потратить на эту главу.
The letter answers are listed at the bottom of the page following the quiz.|Ответы на письма перечислены внизу страницы после викторины.
Appendix C, found both at the end of the book as well as on the companion website, includes both the answers and explanations.|Приложение C, которое можно найти как в конце книги, так и на сопутствующем веб-сайте, включает как ответы, так и пояснения.
You can also find both answers and explanations in the PTP testing software.|Вы также можете найти ответы и пояснения в программе тестирования PTP.
|
Table 22-1 “Do I Know This Already?” Foundation Topics Section-to-Question Mapping|Таблица 22-1 «Знаю ли я это уже?» Сопоставление разделов с вопросами по основным темам
### Foundation Topics
Основные темы   
### Introduction to IPv6
Введение в IPv6   
__|__
--|--
|
IPv6 Addressing Formats and Conventions 3–6 1.|Форматы и условные обозначения адресации IPv6 3–6 1.
Which of the following was a short-term solution to the IPv4 address exhaustion problem?|Что из следующего было краткосрочным решением проблемы исчерпания адресов IPv4?
|
a. IP version 6 b.|а. IP версии 6 б.
IP version 5 c.|IP версии 5 c.
NAT/PAT d.|NAT / PAT d.
ARP CHAPTER 22 2.|ARP ГЛАВА 22 2.
A router receives an Ethernet frame that holds an IPv6 packet.|Маршрутизатор получает кадр Ethernet, содержащий пакет IPv6.
The router then makes a decision to route the packet out a serial link.|Затем маршрутизатор принимает решение направить пакет по последовательному каналу.
Which of the following statements is true about how a router forwards an IPv6 packet?|Какое из следующих утверждений относительно того, как маршрутизатор пересылает пакет IPv6, является верным?
|
a. The router discards the Ethernet data-link header and trailer of the received frame.|а. Маршрутизатор отбрасывает заголовок канала передачи данных Ethernet и окончание полученного кадра.
|
b. The router makes the forwarding decision based on the packet’s source IPv6 address.|б. Маршрутизатор принимает решение о пересылке на основе IPv6-адреса источника пакета.
|
c. The router keeps the Ethernet header, encapsulating the entire frame inside a new IPv6 packet before sending it over the serial link.|c. Маршрутизатор сохраняет заголовок Ethernet, инкапсулируя весь кадр в новый пакет IPv6 перед его отправкой по последовательному каналу.
|
d. The router uses the IPv4 routing table when choosing where to forward the packet.|d. Маршрутизатор использует таблицу маршрутизации IPv4 при выборе места для пересылки пакета.
|
3. Which of the following is the shortest valid abbreviation for FE80:0000:0000:0100:|3. Какое из следующих сокращений является самым коротким допустимым сокращением для FE80: 0000: 0000: 0100:
|
0000:0000:0000:0123?|0000: 0000: 0000: 0123?
|
a. FE80::100::123 b.|а. FE80 :: 100 :: 123 б.
FE8::1::123 c.|FE8 :: 1 :: 123 гр.
FE80::100:0:0:0:123:4567 d.|FE80 :: 100: 0: 0: 0: 123: 4567 г.
FE80:0:0:100::123 4.|FE80: 0: 0: 100 :: 123 4.
Which of the following is the shortest valid abbreviation for 2000:0300:0040:0005:|Какое из следующих сокращений является самым коротким действительным сокращением для 2000: 0300: 0040: 0005:
|
6000:0700:0080:0009?|6000: 0700: 0080: 0009?
|
a. 2:3:4:5:6:7:8:9 b. 2000:300:40:5:6000:700:80:9 c. 2000:300:4:5:6000:700:8:9 d. 2000:3:4:5:6:7:8:9 5.|а. 2: 3: 4: 5: 6: 7: 8: 9 б. 2000: 300: 40: 5: 6000: 700: 80: 9 в. 2000: 300: 4: 5: 6000: 700: 8: 9 д. 2000: 3: 4: 5: 6: 7: 8: 9 5.
Which of the following is the unabbreviated version of IPv6 address 2001:DB8::200:28?|Что из перечисленного является несокращенной версией IPv6-адреса 2001: DB8 :: 200: 28?
|
a. 2001:0DB8:0000:0000:0000:0000:0200:0028 b. 2001:0DB8::0200:0028 c. 2001:0DB8:0:0:0:0:0200:0028 d. 2001:0DB8:0000:0000:0000:0000:200:0028 6.|а. 2001: 0DB8: 0000: 0000: 0000: 0000: 0200: 0028 б. 2001: 0DB8 :: 0200: 0028 гр. 2001: 0DB8: 0: 0: 0: 0: 0200: 0028 д. 2001: 0DB8: 0000: 0000: 0000: 0000: 200: 0028 6.
Which of the following is the prefix for address 2000:0000:0000:0005:6000:0700:|Какой из следующих префиксов для адреса 2000: 0000: 0000: 0005: 6000: 0700:
|
0080:0009, assuming a mask of /64?|0080: 0009, при маске / 64?
|
a. 2000::5::/64 b. 2000::5:0:0:0:0/64 c. 2000:0:0:5::/64 d. 2000:0:0:5:0:0:0:0/64 Foundation Topics Introduction to IPv6 IP version 6 (IPv6) serves as the replacement protocol for IP version 4 (IPv4).|а. 2000 :: 5 :: / 64 б. 2000 :: 5: 0: 0: 0: 0/64 гр. 2000: 0: 0: 5 :: / 64 д. 2000: 0: 0: 5: 0: 0: 0: 0/64 Основные темы Введение в IPv6 IP версии 6 (IPv6) служит протоколом замены для IP версии 4 (IPv4).
|
Unfortunately, that one bold statement creates more questions than it answers.|К сожалению, это одно смелое заявление порождает больше вопросов, чем ответов.
Why does IPv4 need to be replaced?|Зачем нужна замена IPv4?
If IPv4 needs to be replaced, when will that happen—and will it happen quickly?|Если IPv4 необходимо заменить, когда это произойдет и произойдет ли это быстро?
What exactly happens when a company or the Internet replaces IPv4 with IPv6?|Что именно происходит, когда компания или Интернет заменяют IPv4 на IPv6?
And the list goes on.|И список продолжается.
|
While this introductory chapter cannot get into every detail of why IPv4 needs to eventually be replaced by IPv6, the clearest and most obvious reason for migrating TCP/IP networks to use IPv6 is growth.|Хотя эта вводная глава не может подробно описать, почему IPv4 необходимо в конечном итоге заменить на IPv6, наиболее очевидной и очевидной причиной перехода сетей TCP / IP на использование IPv6 является рост.
IPv4 uses a 32-bit address, which totals to a few billion addresses.|IPv4 использует 32-битный адрес, что составляет несколько миллиардов адресов.
|
Interestingly, that seemingly large number of addresses is too small.|Интересно, что кажущееся большое количество адресов слишком мало.
IPv6 increases the address to 128 bits in length.|IPv6 увеличивает длину адреса до 128 бит.
For perspective, IPv6 supplies more than 10,000,000,000,000,000,000,000,000,000 times as many addresses as IPv4.|Для сравнения, IPv6 предоставляет в 10 000 000 000 000 000 000 000 000 000 раз больше адресов, чем IPv4.
|
The fact that IPv6 uses a different size address field, with some different addressing rules, means that many other protocols and functions change as well.|Тот факт, что IPv6 использует поле адреса другого размера с некоторыми другими правилами адресации, означает, что многие другие протоколы и функции также меняются.
For example, IPv4 routing—in other words, the packet-forwarding process—relies on an understanding of IPv4 addresses.|Например, маршрутизация IPv4 - другими словами, процесс пересылки пакетов - основывается на понимании адресов IPv4.
|
To support IPv6 routing, routers must understand IPv6 addresses and routing.|Для поддержки маршрутизации IPv6 маршрутизаторы должны понимать адреса и маршрутизацию IPv6.
To dynamically learn routes for IPv6 subnets, routing protocols must support these different IPv6 addressing rules, including rules about how IPv6 creates subnets.|Чтобы динамически изучать маршруты для подсетей IPv6, протоколы маршрутизации должны поддерживать эти различные правила адресации IPv6, включая правила о том, как IPv6 создает подсети.
As a result, the migration from IPv4 to IPv6 is much more than changing one protocol (IP), but it impacts many protocols.|В результате переход с IPv4 на IPv6 - это гораздо больше, чем изменение одного протокола (IP), но он влияет на многие протоколы.
|
This first section of the chapter discusses some of the reasons for the change from IPv4 to IPv6, along with the protocols that must change as a result.|В этом первом разделе главы обсуждаются некоторые причины перехода с IPv4 на IPv6, а также протоколы, которые должны измениться в результате.
#### The Historical Reasons for IPv6
Исторические причины IPv6   
__|__
--|--
|
In the last 40+ years, the Internet has gone from its infancy to being a huge influence in the world.|За последние 40 с лишним лет Интернет прошел путь от зарождения до огромного влияния в мире.
It first grew through research at universities, from the ARPANET beginnings of the Internet in the late 1960s into the 1970s.|Впервые он вырос благодаря исследованиям в университетах, с начала ARPANET в Интернете в конце 1960-х до 1970-х годов.
The Internet kept growing fast in the 1980s, with the Internet’s fast growth still primarily driven by research and the universities that joined in that research.|Интернет продолжал быстро развиваться в 1980-х годах, причем быстрый рост Интернета все еще был обусловлен в основном исследованиями и университетами, которые присоединились к этим исследованиям.
By the early 1990s, the Internet began to transform to allow commerce, allowing people to sell services and products over the Internet, which drove yet another steep spike upward in the growth of the Internet.|К началу 1990-х годов Интернет начал трансформироваться, давая возможность коммерции, позволяя людям продавать услуги и продукты через Интернет, что привело к еще одному резкому скачку роста Интернета.
Eventually, fixed Internet access (primarily through dial, digital subscriber line [DSL], and cable) became common, followed by the pervasive use of the Internet from mobile devices like smartphones.|В конце концов, фиксированный доступ в Интернет (в основном через набор, цифровую абонентскую линию [DSL] и кабель) стал обычным явлением, за которым последовало повсеместное использование Интернета с мобильных устройств, таких как смартфоны.
Figure 22-1 shows some of these major milestones with general dates.|На рисунке 22-1 показаны некоторые из этих основных этапов с общими датами.
|
The incredible growth of the Internet over a fairly long time created a big problem for public IPv4 addresses: the world was running out of addresses.|Невероятный рост Интернета за довольно долгое время создал большую проблему для общедоступных IPv4-адресов: в мире заканчивались адреса.
For instance, in 2011, IANA allocated the final /8 address blocks (the same size as a Class A network), allocating one final /8 block to each of the five Regional Internet Registries (RIR). At that point, RIRs could no Answers to the “Do I Know This Already?” quiz:|Например, в 2011 году IANA выделила последние / 8 блоков адресов (такого же размера, как сеть класса A), выделив по одному последнему блоку / 8 каждому из пяти региональных интернет-реестров (RIR). В этот момент RIR не могли ответить на вопрос «Знаю ли я это уже?» викторина:
|
1 C 2 A 3 D 4 B 5 A 6 C longer receive new allocations of public addresses from IANA to then turn around and assign smaller address blocks to companies or ISPs.|1 C 2 A 3 D 4 B 5 A 6 C дольше получать новые распределения публичных адресов от IANA, чтобы затем развернуться и назначить меньшие блоки адресов компаниям или интернет-провайдерам.
|
Figure 22-1 Some Major Events in the Growth of the Internet At that point in 2011, each of the five RIRs still had public addresses to allocate or assign.|Рис. 22-1. Некоторые важные события в развитии Интернета. На тот момент в 2011 году у каждого из пяти RIR все еще были публичные адреса, которые нужно было выделить или назначить.
|
However, that same year, APNIC (Asia Pacific) became the first RIR to exhaust its available IPv4 address allocation.|Однако в том же году APNIC (Азиатско-Тихоокеанский регион) стал первым RIR, исчерпавшим доступное выделение адресов IPv4.
In late 2015, ARIN (North America) announced that it had exhausted its supply.|В конце 2015 года ARIN (Северная Америка) объявил, что исчерпал свои запасы.
When we were revising this chapter in 2019, IANA considered all RIRs except AFRINIC to have exhausted their supply of IPv4 addresses, with AFRINIC expected to run out of IPv4 address during the year 2019.|Когда мы пересматривали эту главу в 2019 году, IANA посчитала, что все RIR, кроме AFRINIC, исчерпали свой запас адресов IPv4, при этом ожидается, что у AFRINIC закончится адрес IPv4 в течение 2019 года.
|
These events are significant in that the day has finally come in which new companies can attempt to connect to the Internet, but they can no longer simply use IPv4, ignoring IPv6.|Эти события важны тем, что, наконец, настал день, когда новые компании могут пытаться подключиться к Интернету, но они больше не могут просто использовать IPv4, игнорируя IPv6.
|
Their only option will be IPv6 because IPv4 has no public addresses left.|Их единственным вариантом будет IPv6, потому что в IPv4 не осталось публичных адресов.
|
NOTE You can track ARIN’s progress through this interesting transition in the history of the Internet at its IPv4 address depletion site: http://teamarin.net/category/ipv4-depletion/.|ПРИМЕЧАНИЕ. Вы можете отслеживать прогресс ARIN в ходе этого интересного перехода в истории Интернета на его сайте с истощением IPv4-адресов: http://teamarin.net/category/ipv4-depletion/.
|
You can also see a summary report at http://ipv4.potaroo.net.|Вы также можете увидеть сводный отчет на http://ipv4.potaroo.net.
|
Even though the press has rightfully made a big deal about running out of IPv4 addresses, those who care about the Internet knew about this potential problem since the late 1980s.|Несмотря на то, что пресса справедливо много говорила об исчерпании адресов IPv4, те, кому небезразличен Интернет, знали об этой потенциальной проблеме с конца 1980-х годов.
|
The problem, generally called the IPv4 address exhaustion problem, could literally have caused the huge growth of the Internet in the 1990s to have come to a screeching halt!|Проблема, которую обычно называют проблемой исчерпания IPv4-адресов, могла буквально привести к тому, что огромный рост Интернета в 1990-х годах резко остановился!
|
Something had to be done.|Что-то должно было быть сделано.
|
The IETF came up with several short-term solutions to make IPv4 addresses last longer, and one long-term solution: IPv6.|IETF разработал несколько краткосрочных решений, позволяющих продлить срок службы адресов IPv4, и одно долгосрочное решение: IPv6.
However, several other tools like Network Address Translation (NAT) and classless interdomain routing (CIDR) helped extend IPv4’s life another couple of decades.|Однако несколько других инструментов, таких как преобразование сетевых адресов (NAT) и бесклассовая междоменная маршрутизация (CIDR), помогли продлить жизнь IPv4 еще на пару десятилетий.
IPv6 creates a more permanent and long-lasting solution, replacing IPv4, with a new IPv6 header and new IPv6 addresses.|IPv6 создает более постоянное и долговременное решение, заменяя IPv4 новым заголовком IPv6 и новыми адресами IPv6.
The address size supports a huge number of addresses, solving the address shortage problem for generations (we hope).|Размер адреса поддерживает огромное количество адресов, решая проблему нехватки адресов для поколений (надеемся).
Figure 22-2 shows some of the major address exhaustion timing.|На рис. 22-2 показаны некоторые из основных сроков исчерпания адресов.
|
The rest of this first section examines IPv6, comparing it to IPv4, focusing on the common features of the two protocols.|Остальная часть этого первого раздела исследует IPv6, сравнивая его с IPv4, уделяя особое внимание общим характеристикам двух протоколов.
In particular, this section compares the protocols (including addresses), routing, routing protocols, and miscellaneous other related topics.|В частности, в этом разделе сравниваются протоколы (включая адреса), маршрутизация, протоколы маршрутизации и различные другие связанные темы.
|
NOTE You might wonder why the next version of IP is not called IP version 5.|ПРИМЕЧАНИЕ. Вы можете задаться вопросом, почему следующая версия IP не называется IP версии 5.
There was an earlier effort to create a new version of IP, and it was numbered version 5.|Ранее предпринимались попытки создать новую версию IP, и она имела номер версии 5.
IPv5 did not progress to the standards stage.|IPv5 не перешел на стадию стандартов.
However, to prevent any issues, because version 5 had been used in some documents, the next effort to update IP was numbered as version 6.|Однако, чтобы предотвратить любые проблемы, поскольку в некоторых документах использовалась версия 5, следующая попытка обновить IP была пронумерована как версия 6.
|
Figure 22-2 Timeline for IPv4 Address Exhaustion and Short-/Long-Term Solutions|Рисунок 22-2 Временная шкала исчерпания адресов IPv4 и краткосрочных / долгосрочных решений
#### The IPv6 Protocols
Протоколы IPv6   
__|__
--|--
|
The primary purpose of the core IPv6 protocol mirrors the same purpose of the IPv4 protocol.|Основная цель основного протокола IPv6 отражает ту же цель, что и протокол IPv4.
|
That core IPv6 protocol, as defined in RFC 2460, defines a packet concept, addresses for those packets, and the role of hosts and routers.|Этот основной протокол IPv6, как определено в RFC 2460, определяет концепцию пакета, адреса для этих пакетов и роль хостов и маршрутизаторов.
These rules allow the devices to forward packets sourced by hosts, through multiple routers, so that they arrive at the correct destination host. (IPv4 defines those same concepts for IPv4 back in RFC 791.)|Эти правила позволяют устройствам пересылать пакеты, отправленные хостами, через несколько маршрутизаторов, чтобы они приходили на правильный хост назначения. (IPv4 определяет те же концепции для IPv4 еще в RFC 791.)
|
However, because IPv6 impacts so many other functions in a TCP/IP network, many more RFCs must define details of IPv6.|Однако, поскольку IPv6 влияет на многие другие функции в сети TCP / IP, многие другие RFC должны определять детали IPv6.
Some other RFCs define how to migrate from IPv4 to IPv6.|Некоторые другие RFC определяют, как перейти с IPv4 на IPv6.
Others define new versions of familiar protocols or replace old protocols with new ones.|Другие определяют новые версии знакомых протоколов или заменяют старые протоколы новыми.
For example:|Например:
|
Older OSPF Version 2 Upgraded to OSPF Version 3: The older Open Shortest Path First (OSPF) version 2 works for IPv4, but not for IPv6, so a newer version, OSPF version 3, was created to support IPv6. (Note: OSPFv3 was later upgraded to support advertising both IPv4 and IPv6 routes.)|Старая версия OSPF 2 обновлена ​​до OSPF версии 3: старая версия 2 OSPF работает для IPv4, но не для IPv6, поэтому для поддержки IPv6 была создана более новая версия OSPF версии 3. (Примечание: OSPFv3 был позже обновлен для поддержки рекламы маршрутов IPv4 и IPv6.)
|
ICMP Upgraded to ICMP Version 6: Internet Control Message Protocol (ICMP) worked well with IPv4 but needed to be changed to support IPv6.|ICMP обновлен до ICMP версии 6: протокол управляющих сообщений Интернета (ICMP) хорошо работал с IPv4, но его необходимо было изменить для поддержки IPv6.
The new name is ICMPv6.|Новое имя - ICMPv6.
|
ARP Replaced by Neighbor Discovery Protocol: For IPv4, Address Resolution Protocol (ARP) discovers the MAC address used by neighbors.|ARP заменен протоколом обнаружения соседей: для IPv4 протокол разрешения адресов (ARP) обнаруживает MAC-адрес, используемый соседями.
IPv6 replaces ARP with a more general Neighbor Discovery Protocol (NDP).|IPv6 заменяет ARP более общим протоколом обнаружения соседей (NDP).
|
NOTE If you go to any website that lists the RFCs, like http://www.rfc-editor.org, you can find almost 300 RFCs that have IPv6 in the title.|ПРИМЕЧАНИЕ. Если вы зайдете на любой веб-сайт, на котором перечислены RFC, например http://www.rfc-editor.org, вы сможете найти почти 300 RFC, в названии которых есть IPv6.
|
Although the term IPv6, when used broadly, includes many protocols, the one specific protocol called IPv6 defines the new 128-bit IPv6 address.|Хотя термин IPv6 при широком использовании включает множество протоколов, один конкретный протокол, называемый IPv6, определяет новый 128-битный адрес IPv6.
Of course, writing these addresses in binary would be a problem—they probably would not even fit on the width of a piece of paper!|Конечно, запись этих адресов в двоичном формате была бы проблемой - они, вероятно, не поместились бы даже на лист бумаги!
IPv6 defines a shorter hexadecimal format, requiring at most 32 hexadecimal digits (one hex digit per 4 bits), with methods to abbreviate the hexadecimal addresses as well.|IPv6 определяет более короткий шестнадцатеричный формат, требующий не более 32 шестнадцатеричных цифр (одна шестнадцатеричная цифра на 4 бита), а также методы сокращения шестнадцатеричных адресов.
|
For example, all of the following are IPv6 addresses, each with 32 or fewer hex digits:|Например, все следующие адреса являются IPv6-адресами, каждый из которых состоит из 32 или менее шестнадцатеричных цифр:
|
2345:1111:2222:3333:4444:5555:6666:AAAA 2000:1:2:3:4:5:6:A FE80::1 The upcoming section “IPv6 Addressing Formats and Conventions” discusses the specifics of how to represent IPv6 addresses, including how to legally abbreviate the hex address values.|2345: 1111: 2222: 3333: 4444: 5555: 6666: AAAA 2000: 1: 2: 3: 4: 5: 6: A FE80 :: 1 В следующем разделе «Форматы и соглашения адресации IPv6» обсуждаются особенности того, как представляют адреса IPv6, включая то, как законно сокращать значения шестнадцатеричных адресов.
|
Like IPv4, IPv6 defines a header, with places to hold both the source and destination address fields.|Как и IPv4, IPv6 определяет заголовок с местами для хранения полей исходного и целевого адресов.
Compared to IPv4, the IPv6 header does make some other changes besides simply making the address fields larger.|По сравнению с IPv4, заголовок IPv6 вносит некоторые другие изменения, помимо простого увеличения размеров полей адреса.
However, even though the IPv6 header is larger than an IPv4 header, the IPv6 header is actually simpler (on purpose), to reduce the work done each time a router must route an IPv6 packet.|Однако даже несмотря на то, что заголовок IPv6 больше, чем заголовок IPv4, заголовок IPv6 на самом деле проще (специально), чтобы уменьшить объем работы, выполняемой каждый раз, когда маршрутизатор должен маршрутизировать пакет IPv6.
Figure 22-3 shows the required 40-byte part of the IPv6 header.|На рис. 22-3 показана необходимая 40-байтовая часть заголовка IPv6.
|
Figure 22-3 IPv6 Header|Рисунок 22-3 Заголовок IPv6
#### IPv6 Routing
Маршрутизация IPv6   
__|__
--|--
|
As with many functions of IPv6, IPv6 routing looks just like IPv4 routing from a general perspective, with the differences being clear only once you look at the specifics.|Как и многие функции IPv6, маршрутизация IPv6 выглядит так же, как маршрутизация IPv4 с общей точки зрения, причем различия становятся очевидными только после того, как вы посмотрите на конкретику.
Keeping the discussion general for now, IPv6 uses these ideas the same way as IPv4:|Сохраняя пока общее обсуждение, IPv6 использует эти идеи так же, как IPv4:
###### To be able to build and send IPv6 packets out an interface, end-user devices need an IPv6
Чтобы иметь возможность создавать и отправлять пакеты IPv6 через интерфейс, устройствам конечных пользователей требуется IPv6   
__|__
--|--
|
address on that interface.|адрес на этом интерфейсе.
###### End-user hosts need to know the IPv6 address of a default router, to which the host sends
Хосты конечных пользователей должны знать IPv6-адрес маршрутизатора по умолчанию, на который хост отправляет   
__|__
--|--
|
IPv6 packets if the host is in a different subnet.|Пакеты IPv6, если хост находится в другой подсети.
###### IPv6 routers de-encapsulate and re-encapsulate each IPv6 packet when routing the packet.
Маршрутизаторы IPv6 деинкапсулируют и повторно инкапсулируют каждый пакет IPv6 при маршрутизации пакета.   
###### IPv6 routers make routing decisions by comparing the IPv6 packet’s destination address
Маршрутизаторы IPv6 принимают решения о маршрутизации, сравнивая адрес назначения пакета IPv6.   
__|__
--|--
|
to the router’s IPv6 routing table; the matched route lists directions of where to send the IPv6 packet next.|в таблицу маршрутизации IPv6 маршрутизатора; в соответствующем маршруте указаны направления, по которым следует отправить пакет IPv6 дальше.
|
NOTE You could take the preceding list and replace every instance of IPv6 with IPv4, and all the statements would be true of IPv4 as well.|ПРИМЕЧАНИЕ. Вы можете взять предыдущий список и заменить каждый экземпляр IPv6 на IPv4, и все утверждения будут верны и для IPv4.
|
While the list shows some concepts that should be familiar from IPv4, the next few figures show the concepts with an example.|Хотя в списке показаны некоторые концепции, которые должны быть знакомы по IPv4, на следующих нескольких рисунках показаны концепции с примерами.
First, Figure 22-4 shows a few settings on a host.|Во-первых, на рис. 22-4 показаны некоторые настройки хоста.
|
The host (PC1) has an address of 2345::1.|Хост (PC1) имеет адрес 2345 :: 1.
PC1 also knows its default gateway of 2345::2.|ПК1 также знает свой шлюз по умолчанию 2345 :: 2.
|
(Both values are valid abbreviations for real IPv6 addresses.) To send an IPv6 packet to host PC2, on another IPv6 subnet, PC1 creates an IPv6 packet and sends it to R1, PC1’s default gateway.|(Оба значения являются действительными сокращениями для реальных адресов IPv6.) Чтобы отправить пакет IPv6 на хост ПК2, в другой подсети IPv6, ПК1 создает пакет IPv6 и отправляет его на R1, шлюз ПК1 по умолчанию.
|
Eth.|Eth.
|
Address = 2345::1 GW = 2345::2 2345::2 2345:1:2:3::2 IPv6 Packet Eth.|Адрес = 2345 :: 1 GW = 2345 :: 2 2345 :: 2 2345: 1: 2: 3 :: 2 Пакет IPv6 Eth.
|
Figure 22-4 IPv6 Host Building and Sending an IPv6 Packet The router (R1) has many small tasks to do when forwarding this IPv6 packet, but for now, focus on the work R1 does related to encapsulation.|Рис. 22-4. Построение хоста IPv6 и отправка пакета IPv6. Маршрутизатор (R1) выполняет множество небольших задач при пересылке этого пакета IPv6, но пока сосредоточимся на работе R1, связанной с инкапсуляцией.
As seen in Step 1 of Figure 22-5, R1 receives the incoming data-link frame and extracts (de-encapsulates) the IPv6 packet from inside the frame, discarding the original data-link header and trailer.|Как видно на шаге 1 на рис. 22-5, R1 принимает входящий кадр канала данных и извлекает (деинкапсулирует) пакет IPv6 изнутри кадра, отбрасывая исходный заголовок и завершение канала данных.
At Step 2, once R1 knows to forward the IPv6 packet to R2, R1 adds a correct outgoing data-link header and trailer to the IPv6 packet, encapsulating the IPv6 packet.|На шаге 2, когда R1 знает, что нужно переслать пакет IPv6 на R2, R1 добавляет правильный заголовок исходящей линии передачи данных и завершение к пакету IPv6, инкапсулируя пакет IPv6.
|
Figure 22-5 IPv6 Router Performing Routine Encapsulation Tasks When Routing IPv6 When a router like R1 de-encapsulates the packet from the data-link frame, it must also decide what type of packet sits inside the frame.|Рис. 22-5. Маршрутизатор IPv6, выполняющий стандартные задачи инкапсуляции при маршрутизации IPv6. Когда маршрутизатор, такой как R1, деинкапсулирует пакет из кадра канала данных, он также должен решить, какой тип пакета находится внутри кадра.
To do so, the router must look at a protocol type field in the data-link header, which identifies the type of packet inside the data-link frame.|Для этого маршрутизатор должен просмотреть поле типа протокола в заголовке канала передачи данных, которое определяет тип пакета внутри кадра канала данных.
Today, most data-link frames carry either an IPv4 packet or an IPv6 packet.|Сегодня большинство кадров канала передачи данных содержат либо пакет IPv4, либо пакет IPv6.
|
To route an IPv6 packet, a router must use its IPv6 routing table instead of the IPv4 routing table.|Для маршрутизации пакета IPv6 маршрутизатор должен использовать свою таблицу маршрутизации IPv6 вместо таблицы маршрутизации IPv4.
The router must look at the packet’s destination IPv6 address and compare that address to the router’s current IPv6 routing table.|Маршрутизатор должен проверить IPv6-адрес назначения пакета и сравнить этот адрес с текущей таблицей маршрутизации IPv6 маршрутизатора.
The router uses the forwarding instructions in the matched IPv6 route to forward the IPv6 packet.|Маршрутизатор использует инструкции пересылки в согласованном маршруте IPv6 для пересылки пакета IPv6.
Figure 22-6 shows the overall process.|На рисунке 22-6 показан общий процесс.
|
Figure 22-6 Comparing an IPv6 Packet to R1’s IPv6 Routing Table Note that again, the process works like IPv4, except that the IPv6 packet lists IPv6 addresses, and the IPv6 routing table lists routing information for IPv6 subnets (called prefixes).|Рис. 22-6. Сравнение пакета IPv6 с таблицей маршрутизации IPv6 маршрутизатора R1 Обратите внимание, что опять же, процесс работает как IPv4, за исключением того, что в пакете IPv6 перечислены адреса IPv6, а в таблице маршрутизации IPv6 указана информация о маршрутизации для подсетей IPv6 (называемых префиксами).
|
Finally, in most enterprise networks, the routers will route both IPv4 and IPv6 packets at the same time.|Наконец, в большинстве корпоративных сетей маршрутизаторы будут маршрутизировать пакеты IPv4 и IPv6 одновременно.
That is, your company will not decide to adopt IPv6, and then late one weekend night turn off all IPv4 and enable IPv6 on every device.|То есть ваша компания не решит перейти на IPv6, а однажды поздно вечером в выходной день отключит весь IPv4 и включит IPv6 на каждом устройстве.
Instead, IPv6 allows for a slow migration, during which some or all routers forward both IPv4 and IPv6 packets. (The migration strategy of running both IPv4 and IPv6 is called dual stack.) All you have to do is configure the router to route IPv6 packets, in addition to the existing configuration for routing IPv4 packets.|Вместо этого IPv6 допускает медленную миграцию, во время которой некоторые или все маршрутизаторы пересылают пакеты IPv4 и IPv6. (Стратегия миграции с использованием как IPv4, так и IPv6 называется двойным стеком.) Все, что вам нужно сделать, это настроить маршрутизатор для маршрутизации пакетов IPv6 в дополнение к существующей конфигурации для маршрутизации пакетов IPv4.
#### IPv6 Routing Protocols
Протоколы маршрутизации IPv6   
__|__
--|--
|
IPv6 routers need to learn routes for all the possible IPv6 prefixes (subnets).|Маршрутизаторам IPv6 необходимо изучить маршруты для всех возможных префиксов IPv6 (подсетей).
Just like with IPv4, IPv6 routers use routing protocols, with familiar names, and generally speaking, with familiar functions.|Как и в случае с IPv4, маршрутизаторы IPv6 используют протоколы маршрутизации со знакомыми именами и, вообще говоря, со знакомыми функциями.
|
None of the IPv4 routing protocols could be used to advertise IPv6 routes originally.|Ни один из протоколов маршрутизации IPv4 изначально не мог использоваться для объявления маршрутов IPv6.
They all required some kind of update to add messages, protocols, and rules to support IPv6.|Всем им требовалось какое-то обновление для добавления сообщений, протоколов и правил для поддержки IPv6.
|
Over time, Routing Information Protocol (RIP), Open Shortest Path First (OSPF), Enhanced Interior Gateway Routing Protocol (EIGRP), and Border Gateway Protocol (BGP) were all updated to support IPv6.|Со временем протокол маршрутизации информации (RIP), сначала открытый кратчайший путь (OSPF), расширенный протокол маршрутизации внутреннего шлюза (EIGRP) и протокол пограничного шлюза (BGP) были обновлены для поддержки IPv6.
Table 22-2 lists the names of these routing protocols, with a few comments.|В таблице 22-2 перечислены имена этих протоколов маршрутизации с некоторыми комментариями.
|
Table 22-2 IPv6 Routing Protocols Table end.|Таблица 22-2 Протоколы маршрутизации IPv6 Конец таблицы.
|
In addition, these routing protocols also follow the same interior gateway protocol (IGP) and exterior gateway protocol (EGP) conventions as their IPv4 cousins.|Кроме того, эти протоколы маршрутизации также следуют тем же соглашениям о протоколе внутреннего шлюза (IGP) и протоколе внешнего шлюза (EGP), что и их кузены IPv4.
RIPng, EIGRPv6, and OSPFv3 act as interior gateway protocols, advertising IPv6 routes inside an enterprise.|RIPng, EIGRPv6 и OSPFv3 действуют как протоколы внутреннего шлюза, объявляя маршруты IPv6 внутри предприятия.
|
As you can see from this introduction, IPv6 uses many of the same big ideas as IPv4.|Как вы можете видеть из этого введения, IPv6 использует многие из тех же идей, что и IPv4.
Both define headers with a source and destination address.|Оба определяют заголовки с адресом источника и назначения.
Both define the routing of packets, with the routing process discarding old data-link headers and trailers when forwarding the packets.|Оба определяют маршрутизацию пакетов, при этом процесс маршрутизации отбрасывает старые заголовки и трейлеры каналов данных при пересылке пакетов.
And routers use the same general process to make a routing decision, comparing the packet’s destination IP address to the routing table.|И маршрутизаторы используют тот же самый общий процесс для принятия решения о маршрутизации, сравнивая IP-адрес назначения пакета с таблицей маршрутизации.
|
The big differences between IPv4 and IPv6 revolve around the bigger IPv6 addresses.|Большие различия между IPv4 и IPv6 связаны с большими адресами IPv6.
The next topic begins looking at the specifics of these IPv6 addresses.|В следующей теме мы рассмотрим особенности этих адресов IPv6.
### IPv6 Addressing Formats and Conventions
Форматы и соглашения адресации IPv6   
__|__
--|--
|
The CCNA exam requires some fundamental skills in working with IPv4 addresses.|Экзамен CCNA требует некоторых фундаментальных навыков работы с адресами IPv4.
For example, you need to be able to interpret IPv4 addresses, like 172.21.73.14.|Например, вам нужно уметь интерпретировать адреса IPv4, например 172.21.73.14.
You need to be able to work with prefix-style masks, like /25, and interpret what that means when used with a particular IPv4 address.|Вам нужно уметь работать с масками в стиле префикса, например / 25, и интерпретировать, что это означает при использовании с определенным адресом IPv4.
And you need to be able to take an address and mask, like 172.21.73.14/25, and find the subnet ID.|И вы должны иметь возможность взять адрес и маску, например 172.21.73.14/25, и найти идентификатор подсети.
|
This second major section of this chapter discusses these same ideas for IPv6 addresses.|Во втором основном разделе этой главы обсуждаются те же идеи для адресов IPv6.
In particular, this section looks at|В частности, в этом разделе рассматриваются
###### How to write and interpret unabbreviated 32-digit IPv6 addresses
Как писать и интерпретировать несокращенные 32-значные адреса IPv6   
###### How to abbreviate IPv6 addresses and how to interpret abbreviated addresses
Как сокращать адреса IPv6 и как интерпретировать сокращенные адреса   
###### How to interpret the IPv6 prefix length mask
Как интерпретировать маску длины префикса IPv6   
###### How to find the IPv6 prefix (subnet ID), based on an address and prefix length mask
Как найти префикс IPv6 (идентификатор подсети) на основе адреса и маски длины префикса   
__|__
--|--
|
The biggest challenge with these tasks lies in the sheer size of the numbers.|Самая большая проблема с этими задачами заключается в огромном размере чисел.
Thankfully, the math to find the subnet ID—often a challenge for IPv4—is easier for IPv6, at least to the depth discussed in this book.|К счастью, математические вычисления для определения идентификатора подсети - что часто является проблемой для IPv4 - проще для IPv6, по крайней мере, в той степени, которая обсуждается в этой книге.
#### Representing Full \(Unabbreviated\) IPv6 Addresses
Представление полных \ (несокращенных \) адресов IPv6   
__|__
--|--
|
IPv6 uses a convenient hexadecimal (hex) format for addresses.|IPv6 использует удобный шестнадцатеричный (шестнадцатеричный) формат адресов.
To make it more readable, IPv6 uses a format with eight sets of four hex digits, with each set of four digits separated by a colon.|Чтобы сделать его более читабельным, IPv6 использует формат с восемью наборами из четырех шестнадцатеричных цифр, каждый из которых состоит из четырех цифр, разделенных двоеточием.
For example:|Например:
|
2340:1111:AAAA:0001:1234:5678:9ABC:1234 NOTE For convenience, the author uses the term quartet for one set of four hex digits, with eight quartets in each IPv6 address.|2340: 1111: AAAA: 0001: 1234: 5678: 9ABC: 1234 ПРИМЕЧАНИЕ. Для удобства автор использует термин квартет для обозначения одного набора из четырех шестнадцатеричных цифр с восемью квартетами в каждом IPv6-адресе.
Note that the IPv6 RFCs do not use the term quartet.|Обратите внимание, что в RFC IPv6 термин «квартет» не используется.
|
IPv6 addresses also have a binary format as well, but thankfully, most of the time you do not need to look at the binary version of the addresses.|Адреса IPv6 также имеют двоичный формат, но, к счастью, в большинстве случаев вам не нужно смотреть на двоичную версию адресов.
However, in those cases, converting from hex to binary is relatively easy.|Однако в этих случаях преобразование из шестнадцатеричного в двоичное относительно легко.
Just change each hex digit to the equivalent 4-bit value listed in Table 22-3.|Просто измените каждую шестнадцатеричную цифру на эквивалентное 4-битное значение, указанное в Таблице 22-3.
|
Table 22-3 Hexadecimal/Binary Conversion Chart Table end.|Таблица 22-3 Шестнадцатеричная / двоичная таблица преобразования Конец таблицы.
#### Abbreviating and Expanding IPv6 Addresses
Сокращение и расширение адресов IPv6   
__|__
--|--
|
IPv6 also defines ways to abbreviate or shorten how you write or type an IPv6 address.|IPv6 также определяет способы сокращения или сокращения написания или ввода адреса IPv6.
|
Why?|Зачем?
Although using a 32-digit hex number works much better than working with a 128-bit binary number, 32 hex digits are still a lot of digits to remember, recognize in command output, and type on a command line.|Хотя использование 32-значного шестнадцатеричного числа работает намного лучше, чем работа с 128-разрядным двоичным числом, 32 шестнадцатеричные цифры по-прежнему представляют собой много цифр, которые нужно запомнить, распознать в выводе команды и ввести в командной строке.
The IPv6 address abbreviation rules let you shorten these numbers.|Правила сокращения адресов IPv6 позволяют сокращать эти числа.
|
Computers and routers typically use the shortest abbreviation, even if you type all 32 hex digits of the address.|Компьютеры и маршрутизаторы обычно используют самое короткое сокращение, даже если вы вводите все 32 шестнадцатеричные цифры адреса.
So even if you would prefer to use the longer unabbreviated version of the IPv6 address, you need to be ready to interpret the meaning of an abbreviated IPv6 address as listed by a router or host.|Таким образом, даже если вы предпочитаете использовать более длинную несокращенную версию адреса IPv6, вы должны быть готовы интерпретировать значение сокращенного адреса IPv6, указанное маршрутизатором или хостом.
This section first looks at abbreviating addresses and then at expanding addresses.|В этом разделе сначала рассматриваются сокращенные адреса, а затем расширяющиеся адреса.
##### Abbreviating IPv6 Addresses
Сокращение адресов IPv6   
__|__
--|--
|
Two basic rules let you, or any computer, shorten or abbreviate an IPv6 address:|Два основных правила позволяют вам или любому компьютеру сокращать или сокращать IPv6-адрес:
|
1. Inside each quartet of four hex digits, remove the leading 0s (0s on the left side of the quartet) in the three positions on the left. (Note: at this step, a quartet of 0000 will leave a single 0.)|1. Внутри каждого квартета из четырех шестнадцатеричных цифр удалите ведущие нули (нули в левой части квартета) в трех позициях слева. (Примечание: на этом шаге из квартета 0000 останется сингл 0.)
|
2. Find any string of two or more consecutive quartets of all hex 0s, and replace that set of quartets with a double colon (::).|2. Найдите любую строку из двух или более последовательных квартетов всех шестнадцатеричных нулей и замените этот набор квартетов двойным двоеточием (: :).
The :: means “two or more quartets of all 0s.”|:: означает «два или более квартета из всех нулей».
|
However, you can use :: only once in a single address because otherwise the exact IPv6 might not be clear.|Однако вы можете использовать :: только один раз в одном адресе, потому что в противном случае точный IPv6 может быть неясен.
|
For example, consider the following IPv6 address.|Например, рассмотрим следующий адрес IPv6.
The bold digits represent digits in which the address could be abbreviated.|Цифры, выделенные жирным шрифтом, представляют собой цифры, с помощью которых можно сократить адрес.
|
FE00:0000:0000:0001:0000:0000:0000:0056 Applying the first rule, you would look at all eight quartets independently.|FE00: 0000: 0000: 0001: 0000: 0000: 0000: 0056 Применяя первое правило, вы будете смотреть на все восемь квартетов независимо.
In each, remove all the leading 0s.|В каждом удалите все ведущие нули.
Note that five of the quartets have four 0s, so for these, remove only three 0s, leaving the following value:|Обратите внимание, что пять квартетов имеют четыре нуля, поэтому для них удалите только три нуля, оставив следующее значение:
|
FE00:0:0:1:0:0:0:56 While this abbreviation is valid, the address can be abbreviated more, using the second rule.|FE00: 0: 0: 1: 0: 0: 0: 56 Пока это сокращение действительно, адрес можно сократить еще больше, используя второе правило.
|
In this case, two instances exist where more than one quartet in a row has only a 0.|В этом случае существуют два случая, когда более чем один квартет подряд имеет только 0.
Pick the longest such sequence, and replace it with ::, giving you the shortest legal abbreviation:|Выберите самую длинную такую ​​последовательность и замените ее на ::, получив самое короткое официальное сокращение:
|
FE00:0:0:1::56 While FE00:0:0:1::56 is indeed the shortest abbreviation, this example happens to make it easier to see the two most common mistakes when abbreviating IPv6 addresses.|FE00: 0: 0: 1 :: 56 Хотя FE00: 0: 0: 1 :: 56 действительно является самым коротким сокращением, этот пример помогает увидеть две наиболее распространенные ошибки при сокращении адресов IPv6.
First, never remove trailing 0s in a quartet (0s on the right side of the quartet).|Во-первых, никогда не удаляйте завершающие нули в квартете (нули в правой части квартета).
In this case, the first quartet of FE00 cannot be shortened at all because the two 0s trail.|В этом случае первый квартет FE00 не может быть сокращен вообще из-за следа двух нулей.
So, the following address, which begins now with only FE in the first quartet, is not a correct abbreviation of the original IPv6 address:|Итак, следующий адрес, который теперь начинается только с FE в первом квартете, не является правильным сокращением исходного адреса IPv6:
|
FE:0:0:1::56 The second common mistake is to replace all series of all 0 quartets with a double colon.|FE: 0: 0: 1 :: 56 Вторая распространенная ошибка - заменить все серии из 0 квартетов двойным двоеточием.
For example, the following abbreviation would be incorrect for the original IPv6 address listed in this topic:|Например, следующее сокращение будет неправильным для исходного адреса IPv6, указанного в этом разделе:
|
FE00::1::56 The reason this abbreviation is incorrect is that now you do not know how many quartets of all 0s to substitute into each :: to find the original unabbreviated address.|FE00 :: 1 :: 56 Причина, по которой это сокращение неверно, заключается в том, что теперь вы не знаете, сколько квартетов из всех нулей нужно подставить в каждый ::, чтобы найти исходный несокращенный адрес.
##### Expanding Abbreviated IPv6 Addresses
Расширение сокращенных адресов IPv6   
__|__
--|--
|
To expand an IPv6 address back into its full unabbreviated 32-digit number, use two similar rules.|Чтобы преобразовать IPv6-адрес обратно в его полное несокращенное 32-значное число, используйте два аналогичных правила.
The rules basically reverse the logic of the previous two rules:|Правила в основном меняют логику двух предыдущих правил:
|
1. In each quartet, add leading 0s as needed until the quartet has four hex digits.|1. В каждом квартете при необходимости добавляйте ведущие нули, пока в квартете не будет четырех шестнадцатеричных цифр.
|
2. If a double colon (::) exists, count the quartets currently shown; the total should be less than 8.|2. Если существует двойное двоеточие (: :), считать квартеты, отображаемые в данный момент; общее количество должно быть меньше 8.
Replace the :: with multiple quartets of 0000 so that eight total quartets exist.|Замените :: несколькими квартетами 0000, чтобы всего было восемь квартетов.
|
The best way to get comfortable with these addresses and abbreviations is to do some yourself.|Лучший способ освоить эти адреса и сокращения - это сделать некоторые самостоятельно.
|
Table 22-4 lists some practice problems, with the full 32-digit IPv6 address on the left and the best abbreviation on the right.|В Таблице 22-4 перечислены некоторые практические проблемы, с полным 32-значным адресом IPv6 слева и лучшим сокращением справа.
The table gives you either the expanded or abbreviated address, and you need to supply the opposite value.|В таблице указан расширенный или сокращенный адрес, и вам необходимо указать противоположное значение.
The answers sit at the end of the chapter, in the section “Answers to Earlier Practice Problems.”|Ответы находятся в конце главы, в разделе «Ответы на более ранние практические проблемы».
|
Table 22-4 IPv6 Address Abbreviation and Expansion Practice Table end.|Таблица 22-4. Сокращение адресов IPv6 и практика расширения. Конец таблицы.
#### Representing the Prefix Length of an Address
Представление длины префикса адреса   
__|__
--|--
|
IPv6 uses a mask concept, called the prefix length, similar to IPv4 subnet masks.|В IPv6 используется концепция маски, называемая длиной префикса, аналогичная маске подсети IPv4.
Similar to the IPv4 prefix-style mask, the IPv6 prefix length is written as a /, followed by a decimal number.|Подобно маске стиля префикса IPv4, длина префикса IPv6 записывается как /, за которым следует десятичное число.
The prefix length defines how many bits of the IPv6 address define the IPv6 prefix, which is basically the same concept as the IPv4 subnet ID.|Длина префикса определяет, сколько битов IPv6-адреса определяют префикс IPv6, что по сути является той же концепцией, что и идентификатор подсети IPv4.
|
When writing an IPv6 address and prefix length in documentation, you can choose to leave a space before the /, or not, as shown in the next two examples.|При написании адреса IPv6 и длины префикса в документации вы можете оставить пробел перед / или нет, как показано в следующих двух примерах.
|
2222:1111:0:1:A:B:C:D/64 2222:1111:0:1:A:B:C:D /64 Finally, note that the prefix length is a number of bits, so with IPv6, the legal value range is from 0 through 128, inclusive.|2222: 1111: 0: 1: A: B: C: D / 64 2222: 1111: 0: 1: A: B: C: D / 64 Наконец, обратите внимание, что длина префикса - это количество бит, поэтому с IPv6 допустимый диапазон значений - от 0 до 128 включительно.
#### Calculating the IPv6 Prefix \(Subnet ID\)
Вычисление префикса IPv6 \ (ID подсети \)   
__|__
--|--
|
With IPv4, you can take an IP address and the associated subnet mask, and calculate the subnet ID. With IPv6 subnetting, you can take an IPv6 address and the associated prefix length, and calculate the IPv6 equivalent of the subnet ID: an IPv6 prefix.|С IPv4 вы можете взять IP-адрес и соответствующую маску подсети и вычислить идентификатор подсети. Используя подсети IPv6, вы можете взять IPv6-адрес и соответствующую длину префикса и вычислить IPv6-эквивалент идентификатора подсети: префикс IPv6.
|
Like with different IPv4 subnet masks, some IPv6 prefix lengths make for an easy math problem to find the IPv6 prefix, while some prefix lengths make the math more difficult.|Как и в случае с различными масками подсети IPv4, некоторые длины префиксов IPv6 упрощают математическую задачу для поиска префикса IPv6, в то время как некоторые длины префиксов усложняют математические вычисления.
This section looks at the easier cases, mainly because the size of the IPv6 address space lets us all choose to use IPv6 prefix lengths that make the math much easier.|В этом разделе рассматриваются более простые случаи, главным образом потому, что размер адресного пространства IPv6 позволяет всем нам выбирать длину префикса IPv6, что значительно упрощает математические вычисления.
#### Finding the IPv6 Prefix
Поиск префикса IPv6   
__|__
--|--
|
In IPv6, a prefix represents a group of IPv6 addresses.|В IPv6 префикс представляет группу адресов IPv6.
For now, this section focuses on the math, and only the math, for finding the number that represents that prefix.|На данный момент этот раздел посвящен математике и только математике для поиска числа, представляющего этот префикс.
Chapter 23, “IPv6 Addressing and Subnetting,” then starts putting more meaning behind the actual numbers.|Глава 23, «Адресация IPv6 и разбиение на подсети», затем начинает придавать больше значения фактическим цифрам.
|
Each IPv6 prefix, or subnet if you prefer, has a number that represents the group.|У каждого префикса IPv6 или подсети, если хотите, есть номер, который представляет группу.
Per the IPv6 RFCs, the number itself is also called the prefix, but many people just call it a subnet number or subnet ID, using the same terms as IPv4.|Согласно RFC IPv6, сам номер также называется префиксом, но многие люди просто называют его номером подсети или идентификатором подсети, используя те же термины, что и IPv4.
|
As with IPv4, you can start with an IPv6 address and prefix length, and find the prefix, with the same general rules that you use in IPv4.|Как и в случае с IPv4, вы можете начать с адреса IPv6 и длины префикса и найти префикс по тем же общим правилам, которые вы используете в IPv4.
If the prefix length is /P, use these rules:|Если длина префикса / P, используйте следующие правила:
|
1. Copy the first P bits.|1. Скопируйте первые биты P.
|
2. Change the rest of the bits to 0.|2. Измените остальные биты на 0.
|
When using a prefix length that happens to be a multiple of 4, you do not have to think in terms of bits, but in terms of hex digits.|При использовании длины префикса, кратной 4, вам нужно думать не о битах, а о шестнадцатеричных цифрах.
A prefix length that is a multiple of 4 means that each hex digit is either copied or changed to hex 0.|Длина префикса, кратная 4, означает, что каждая шестнадцатеричная цифра либо копируется, либо изменяется на шестнадцатеричный 0.
Just for completeness, if the prefix length is indeed a multiple of 4, the process becomes 1.|Просто для полноты, если длина префикса действительно кратна 4, процесс становится 1.
Identify the number of hex digits in the prefix by dividing the prefix length (which is in bits) by 4.|Определите количество шестнадцатеричных цифр в префиксе, разделив длину префикса (в битах) на 4.
|
2. Copy the hex digits determined to be in the prefix per the first step.|2. Скопируйте шестнадцатеричные цифры, которые должны быть в префиксе на первом шаге.
|
3. Change the rest of the hex digits to 0.|3. Измените остальные шестнадцатеричные цифры на 0.
|
Figure 22-7 shows an example, with a prefix length of 64.|На рис. 22-7 показан пример с длиной префикса 64.
In this case, Step 1 looks at the /64 prefix length and calculates that the prefix has 16 hex digits.|В этом случае на шаге 1 рассматривается длина префикса / 64 и вычисляется, что префикс имеет 16 шестнадцатеричных цифр.
Step 2 copies the first 16 digits of the IPv6 address, while Step 3 records hex 0s for the rest of the digits.|На шаге 2 копируются первые 16 цифр IPv6-адреса, а на шаге 3 записываются шестнадцатеричные нули для остальных цифр.
|
Figure 22-7 Creating the IPv6 Prefix from an Address/Length After you find the IPv6 prefix, you should also be ready to abbreviate the IPv6 prefix using the same rules you use to abbreviate IPv6 addresses.|Рис. 22-7. Создание префикса IPv6 из адреса / длины После того, как вы найдете префикс IPv6, вы также должны быть готовы сократить префикс IPv6, используя те же правила, которые вы используете для сокращения адресов IPv6.
However, you should pay extra attention to the end of the prefix because it often has several octets of all 0 values.|Однако вам следует обратить особое внимание на конец префикса, потому что он часто имеет несколько октетов всех нулевых значений.
As a result, the abbreviation typically ends with two colons (::).|В результате аббревиатура обычно заканчивается двумя двоеточиями (: :).
|
For example, consider the following IPv6 address that is assigned to a host on a LAN:|Например, рассмотрим следующий IPv6-адрес, назначенный узлу в локальной сети:
|
2000:1234:5678:9ABC:1234:5678:9ABC:1111/64 This example shows an IPv6 address that itself cannot be abbreviated.|2000: 1234: 5678: 9ABC: 1234: 5678: 9ABC: 1111/64 В этом примере показан адрес IPv6, который сам по себе не может быть сокращен.
After you calculate the prefix for the subnet in which the address resides, by zeroing out the last 64 bits (16 digits)|После вычисления префикса для подсети, в которой находится адрес, путем обнуления последних 64 бит (16 цифр)
|
of the address, you find the following prefix value:|адреса вы найдете следующее значение префикса:
|
2000:1234:5678:9ABC:0000:0000:0000:0000/64 This value can be abbreviated, with four quartets of all 0s at the end, as follows:|2000: 1234: 5678: 9ABC: 0000: 0000: 0000: 0000/64 Это значение может быть сокращено с четырьмя квартетами из всех нулей в конце следующим образом:
|
2000:1234:5678:9ABC::/64 To get better at the math, take some time to work through finding the prefix for several practice problems, as listed in Table 22-5.|2000: 1234: 5678: 9ABC :: / 64 Чтобы лучше усвоить математику, потратьте некоторое время на поиск префикса для нескольких практических задач, перечисленных в Таблице 22-5.
The answers sit at the end of the chapter, in the section “Answers to Earlier Practice Problems.”|Ответы находятся в конце главы, в разделе «Ответы на более ранние практические проблемы».
|
Table 22-5 Finding the IPv6 Prefix from an Address/Length Value Table end.|Таблица 22-5. Поиск префикса IPv6 в конце таблицы значений адреса / длины.
#### Working with More-Difficult IPv6 Prefix Lengths
Работа с более сложной длиной префикса IPv6   
__|__
--|--
|
Some prefix lengths make the math to find the prefix very easy, some mostly easy, and some require you to work in binary.|Некоторые длины префиксов делают математический поиск префикса очень простым, некоторые в основном легким, а некоторые требуют работы в двоичном формате.
If the prefix length is a multiple of 16, the process of copying part of the address copies entire quartets.|Если длина префикса кратна 16, процесс копирования части адреса копирует целые квартеты.
If the prefix length is not a multiple of 16 but is a multiple of 4, at least the boundary sits at the edge of a hex digit, so you can avoid working in binary.|Если длина префикса не кратна 16, а кратна 4, по крайней мере, граница находится на краю шестнадцатеричной цифры, поэтому вы можете избежать работы в двоичном формате.
|
Although the /64 prefix length is by far the most common prefix length, you should be ready to find the prefix when using a prefix length that is any multiple of 4.|Хотя длина префикса / 64 на сегодняшний день является наиболее распространенной длиной префикса, вы должны быть готовы найти префикс при использовании длины префикса, кратной 4.
For example, consider the following IPv6 address and prefix length:|Например, рассмотрим следующий IPv6-адрес и длину префикса:
|
2000:1234:5678:9ABC:1234:5678:9ABC:1111/56 Because this example uses a /56 prefix length, the prefix includes the first 56 bits, or first 14 complete hex digits, of the address.|2000: 1234: 5678: 9ABC: 1234: 5678: 9ABC: 1111/56 Поскольку в этом примере используется длина префикса / 56, префикс включает первые 56 битов или первые 14 полных шестнадцатеричных цифр адреса.
The rest of the hex digits will be 0, resulting in the following prefix:|Остальные шестнадцатеричные цифры будут равны 0, что приведет к следующему префиксу:
|
2000:1234:5678:9A00:0000:0000:0000:0000/56 This value can be abbreviated, with four quartets of all 0s at the end, as follows:|2000: 1234: 5678: 9A00: 0000: 0000: 0000: 0000/56 Это значение можно сократить до четырех квартетов из всех нулей в конце следующим образом:
|
2000:1234:5678:9A00::/56 This example shows an easy place to make a mistake.|2000: 1234: 5678: 9A00 :: / 56 В этом примере показано, как легко сделать ошибку.
Sometimes, people look at the /56 and think of that as the first 14 hex digits, which is correct.|Иногда люди смотрят на / 56 и думают, что это первые 14 шестнадцатеричных цифр, и это правильно.
However, they then copy the first 14 hex digits and add a double colon, showing the following:|Однако затем они копируют первые 14 шестнадцатеричных цифр и добавляют двойное двоеточие, показывая следующее:
|
2000:1234:5678:9A::/56 This abbreviation is not correct because it removed the trailing “00” at the end of the fourth quartet.|2000: 1234: 5678: 9A :: / 56 Эта аббревиатура неверна, так как она убрала завершающий «00» в конце четвертого квартета.
If you expanded the abbreviated value, it would begin with 2000:1234:5678:009A, not 2000:1234:5678:9A00.|Если вы расширите сокращенное значение, оно будет начинаться с 2000: 1234: 5678: 009A, а не 2000: 1234: 5678: 9A00.
So, be careful when abbreviating when the boundary is not at the edge of a quartet.|Так что будьте осторожны при сокращении, когда граница не находится на краю квартета.
|
Once again, some extra practice can help.|Еще раз, немного дополнительной практики может помочь.
Table 22-6 uses examples that have a prefix length that is a multiple of 4, but is not on a quartet boundary, just to get some extra practice.|В таблице 22-6 используются примеры, у которых длина префикса кратна 4, но они не находятся на границе квартета, просто для дополнительной практики.
The answers sit at the end of the chapter, in the section “Answers to Earlier Practice Problems.”|Ответы находятся в конце главы, в разделе «Ответы на более ранние практические проблемы».
|
Table 22-6 Finding the IPv6 Prefix from an Address/Length Value Table end.|Таблица 22-6. Поиск префикса IPv6 в конце таблицы значений адреса / длины.
### Chapter Review
Обзор главы   
__|__
--|--
|
One key to doing well on the exams is to perform repetitive spaced review sessions.|Один из ключей к успешной сдаче экзаменов - повторение повторных сессий с интервалом.
Review this chapter’s material using either the tools in the book or interactive tools for the same material found on the book’s companion website.|Просмотрите материал этой главы, используя инструменты из книги или интерактивные инструменты для тех же материалов, которые можно найти на сопутствующем веб-сайте книги.
Refer to the “Your Study Plan” element for more details.|Обратитесь к элементу «Ваш учебный план» для получения более подробной информации.
Table 22-7 outlines the key review elements and where you can find them.|В Таблице 22-7 представлены основные элементы обзора и их местонахождение.
To better track your study progress, record when you completed these activities in the second column.|Чтобы лучше отслеживать свои успехи в учебе, отметьте, когда вы выполнили эти задания, во втором столбце.
|
Table 22-7 Chapter Review Tracking Table end.|Таблица 22-7. Конец таблицы отслеживания обзора главы.
|
Table 22-8 Key Topics for Chapter 22 Table end.|Таблица 22-8 Ключевые темы главы 22 Конец таблицы.
|
Key Terms You Should Know IPv4 address exhaustion, IP version 6 (IPv6), OSPF version 3 (OSPFv3), EIGRP version 6 (EIGRPv6), prefix, prefix length, quartet Additional Practice for This Chapter’s Processes For additional practice with IPv6 abbreviations, you may do the same set of practice problems have two options to use:|Ключевые термины, которые вы должны знать, исчерпание адреса IPv4, IP версии 6 (IPv6), OSPF версии 3 (OSPFv3), EIGRP версии 6 (EIGRPv6), префикс, длина префикса, квартет Дополнительная практика для процессов этой главы Для дополнительной практики с сокращениями IPv6 вы может выполнять тот же набор практических задач, есть два варианта использования:
|
PDF: Navigate to the companion website and open the PDF for Appendix G.|PDF: перейдите на сопутствующий веб-сайт и откройте PDF-файл для приложения G.
|
Application: Navigate to the companion website and use these applications:|Приложение: перейдите на сопутствующий веб-сайт и используйте эти приложения:
|
“Practice Exercise: Abbreviating and Expanding Addresses”|«Практическое упражнение: сокращение и расширение адресов»
|
“Practice Exercise: Calculating the IPv6 Prefix”|«Практическое упражнение: расчет префикса IPv6»
|
“Practice Exercise: Calculating the IPv6 Prefix Round 2”|«Практическое упражнение: расчет префикса IPv6, раунд 2»
|
Answers to Earlier Practice Problems This chapter includes practice problems spread around different locations in the chapter.|Ответы на предыдущие практические проблемы В этой главе представлены практические задачи, разбросанные по разным местам в главе.
The answers are located in Tables 22-9, 22-10, and 22-11.|Ответы находятся в таблицах 22-9, 22-10 и 22-11.
|
Table 22-9 Answers to Questions in the Earlier Table 22-4 Table end.|Таблица 22-9. Ответы на предыдущие вопросы. Таблица 22-4. В конце таблицы.
|
Table 22-10 Answers to Questions in the Earlier Table 22-5 Table end.|Таблица 22-10. Ответы на предыдущие вопросы. Таблица 22-5. В конце таблицы.
|
Table 22-11 Answers to Questions in the Earlier Table 22-6 Table end.|Таблица 22-11. Ответы на предыдущие вопросы. Таблица 22-6. В конце таблицы.
## Chapter 23 IPv6 Addressing and Subnetting
Глава 23 Адресация IPv6 и разделение на подсети   
__|__
--|--
|
This chapter covers the following exam topics:|В этой главе рассматриваются следующие экзаменационные темы:
###### 1.0 Network Fundamentals
1.0 Основы сети   
###### 1.8 Configure and verify IPv6 addressing and prefix
1.8 Настройка и проверка адресации и префикса IPv6   
###### 1.9 Compare and contrast IPv6 address types
1.9 Сравните и сопоставьте типы адресов IPv6   
###### 1.9.a Global unicast
1.9.a Глобальная одноадресная передача   
###### 1.9.b Unique local
1.9.b Уникальный местный   
__|__
--|--
|
IPv4 organizes the address space in a couple of ways.|IPv4 организует адресное пространство двумя способами.
First, IPv4 splits addresses by class, with Classes A, B, and C defining unicast IPv4 addresses. (The term unicast refers to the fact that each address is used by only one interface.) Then, within the Class A, B, and C address range, the Internet Assigned Numbers Authority (IANA) and the Internet Corporation for Assigned Names and Numbers (ICANN) reserve most of the addresses as public IPv4 addresses, with a few reserved as private IPv4 addresses.|Во-первых, IPv4 разделяет адреса по классам, причем классы A, B и C определяют одноадресные IPv4-адреса. (Термин одноадресная передача относится к тому факту, что каждый адрес используется только одним интерфейсом.) Затем, в пределах диапазона адресов классов A, B и C, Internet Assigned Numbers Authority (IANA) и Internet Corporation for Assigned Names and Numbers (ICANN) резервирует большинство адресов как общедоступные адреса IPv4, а некоторые зарезервированы как частные адреса IPv4.
|
IPv6 does not use any concept like the classful network concept used by IPv4.|IPv6 не использует никаких концепций, подобных концепции классовой сети, используемой IPv4.
However, IANA does still reserve some IPv6 address ranges for specific purposes, even with some address ranges that serve as both public IPv6 addresses and private IPv6 addresses.|Однако IANA по-прежнему резервирует некоторые диапазоны адресов IPv6 для определенных целей, даже если некоторые диапазоны адресов служат как общедоступными, так и частными адресами IPv6.
IANA also attempts to take a practical approach to reserving ranges of the entire IPv6 address space for different purposes, using the wisdom gained from several decades of fast growth in the IPv4 Internet.|IANA также пытается применить практический подход к резервированию диапазонов всего адресного пространства IPv6 для различных целей, используя мудрость, полученную в результате нескольких десятилетий быстрого роста IPv4 в Интернете.
|
This chapter has two major sections.|Эта глава состоит из двух основных разделов.
The first examines global unicast addresses, which serve as public IPv6 addresses.|Первый исследует глобальные одноадресные адреса, которые служат общедоступными адресами IPv6.
The second major section looks at unique local addresses, which serve as private IPv6 addresses.|Во втором основном разделе рассматриваются уникальные локальные адреса, которые служат частными адресами IPv6.
### “Do I Know This Already?” Quiz
«Знаю ли я это уже?» Викторина   
__|__
--|--
|
Take the quiz (either here or use the PTP software) if you want to use the score to help you decide how much time to spend on this chapter.|Пройдите тест (здесь или воспользуйтесь программой PTP), если вы хотите использовать оценку, чтобы решить, сколько времени потратить на эту главу.
The letter answers are listed at the bottom of the page following the quiz.|Ответы на письма перечислены внизу страницы после викторины.
Appendix C, found both at the end of the book as well as on the companion website, includes both the answers and explanations.|Приложение C, которое можно найти как в конце книги, так и на сопутствующем веб-сайте, включает как ответы, так и пояснения.
You can also find both answers and explanations in the PTP testing software.|Вы также можете найти ответы и пояснения в программе тестирования PTP.
|
Table 23-1 “Do I Know This Already?” Foundation Topics Section-to-Question Mapping|Таблица 23-1 «Знаю ли я это уже?» Сопоставление разделов с вопросами по основным темам
### Foundation Topics
Основные темы   
### Global Unicast Addressing Concepts
Концепции глобальной одноадресной адресации   
__|__
--|--
|
Unique Local Unicast Addresses 5 CHAPTER 23 1.|Уникальные локальные одноадресные адреса 5 ГЛАВА 23 1.
Which of the following IPv6 addresses appears to be a unique local unicast address, based on its first few hex digits?|Какой из следующих IPv6-адресов является уникальным локальным одноадресным адресом на основе его первых нескольких шестнадцатеричных цифр?
|
a. 3123:1:3:5::1 b.|а. 3123: 1: 3: 5 :: 1 б.
FE80::1234:56FF:FE78:9ABC c.|FE80 :: 1234: 56FF: FE78: 9ABC гр.
FDAD::1 d.|ФДАД :: 1 дн.
FF00::5 2.|FF00 :: 5 2.
Which of the following IPv6 addresses appears to be a global unicast address, based on its first few hex digits?|Какой из следующих IPv6-адресов является глобальным адресом одноадресной рассылки на основе его первых нескольких шестнадцатеричных цифр?
|
a. 3123:1:3:5::1 b.|а. 3123: 1: 3: 5 :: 1 б.
FE80::1234:56FF:FE78:9ABC c.|FE80 :: 1234: 56FF: FE78: 9ABC гр.
FDAD::1 d.|ФДАД :: 1 дн.
FF00::5 3.|FF00 :: 5 3.
When subnetting an IPv6 address block, an engineer shows a drawing that breaks the address structure into three pieces.|При разделении блока адресов IPv6 на подсети инженер показывает рисунок, на котором структура адреса разбита на три части.
Comparing this concept to a three-part IPv4 address structure, which part of the IPv6 address structure is most like the IPv4 network part of the address?|Сравнивая эту концепцию со структурой IPv4-адреса из трех частей, какая часть структуры IPv6-адреса больше всего похожа на сетевую часть IPv4-адреса?
|
a. Subnet b.|а. Подсеть b.
Interface ID c.|ID интерфейса c.
Network d.|Сеть d.
Global routing prefix e.|Префикс глобальной маршрутизации e.
Subnet router anycast 4.|Маршрутизатор подсети Anycast 4.
When subnetting an IPv6 address block, an engineer shows a drawing that breaks the address structure into three pieces.|При разделении блока адресов IPv6 на подсети инженер показывает рисунок, на котором структура адреса разбита на три части.
Assuming that all subnets use the same prefix length, which of the following answers lists the name of the field on the far right side of the address?|Предполагая, что все подсети используют одинаковую длину префикса, в каком из следующих ответов указано имя поля в правой части адреса?
|
a. Subnet b.|а. Подсеть b.
Interface ID c.|ID интерфейса c.
Network d.|Сеть d.
Global routing prefix e.|Префикс глобальной маршрутизации e.
Subnet router anycast 5.|Маршрутизатор подсети Anycast 5.
For the IPv6 address FD00:1234:5678:9ABC:DEF1:2345:6789:ABCD, which part of the address is considered the global ID of the unique local address?|Для IPv6-адреса FD00: 1234: 5678: 9ABC: DEF1: 2345: 6789: ABCD какая часть адреса считается глобальным идентификатором уникального локального адреса?
|
a. None; this address has no global ID.|а. Никто; у этого адреса нет глобального идентификатора.
|
b. 00:1234:5678:9ABC c.|б. 00: 1234: 5678: 9ABC c.
DEF1:2345:6789:ABCD d. 00:1234:5678 e.|DEF1: 2345: 6789: ABCD d. 00: 1234: 5678 д.
FD00 Foundation Topics Global Unicast Addressing Concepts This first major section of the chapter focuses on one type of unicast IPv6 addresses: global unicast addresses.|Темы FD00 Foundation Концепции глобальной одноадресной адресации Этот первый основной раздел главы посвящен одному типу одноадресных адресов IPv6: глобальным одноадресным адресам.
As it turns out, many of the general concepts and processes behind these global unicast IPv6 addresses follow the original intent for public IPv4 addresses.|Как оказалось, многие из общих концепций и процессов, лежащих в основе этих глобальных одноадресных IPv6-адресов, следуют первоначальному замыслу для общедоступных IPv4-адресов.
So, this section begins with a review of some IPv4 concepts, followed by the details of how a company can use global unicast addresses.|Итак, этот раздел начинается с обзора некоторых концепций IPv4, за которым следует подробное описание того, как компания может использовать глобальные одноадресные адреса.
|
This first section also discusses IPv6 subnetting and the entire process of taking a block of global unicast addresses and creating subnets for one company.|В этом первом разделе также обсуждается разделение на подсети IPv6 и весь процесс взятия блока глобальных одноадресных адресов и создания подсетей для одной компании.
This process takes a globally unique global routing prefix, creates IPv6 subnets, and assigns IPv6 addresses from within each subnet, much like with IPv4.|Этот процесс принимает глобально уникальный префикс глобальной маршрутизации, создает подсети IPv6 и назначает адреса IPv6 внутри каждой подсети, как и в случае с IPv4.
#### Public and Private IPv6 Addresses
Общедоступные и частные адреса IPv6   
__|__
--|--
|
In the history of IPv4 addressing, the world started out with a plan that gave every single host a globally unique public IPv4 address.|В истории адресации IPv4 мир начинал с плана, по которому каждому хосту давался глобально уникальный общедоступный IPv4-адрес.
However, as discussed in several places already, the IPv4 address space had too few addresses.|Однако, как уже обсуждалось в нескольких местах, в адресном пространстве IPv4 было слишком мало адресов.
So, in the 1990s, companies started using addresses from the private IPv4 address range, as defined in RFC 1918.|Итак, в 1990-х годах компании начали использовать адреса из диапазона частных IPv4-адресов, как это определено в RFC 1918.
These companies either simply did not connect to the Internet, or to connect to the Internet, they used Network Address Translation (NAT), sharing a few public globally unique IPv4 addresses for all host connections into the Internet.|Эти компании либо просто не подключались к Интернету, либо для подключения к Интернету они использовали преобразование сетевых адресов (NAT), разделяя несколько общедоступных глобально уникальных IPv4-адресов для всех подключений хоста к Интернету.
|
IPv6 allows two similar options of public and private unicast addressing, beginning with global unicast addresses as the public IPv6 address space.|IPv6 допускает два аналогичных варианта публичной и частной одноадресной адресации, начиная с глобальных одноадресных адресов в качестве общедоступного адресного пространства IPv6.
Similar to public IPv4 addresses, IPv6 global unicast addresses rely on an administrative process that assigns each company a unique IPv6 address block.|Подобно общедоступным IPv4-адресам, глобальные одноадресные IPv6-адреса зависят от административного процесса, который назначает каждой компании уникальный блок адресов IPv6.
Each company then subnets this IPv6 address block and only uses addresses from within that block.|Затем каждая компания объединяет этот блок адресов IPv6 в подсети и использует только адреса из этого блока.
The result: that company uses addresses that are unique across the globe as well.|Результат: эта компания использует адреса, которые также уникальны во всем мире.
|
The second IPv6 option uses unique local IPv6 addresses, which work more like the IPv4 private addresses.|Второй вариант IPv6 использует уникальные локальные адреса IPv6, которые больше похожи на частные адреса IPv4.
Companies that do not plan to connect to the Internet and companies that plan to use IPv6 NAT can use these private unique local addresses.|Компании, которые не планируют подключаться к Интернету, и компании, которые планируют использовать IPv6 NAT, могут использовать эти частные уникальные локальные адреса.
The process also works similarly to IPv4: The engineer can read the details in an RFC, pick some numbers, and start assigning IPv6 addresses without having to register with IANA or any other authority.|Этот процесс также работает аналогично IPv4: инженер может прочитать детали в RFC, выбрать несколько номеров и начать назначать адреса IPv6 без необходимости регистрироваться в IANA или другом органе.
|
The following lists summarizes the comparisons between global unicast addresses and unique local addresses:|В следующих списках приведены сравнения между глобальными адресами одноадресной рассылки и уникальными локальными адресами:
|
Global unicast: Addresses that work like public IPv4 addresses.|Глобальная одноадресная рассылка: адреса, которые работают как общедоступные адреса IPv4.
The organization that needs IPv6 addresses asks for a registered IPv6 address block, which is assigned as a global routing prefix.|Организация, которой требуются адреса IPv6, запрашивает зарегистрированный блок адресов IPv6, который назначается в качестве префикса глобальной маршрутизации.
After that, only that organization uses the addresses inside that block of addresses—that is, the addresses that begin with the assigned prefix.|После этого только эта организация использует адреса внутри этого блока адресов, то есть адреса, начинающиеся с назначенного префикса.
|
Unique local: Works somewhat like private IPv4 addresses, with the possibility that multiple organizations use the exact same addresses, and with no requirement for registering with any numbering authority.|Уникальный локальный: работает как частные адреса IPv4, с возможностью того, что несколько организаций используют одни и те же адреса, и без необходимости регистрации в каком-либо органе нумерации.
|
Answers to the “Do I Know This Already?” quiz:|Ответы на вопрос «Знаю ли я это уже?» викторина:
|
1 C 2 A 3 D 4 B 5 D The rest of this first major section of the chapter examines global unicast addresses in more detail, while the second major section of the chapter examines unique local addresses.|1 C 2 A 3 D 4 B 5 D В оставшейся части этого первого основного раздела главы глобальные одноадресные адреса рассматриваются более подробно, а во втором основном разделе главы исследуются уникальные локальные адреса.
#### The IPv6 Global Routing Prefix
Префикс глобальной маршрутизации IPv6   
__|__
--|--
|
IPv6 global unicast addresses allow IPv6 to work more like the original design of the IPv4 Internet.|Глобальные одноадресные IPv6-адреса позволяют IPv6 работать больше, чем оригинальная конструкция Интернета IPv4.
Each organization asks for a block of IPv6 addresses, which no one else can use.|Каждая организация запрашивает блок адресов IPv6, который никто другой не может использовать.
|
That organization further subdivides the address block into smaller chunks, called subnets.|Эта организация далее подразделяет адресный блок на более мелкие части, называемые подсетями.
|
Finally, to choose what IPv6 address to use for any host, the engineer chooses an address from the right subnet.|Наконец, чтобы выбрать, какой IPv6-адрес использовать для любого хоста, инженер выбирает адрес из правильной подсети.
|
That reserved block of IPv6 addresses—a set of addresses that only one company can use—|Этот зарезервированный блок адресов IPv6 - набор адресов, который может использовать только одна компания -
|
is called a global routing prefix.|называется префиксом глобальной маршрутизации.
Each organization that wants to connect to the Internet and use IPv6 global unicast addresses should ask for and receive a global routing prefix.|Каждая организация, которая хочет подключиться к Интернету и использовать глобальные одноадресные IPv6-адреса, должна запросить и получить префикс глобальной маршрутизации.
Very generally, you can think of the global routing prefix like an IPv4 Class A, B, or C network number from the range of public IPv4 addresses.|В общем, префикс глобальной маршрутизации можно рассматривать как сетевой номер IPv4 класса A, B или C из диапазона общедоступных адресов IPv4.
|
The term global routing prefix might not make you think of a block of IPv6 addresses at first.|Термин «префикс глобальной маршрутизации» может сначала не напомнить вам о блоке адресов IPv6.
The term actually refers to the idea that Internet routers can have one route that refers to all the addresses inside the address block, without a need to have routes for smaller parts of that block.|Этот термин фактически относится к идее, что у интернет-маршрутизаторов может быть один маршрут, который относится ко всем адресам внутри адресного блока, без необходимости иметь маршруты для меньших частей этого блока.
For example, Figure 23-1 shows three companies, with three different IPv6 global routing prefixes; the router on the right (R4) has one IPv6 route for each global routing prefix.|Например, на рис. 23-1 показаны три компании с тремя разными префиксами глобальной маршрутизации IPv6; маршрутизатор справа (R4) имеет один маршрут IPv6 для каждого префикса глобальной маршрутизации.
|
Figure 23-1 Three Global Routing Prefixes, with One Route per Prefix The global routing prefix sets those IPv6 addresses apart for use by that one company, just like a public IPv4 network or CIDR address block does in IPv4.|Рис. 23-1. Три префикса глобальной маршрутизации, с одним маршрутом на префикс. Префикс глобальной маршрутизации выделяет эти IPv6-адреса для использования этой одной компанией, точно так же, как общедоступная сеть IPv4 или блок адресов CIDR в IPv4.
All IPv6 addresses inside that company should begin with that global routing prefix, to avoid using other companies’|Все IPv6-адреса внутри этой компании должны начинаться с этого префикса глобальной маршрутизации, чтобы избежать использования адресов других компаний.
|
IPv6 addresses.|Адреса IPv6.
No other companies should use IPv6 addresses with that same prefix.|Никакие другие компании не должны использовать адреса IPv6 с таким же префиксом.
And thankfully, IPv6 has plenty of space to allow all companies to have a global routing prefix, with plenty of addresses.|И, к счастью, в IPv6 достаточно места, чтобы позволить всем компаниям иметь префикс глобальной маршрутизации с большим количеством адресов.
|
Both the IPv6 and IPv4 address assignment processes rely on the same organizations:|Процессы назначения адресов IPv6 и IPv4 зависят от одних и тех же организаций:
|
IANA (along with ICANN), the Regional Internet Registries (RIR), and ISPs. For example, an imaginary company, Company1, received the assignment of a global routing prefix.|IANA (вместе с ICANN), региональные интернет-регистратуры (RIR) и интернет-провайдеры. Например, воображаемой компании Company1 был назначен префикс глобальной маршрутизации.
The prefix means “All addresses whose first 12 hex digits are 2001:0DB8:1111,” as represented by prefix 2001:0DB8:1111::/48.|Префикс означает «Все адреса, первые 12 шестнадцатеричных цифр которых - 2001: 0DB8: 1111», что представлено префиксом 2001: 0DB8: 1111 :: / 48.
To receive that assignment, the process shown in Figure 23-2 happened.|Чтобы получить это назначение, произошел процесс, показанный на рис. 23-2.
|
Figure 23-2 Prefix Assignment with IANA, RIRs, and ISPs The event timeline in the figure uses a left-to-right flow; in other words, the event on the far left must happen first.|Рис. 23-2. Назначение префиксов с помощью IANA, RIR и ISP На временной шкале событий на рисунке используется поток слева направо; другими словами, событие слева должно произойти первым.
Following the flow from left to right in the figure:|Следуя потоку слева направо на рисунке:
|
1. IANA allocates ARIN prefix 2001::/16: ARIN (the RIR for North America) asks IANA for the allocation of a large block of addresses.|1. IANA выделяет префикс ARIN 2001 :: / 16: ARIN (RIR для Северной Америки) запрашивает у IANA выделение большого блока адресов.
In this imaginary example, IANA gives ARIN a prefix of “all addresses that begin 2001,” or 2001::/16.|В этом воображаемом примере IANA дает ARIN префикс «все адреса, начинающиеся с 2001 года» или 2001 :: / 16.
|
2. ARIN allocates NA-ISP1 prefix 2001:0DB8::/32: NA-ISP1, an imaginary ISP based in North America, asks ARIN for a new IPv6 prefix.|2. ARIN выделяет префикс NA-ISP1 2001: 0DB8 :: / 32: NA-ISP1, воображаемый интернет-провайдер из Северной Америки, запрашивает у ARIN новый префикс IPv6.
ARIN takes a subset of its 2001::/16 prefix, specifically all addresses that begin with the 32 bits (8 hex digits) 2001:0DB8, and allocates it to the ISP.|ARIN берет подмножество своего префикса 2001 :: / 16, а именно все адреса, которые начинаются с 32 бит (8 шестнадцатеричных цифр) 2001: 0DB8, и выделяет его провайдеру.
|
3. NA-ISP1 assigns Company 1 2001:0DB8:1111::/48: Company 1 decides to start supporting IPv6, so it goes to its ISP, NA-ISP1, to ask for a block of global unicast addresses.|3. NA-ISP1 назначает Компанию 1 2001: 0DB8: 1111 :: / 48: Компания 1 решает начать поддержку IPv6, поэтому она обращается к своему ISP, NA-ISP1, чтобы запросить блок глобальных одноадресных адресов.
NA-ISP1 assigns Company 1 a “small” piece of NA-ISP1’s address block, in this case the addresses that begin with the 48 bits (12 hex digits) of 2001:0DB8:1111 (2001:0DB8:1111::/48).|NA-ISP1 назначает Компании 1 «небольшой» фрагмент адресного блока NA-ISP1, в данном случае адреса, которые начинаются с 48 бит (12 шестнадцатеричных цифр) 2001: 0DB8: 1111 (2001: 0DB8: 1111 :: / 48 ).
|
NOTE If you do not plan to connect to the Internet using IPv6 for a while and just want to experiment, you do not need to ask for an IPv6 global routing prefix to be assigned.|ПРИМЕЧАНИЕ. Если вы не планируете какое-то время подключаться к Интернету с использованием IPv6 и просто хотите поэкспериментировать, вам не нужно запрашивать назначение префикса глобальной маршрутизации IPv6.
Just make up IPv6 addresses and configure your devices, or use unique local addresses as discussed toward the end of this chapter.|Просто придумайте IPv6-адреса и настройте свои устройства или используйте уникальные локальные адреса, как описано в конце этой главы.
#### Address Ranges for Global Unicast Addresses
Диапазоны адресов для глобальных одноадресных адресов   
__|__
--|--
|
Global unicast addresses make up the majority of the IPv6 address space.|Глобальные одноадресные адреса составляют большую часть адресного пространства IPv6.
However, unlike IPv4, the rules for which IPv6 addresses fall into which category are purposefully more flexible than they were with IPv4 and the rules for IPv4 Classes A, B, C, D, and E.|Однако, в отличие от IPv4, правила, по которым IPv6-адреса попадают в определенную категорию, целенаправленно более гибкие, чем в случае с IPv4, и правила для IPv4 классов A, B, C, D и E.
|
Originally, IANA reserved all IPv6 addresses that begin with hex 2 or 3 as global unicast addresses. (This address range can be written succinctly as prefix 2000::/3.)|Первоначально IANA зарезервировала все адреса IPv6, начинающиеся с шестнадцатеричного числа 2 или 3, как глобальные одноадресные адреса. (Этот диапазон адресов можно кратко записать как префикс 2000 :: / 3.)
|
Later IANA made the global unicast address range wider, basically to include all IPv6 addresses not otherwise allocated for other purposes.|Позже IANA расширила глобальный диапазон одноадресных адресов, в основном, чтобы включить в него все IPv6-адреса, которые не были выделены для других целей.
For example, the unique local unicast addresses, discussed later in this chapter, all start with hex FD. So, while global unicast addresses would not include any addresses that begin with FD, any address ranges that are not specifically reserved, for now, are considered to be global unicast addresses.|Например, все уникальные локальные одноадресные адреса, которые обсуждаются далее в этой главе, начинаются с шестнадцатеричного FD. Таким образом, хотя глобальные адреса одноадресной рассылки не будут включать в себя адреса, начинающиеся с FD, любые диапазоны адресов, которые на данный момент специально не зарезервированы, считаются глобальными адресами одноадресной рассылки.
|
Finally, just because an amazingly enormous number of addresses sit within the global unicast address range, IANA does not assign prefixes from all over the address range.|Наконец, только потому, что в глобальном диапазоне адресов одноадресной рассылки находится невероятно огромное количество адресов, IANA не назначает префиксы для всего диапазона адресов.
IPv4 has survived well for more than 30 years with an admittedly too-small address size because IANA has adopted good practices to conserve the IPv4 address space.|IPv4 хорошо выживает более 30 лет при явно слишком маленьком размере адреса, потому что IANA приняла передовые методы для сохранения адресного пространства IPv4.
By making smart and practical choices in assigning IPv6 addresses, the IPv6 address space could last much longer than IPv4.|Принимая разумный и практичный выбор при назначении адресов IPv6, адресное пространство IPv6 может прослужить намного дольше, чем IPv4.
|
Table 23-2 lists the address prefixes discussed in this book and their purpose.|В Таблице 23-2 перечислены префиксы адресов, обсуждаемые в этой книге, и их назначение.
|
Table 23-2 Some Types of IPv6 Addresses and Their First Hex Digit(s)|Таблица 23-2. Некоторые типы адресов IPv6 и их первые шестнадцатеричные цифры
|
Table end.|Конец таблицы.
#### IPv6 Subnetting Using Global Unicast Addresses
Подсети IPv6 с использованием глобальных одноадресных адресов   
__|__
--|--
|
After an enterprise has a block of reserved global unicast addresses—in other words, a global routing prefix—the company needs to subdivide that large address block into subnets.|После того, как у предприятия есть блок зарезервированных глобальных одноадресных адресов - другими словами, префикс глобальной маршрутизации - компании необходимо разделить этот большой блок адресов на подсети.
|
Subnetting IPv6 addresses works generally like IPv4, but with mostly simpler math (hoorah!).|Разделение адресов IPv6 на подсети в целом работает так же, как и IPv4, но с более простой математикой (ура!).
|
Because of the absolutely large number of addresses available, most everyone uses the easiest possible IPv6 prefix length: /64.|Из-за абсолютно большого количества доступных адресов почти каждый использует самую простую длину префикса IPv6: / 64.
Using /64 as the prefix length for all subnets makes the IPv6 subnetting math just as easy as using a /24 mask for all IPv4 subnets.|Использование / 64 в качестве длины префикса для всех подсетей упрощает вычисление подсетей IPv6, как использование маски / 24 для всех подсетей IPv4.
In addition, the dynamic IPv6 address assignment process works better with a /64 prefix length as well; so in practice, and in this book, expect IPv6 designs to use a /64 prefix length.|Кроме того, процесс динамического назначения адресов IPv6 лучше работает и с длиной префикса / 64; поэтому на практике и в этой книге следует ожидать, что в проектах IPv6 будет использоваться длина префикса / 64.
|
This section does walk you through the different parts of IPv6 subnetting, while mostly using examples that use a /64 prefix length.|В этом разделе вы познакомитесь с различными частями подсетей IPv6, в основном используя примеры, в которых используется длина префикса / 64.
The discussion defines the rules about which addresses should be in the same subnet and which addresses need to be in different subnets.|Обсуждение определяет правила о том, какие адреса должны быть в одной подсети, а какие - в разных подсетях.
|
Plus this section looks at how to analyze the global routing prefix and associated prefix length to find all the IPv6 prefixes (subnet IDs) and the addresses in each subnet.|Кроме того, в этом разделе рассматривается, как анализировать префикс глобальной маршрутизации и соответствующую длину префикса, чтобы найти все префиксы IPv6 (идентификаторы подсети) и адреса в каждой подсети.
|
NOTE If the IPv4 subnetting concepts are a little vague, you might want to reread Chapter 11, “Perspectives on IPv4 Subnetting,” which discusses the subnetting concepts for IPv4.|ПРИМЕЧАНИЕ. Если концепции разделения на подсети IPv4 немного расплывчаты, вы можете перечитать главу 11 «Перспективы создания подсетей IPv4», в которой обсуждаются концепции разделения на подсети для IPv4.
##### Deciding Where IPv6 Subnets Are Needed
Решаем, где нужны подсети IPv6   
__|__
--|--
|
First, IPv6 and IPv4 both use the same concepts about where a subnet is needed: one for each VLAN and one for each point-to-point WAN connection (serial and Ethernet).|Во-первых, IPv6 и IPv4 используют одни и те же концепции относительно того, где нужна подсеть: по одной для каждой VLAN и по одной для каждого соединения WAN типа «точка-точка» (последовательного и Ethernet).
Figure 23-3 shows an example of the idea, using the small enterprise internetwork of Company 1.|На рис. 23-3 показан пример идеи, использующей объединенную сеть малых предприятий Компании 1.
|
Company 1 has two LANs, with a point-to-point serial link connecting the sites.|Компания 1 имеет две локальные сети с последовательным каналом связи точка-точка, соединяющим сайты.
It also has an Ethernet WAN link connected to an ISP. Using the same logic you would use for IPv4, Company 1 needs four IPv6 subnets.|Он также имеет канал Ethernet WAN, подключенный к интернет-провайдеру. Используя ту же логику, которую вы использовали бы для IPv4, компании 1 нужно четыре подсети IPv6.
|
Figure 23-3 Locations for IPv6 Subnets|Рисунок 23-3 Расположение подсетей IPv6
##### The Mechanics of Subnetting IPv6 Global Unicast Addresses
Механика разделения глобальных одноадресных IPv6-адресов на подсети   
__|__
--|--
|
To understand how to subnet your one large block of IPv6 addresses, you need to understand some of the theory and mechanisms IPv6 uses.|Чтобы понять, как разделить на подсети один большой блок адресов IPv6, вам необходимо понять некоторые теории и механизмы, которые использует IPv6.
To learn those details, it can help to compare IPv6 with some similar concepts from IPv4.|Чтобы узнать эти подробности, можно сравнить IPv6 с некоторыми аналогичными концепциями IPv4.
|
With IPv4, without subnetting, an address has two parts: a network part and a host part.|В IPv4 без разделения на подсети адрес состоит из двух частей: сетевая часть и часть хоста.
|
Class A, B, and C rules define the length of the network part, with the host part making up the rest of the 32-bit IPv4 address, as shown in Figure 23-4.|Правила классов A, B и C определяют длину сетевой части, при этом часть хоста составляет остальную часть 32-битного адреса IPv4, как показано на рисунке 23-4.
|
Figure 23-4 Classful View of Unsubnetted IPv4 Networks To subnet an IPv4 Class A, B, or C network, the network engineer for the enterprise makes some choices.|Рис. 23-4. Классовое представление сетей IPv4 без подсетей Чтобы подсеть для сети IPv4 класса A, B или C, сетевой инженер предприятия делает несколько вариантов.
Conceptually, the engineer creates a three-part view of the addresses, adding a subnet field in the center while shortening the host field. (Many people call this “borrowing host bits.”) The size of the network part stays locked per the Class A, B, and C rules, with the line between the subnet and host part being flexible, based on the choice of subnet mask.|По сути, инженер создает трехчастное представление адресов, добавляя поле подсети в центре и сокращая поле хоста. (Многие люди называют это «заимствованием битов хоста».) Размер сетевой части остается заблокированным в соответствии с правилами классов A, B и C, при этом линия между подсетью и частью хоста является гибкой в ​​зависимости от выбора маски подсети. .
Figure 23-5 shows the idea for a subnetted Class B network.|На рис. 23-5 показана идея сети класса B с подсетями.
|
Figure 23-5 Classful View of Subnetted IPv4 Networks IPv6 uses a similar concept, with the details in Figure 23-6.|Рисунок 23-5. Классовое представление сетей IPv4 с подсетями IPv6 использует аналогичную концепцию, детали которой показаны на рисунке 23-6.
The structure shows three major parts, beginning with the global routing prefix, which is the initial value that must be the same in all IPv6 addresses inside the enterprise.|В структуре показаны три основные части, начиная с префикса глобальной маршрутизации, который является начальным значением, которое должно быть одинаковым для всех адресов IPv6 внутри предприятия.
The address ends with the interface ID, which acts like the IPv4 host field.|Адрес заканчивается идентификатором интерфейса, который действует как поле хоста IPv4.
The subnet field sits between the two other fields, used as a way to number and identify subnets, much like the subnet field in IPv4 addresses.|Поле подсети находится между двумя другими полями и используется как способ нумерации и идентификации подсетей, во многом подобно полю подсети в адресах IPv4.
|
Figure 23-6 Structure of Subnetted IPv6 Global Unicast Addresses First, just think about the general idea with IPv6, comparing Figure 23-6 to Figure 23-5.|Рис. 23-6. Структура глобальных одноадресных IPv6-адресов с подсетями Во-первых, просто подумайте об общей идее IPv6, сравнив Рис. 23-6 с Рис. 23-5.
The IPv6 global routing prefix (the prefix/length assigned by the RIR or ISP) acts like the IPv4 network part of the address structure.|Префикс глобальной маршрутизации IPv6 (префикс / длина, назначаемые RIR или ISP) действует как сетевая часть структуры адреса IPv4.
The IPv6 subnet part acts like the IPv4 subnet part.|Часть подсети IPv6 действует как часть подсети IPv4.
|
And the right side of the IPv6, formally called the interface ID (short for interface identifier), acts like the IPv4 host field.|А правая сторона IPv6, формально называемая идентификатором интерфейса (сокращенно от идентификатора интерфейса), действует как поле хоста IPv4.
|
Now focus on the IPv6 global routing prefix and its prefix length.|Теперь сосредоточимся на префиксе глобальной маршрутизации IPv6 и его длине.
Unlike IPv4, IPv6 has no concept of address classes, so no preset rules determine the prefix length of the global routing prefix.|В отличие от IPv4, IPv6 не имеет понятия классов адресов, поэтому никакие предустановленные правила не определяют длину префикса префикса глобальной маршрутизации.
However, when a company applies to an ISP, RIR, or any other organization that can assign a global routing prefix, that assignment includes both the prefix and the prefix length.|Однако, когда компания обращается к Интернет-провайдеру, RIR или любой другой организации, которая может назначить префикс глобальной маршрутизации, это назначение включает как префикс, так и длину префикса.
After a company receives a global routing prefix and that prefix length, the length of the prefix typically does not change over time and is basically locked. (Note that the prefix length of the global routing prefix is often between /32 and /48, or possibly as long as /56.)|После того, как компания получает префикс глобальной маршрутизации и эту длину префикса, длина префикса обычно не меняется со временем и в основном блокируется. (Обратите внимание, что длина префикса префикса глобальной маршрутизации часто составляет от / 32 до / 48 или, возможно, до / 56.)
|
Next, look to the right side of Figure 23-6 to the interface ID field.|Затем посмотрите на правую часть рисунка 23-6, в поле идентификатора интерфейса.
For several reasons that become more obvious the more you learn about IPv6, this field is often 64 bits long.|По нескольким причинам, которые становятся более очевидными, чем больше вы узнаете об IPv6, это поле часто имеет длину 64 бита.
Does it have to be 64 bits long?|Должен ли он быть длиной 64 бита?
No. However, using a 64-bit interface ID field works well in real networks, and there are no reasons to avoid using a 64-bit interface ID field.|Нет. Однако использование 64-битного поля идентификатора интерфейса хорошо работает в реальных сетях, и нет причин избегать использования 64-битного поля идентификатора интерфейса.
|
Finally, look to the subnet field in the center of Figure 23-6.|Наконец, посмотрите на поле подсети в центре рисунка 23-6.
Similar to IPv4, this field creates a place with which to number IPv6 subnets.|Подобно IPv4, это поле создает место для нумерации подсетей IPv6.
The length of the subnet field is based on the other two facts: the length of the global routing prefix and the length of the interface ID. And with the commonly used 64-bit interface ID field, the subnet field is typically 64–P bits, with P being the length of the global routing prefix.|Длина поля подсети основана на двух других фактах: длине префикса глобальной маршрутизации и длине идентификатора интерфейса. А с обычно используемым 64-битным полем идентификатора интерфейса, поле подсети обычно состоит из 64 – P битов, где P - длина префикса глобальной маршрутизации.
|
Next, consider the structure of a specific global unicast IPv6 address, 2001:0DB8:1111:0001:0000:0000:0000:0001, as seen in Figure 23-7.|Затем рассмотрим структуру конкретного глобального одноадресного IPv6-адреса 2001: 0DB8: 1111: 0001: 0000: 0000: 0000: 0001, как показано на рисунке 23-7.
In this case:|В этом случае:
###### The company was assigned prefix 2001:0DB8:1111, with prefix length /48.
Компании присвоен префикс 2001: 0DB8: 1111 с длиной префикса / 48.   
###### The company uses the usual 64-bit interface ID.
Компания использует обычный 64-битный интерфейсный ID.   
###### The company has a subnet field of 16 bits, allowing for 216 IPv6 subnets.
Компания имеет поле подсети из 16 бит, что позволяет использовать 216 подсетей IPv6.   
__|__
--|--
|
Figure 23-7 Address Structure for Company 1 Example The example in Figure 23-7, along with a little math, shows one reason why so many companies use a /64 prefix length for all subnets.|Рис. 23-7. Пример структуры адреса для компании 1. Пример на рис. 23-7, вместе с небольшой математикой, показывает одну причину, по которой так много компаний используют длину префикса / 64 для всех подсетей.
With this structure, Company 1 can support 216 possible subnets (65,536).|С такой структурой Компания 1 может поддерживать 216 возможных подсетей (65 536).
Few companies need that many subnets.|Немногим компаниям нужно такое количество подсетей.
Then, each subnet supports over 1018 addresses per subnet (264, minus some reserved values).|Затем каждая подсеть поддерживает более 1018 адресов в каждой подсети (264 минус некоторые зарезервированные значения).
So, for both subnets and hosts, the address structure supports far more than are needed.|Таким образом, как для подсетей, так и для хостов структура адресов поддерживает гораздо больше, чем необходимо.
Plus, the /64 prefix length for all subnets makes the math simple because it cuts the 128-bit IPv6 address in half.|Кроме того, длина префикса / 64 для всех подсетей упрощает математические вычисления, поскольку он вдвое сокращает 128-битный адрес IPv6.
##### Listing the IPv6 Subnet Identifier
Вывод идентификатора подсети IPv6   
__|__
--|--
|
Like with IPv4, IPv6 needs to identify each IPv6 subnet with some kind of a subnet identifier, or subnet ID. Figure 23-7 lists the informal names for this number (subnet ID) and the more formal name (prefix ID). Routers then list the IPv6 subnet ID in routing tables, along with the prefix length.|Как и в случае с IPv4, IPv6 должен идентифицировать каждую подсеть IPv6 с помощью какого-либо идентификатора подсети или идентификатора подсети. На рис. 23-7 перечислены неофициальные имена для этого номера (идентификатор подсети) и более формальное имя (идентификатор префикса). Затем маршрутизаторы перечисляют идентификатор подсети IPv6 в таблицах маршрутизации вместе с длиной префикса.
|
Chapter 22, “Fundamentals of IP Version 6,” already discussed how to find the subnet ID, given an IPv6 address and prefix length.|В главе 22 «Основы IP версии 6» уже обсуждалось, как найти идентификатор подсети с учетом адреса IPv6 и длины префикса.
The math works the same way when working with global unicast addresses, as well as the unique local addresses discussed later in the chapter.|Математика работает таким же образом при работе с глобальными адресами одноадресной рассылки, а также с уникальными локальными адресами, обсуждаемыми далее в этой главе.
|
Chapter 28, “Securing Wireless Networks,” has already discussed the math, but for completeness, note that the subnet ID shown in Figure 23-7 would be 2001:DB8:1111:1::/64|В главе 28 «Защита беспроводных сетей» математика уже обсуждалась, но для полноты картины обратите внимание, что идентификатор подсети, показанный на рис. 23-7, будет 2001: DB8: 1111: 1 :: / 64.
##### List All IPv6 Subnets
Список всех подсетей IPv6   
__|__
--|--
|
With IPv4, if you choose to use a single subnet mask for all subnets, you can sit and write down all the subnets of a Class A, B, or C network using that one subnet mask.|С IPv4, если вы решите использовать одну маску подсети для всех подсетей, вы можете сесть и записать все подсети сети класса A, B или C, используя эту маску подсети.
With IPv6, the same ideas apply.|С IPv6 применимы те же идеи.
If you plan to use a single prefix length for all subnets, you can start with the global routing prefix and write down all the IPv6 subnet IDs as well.|Если вы планируете использовать одну длину префикса для всех подсетей, вы можете начать с префикса глобальной маршрутизации и также записать все идентификаторы подсети IPv6.
|
To find all the subnet IDs, you simply need to find all the unique values that will fit inside the subnet part of the IPv6 address, basically following these rules:|Чтобы найти все идентификаторы подсети, вам просто нужно найти все уникальные значения, которые будут соответствовать части подсети IPv6-адреса, в основном следуя этим правилам:
###### All subnet IDs begin with the global routing prefix.
Все идентификаторы подсети начинаются с префикса глобальной маршрутизации.   
###### Use a different value in the subnet field to identify each different subnet.
Используйте разные значения в поле подсети для идентификации каждой отдельной подсети.   
###### All subnet IDs have all 0s in the interface ID.
Все идентификаторы подсети содержат все нули в идентификаторе интерфейса.   
__|__
--|--
|
As an example, take the IPv6 design shown in Figure 23-7, and think about all the subnet IDs. First, all subnets will use the commonly used /64 prefix length.|В качестве примера возьмите схему IPv6, показанную на рис. 23-7, и подумайте обо всех идентификаторах подсети. Во-первых, все подсети будут использовать обычно используемую длину префикса / 64.
This company uses a global routing prefix of 2001:0DB8:1111::/48, which defines the first 12 hex digits of all the subnet IDs. To find all the possible IPv6 subnet IDs, think of all the combinations of unique values in the fourth quartet and then represent the last four quartets of all 0s with a :: symbol.|Эта компания использует префикс глобальной маршрутизации 2001: 0DB8: 1111 :: / 48, который определяет первые 12 шестнадцатеричных цифр всех идентификаторов подсети. Чтобы найти все возможные идентификаторы подсети IPv6, подумайте обо всех комбинациях уникальных значений в четвертом квартете, а затем представьте последние четыре квартета из всех нулей символом ::.
|
Figure 23-8 shows the beginning of just such a list.|На рис. 23-8 показано начало именно такого списка.
|
Figure 23-8 First 16 Possible Subnets with a 16-bit Subnet Field in This Example The example allows for 65,536 subnets, so clearly the example will not list all the possible subnets.|Рис. 23-8. Первые 16 возможных подсетей с 16-битным полем подсети в этом примере. Пример позволяет использовать 65 536 подсетей, поэтому очевидно, что в примере не будут перечислены все возможные подсети.
However, in that fourth quartet, all combinations of hex values would be allowed.|Однако в этом четвертом квартете все комбинации шестнадцатеричных значений будут разрешены.
|
NOTE The IPv6 subnet ID, more formally called the subnet router anycast address, is reserved and should not be used as an IPv6 address for any host.|ПРИМЕЧАНИЕ. Идентификатор подсети IPv6, более формально называемый произвольным адресом маршрутизатора подсети, зарезервирован и не должен использоваться в качестве адреса IPv6 для какого-либо узла.
##### Assign Subnets to the Internetwork Topology
Назначьте подсети топологии межсетевого взаимодействия   
__|__
--|--
|
After an engineer lists all the possible subnet IDs (based on the subnet design), the next step is to choose which subnet ID to use for each link that needs an IPv6 subnet.|После того, как инженер перечислит все возможные идентификаторы подсети (на основе структуры подсети), следующим шагом будет выбор идентификатора подсети, который будет использоваться для каждой ссылки, для которой требуется подсеть IPv6.
Just like with IPv4, each VLAN, each serial link, each Ethernet WAN link, and many other data-link instances need an IPv6 subnet.|Как и в случае с IPv4, каждой VLAN, каждому последовательному каналу, каждому каналу Ethernet WAN и многим другим экземплярам каналов передачи данных требуется подсеть IPv6.
|
Figure 23-9 shows an example using Company 1 again.|На рис. 23-9 снова показан пример использования компании 1.
The figure uses the four subnets from Figure 23-8 that have check marks beside them.|На рисунке используются четыре подсети с рисунка 23-8, рядом с которыми есть галочки.
The check marks are just a reminder to not use those four subnets in other locations.|Флажки служат лишь напоминанием о том, что эти четыре подсети нельзя использовать в других местах.
|
Figure 23-9 Subnets in Company 1, with Global Routing Prefix of 2001:0DB8:1111::/48|Рисунок 23-9 Подсети в компании 1 с префиксом глобальной маршрутизации 2001: 0DB8: 1111 :: / 48
#### Assigning Addresses to Hosts in a Subnet
Назначение адресов хостам в подсети   
__|__
--|--
|
Now that the engineer has planned which IPv6 subnet will be used in each location, the individual IPv6 addressing can be planned and implemented.|Теперь, когда инженер спланировал, какая подсеть IPv6 будет использоваться в каждом месте, можно запланировать и реализовать индивидуальную адресацию IPv6.
Each address must be unique, in that no other host interface uses the same IPv6 address.|Каждый адрес должен быть уникальным, поскольку ни один другой интерфейс хоста не использует тот же адрес IPv6.
Also, the hosts cannot use the subnet ID itself.|Кроме того, хосты не могут использовать сам идентификатор подсети.
|
The process of assigning IPv6 addresses to interfaces works similarly to IPv4.|Процесс присвоения IPv6-адресов интерфейсам аналогичен IPv4.
Addresses can be configured statically, along with the prefix length, default router, and Domain Name System (DNS) IPv6 addresses.|Адреса могут быть настроены статически вместе с длиной префикса, маршрутизатором по умолчанию и IPv6-адресами системы доменных имен (DNS).
Alternatively, hosts can learn these same settings dynamically, using either Dynamic Host Configuration Protocol (DHCP) or a built-in IPv6 mechanism called Stateless Address Autoconfiguration (SLAAC).|В качестве альтернативы хосты могут изучать эти же параметры динамически, используя протокол динамической конфигурации хоста (DHCP) или встроенный механизм IPv6, называемый автоконфигурацией адреса без сохранения состояния (SLAAC).
|
For example, Figure 23-10 shows some static IP addresses that could be chosen for the router interfaces based on the subnet choices shown in Figure 23-9.|Например, на рис. 23-10 показаны некоторые статические IP-адреса, которые можно выбрать для интерфейсов маршрутизатора на основе выбора подсети, показанного на рис. 23-9.
In each case, the router interfaces use an interface ID that is a relatively low number, easily remembered.|В каждом случае интерфейсы маршрутизатора используют идентификатор интерфейса, который является относительно небольшим числом, которое легко запомнить.
|
Figure 23-10 Example Static IPv6 Addresses Based on the Subnet Design of Figure 23-9 This chapter puts off the details of how to configure the IPv6 addresses until Chapter 24, “Implementing IPv6 Addressing on Routers.”|Рис. 23-10. Пример статических адресов IPv6 на основе структуры подсети, показанной на рис. 23-9. В этой главе детали настройки адресов IPv6 откладываются до главы 24 «Реализация адресации IPv6 на маршрутизаторах».
### Unique Local Unicast Addresses
Уникальные локальные одноадресные адреса   
__|__
--|--
|
Unique local unicast addresses act as private IPv6 addresses.|Уникальные локальные одноадресные адреса действуют как частные адреса IPv6.
These addresses have many similarities with global unicast addresses, particularly in how to subnet.|Эти адреса имеют много общего с глобальными одноадресными адресами, особенно в том, как подсеть.
The biggest difference lies in the literal number (unique local addresses begin with hex FD) and with the administrative process: the unique local prefixes are not registered with any numbering authority and can be used by multiple organizations.|Самое большое различие заключается в буквальном номере (уникальные локальные адреса начинаются с шестнадцатеричного FD) и в административном процессе: уникальные локальные префиксы не регистрируются никаким органом нумерации и могут использоваться несколькими организациями.
|
Although the network engineer creates unique local addresses without any registration or assignment process, the addresses still need to follow some rules, as follows:|Хотя сетевой инженер создает уникальные локальные адреса без какой-либо регистрации или процесса назначения, адреса все же должны соответствовать некоторым правилам, а именно:
###### Use FD as the first two hex digits.
Используйте FD в качестве первых двух шестнадцатеричных цифр.   
###### Choose a unique 40-bit global ID.
Выберите уникальный 40-битный глобальный идентификатор.   
###### Append the global ID to FD to create a 48-bit prefix, used as the prefix for all your
Добавьте глобальный идентификатор в FD, чтобы создать 48-битный префикс, используемый в качестве префикса для всех ваших   
__|__
--|--
|
addresses.|адреса.
###### Use the next 16 bits as a subnet field.
Используйте следующие 16 бит в качестве поля подсети.   
###### Note that the structure leaves a convenient 64-bit interface ID field.
Обратите внимание, что структура оставляет удобное 64-битное поле идентификатора интерфейса.   
__|__
--|--
|
Figure 23-11 shows the format of these unique local unicast addresses.|На рисунке 23-11 показан формат этих уникальных локальных одноадресных адресов.
|
Figure 23-11 IPv6 Unique Local Unicast Address Format NOTE Just to be completely exact, IANA actually reserves prefix FC00::/7, and not FD00::/8, for these addresses.|Рисунок 23-11. Формат уникального локального одноадресного адреса IPv6 ПРИМЕЧАНИЕ Чтобы быть точным, IANA фактически резервирует для этих адресов префикс FC00 :: / 7, а не FD00 :: / 8.
FC00::/7 includes all addresses that begin with hex FC and FD. However, an RFC (4193) requires the eighth bit of these addresses to be set to 1, which means that in practice today, the unique local addresses all begin with their first two digits as FD.|FC00 :: / 7 включает все адреса, которые начинаются с шестнадцатеричного числа FC и FD. Однако RFC (4193) требует, чтобы восьмой бит этих адресов был установлен в 1, что означает, что на практике сегодня все уникальные локальные адреса начинаются с их первых двух цифр как FD.
#### Subnetting with Unique Local IPv6 Addresses
Подсети с уникальными локальными адресами IPv6   
__|__
--|--
|
Subnetting using unique local addresses works just like subnetting with global unicast addresses with a 48-bit global routing prefix.|Разделение на подсети с использованием уникальных локальных адресов работает так же, как разделение на подсети с глобальными одноадресными адресами с 48-битным префиксом глобальной маршрутизации.
The only difference is that with global unicasts, you start by asking for a global routing prefix to be assigned to your company, and that global routing prefix might or might not have a /48 prefix length.|Единственное отличие состоит в том, что с глобальными одноадресными рассылками вы начинаете с запроса префикса глобальной маршрутизации, который будет назначен вашей компании, и этот префикс глобальной маршрутизации может иметь длину префикса / 48, а может и не иметь.
With unique local, you create that prefix locally, and the prefix begins with /48, with the first 8 bits set and the next 40 bits randomly chosen.|С помощью unique local вы создаете этот префикс локально, и префикс начинается с / 48, причем первые 8 бит установлены, а следующие 40 бит выбираются случайным образом.
|
The process can be as simple as choosing a 40-bit value as your global ID. These 40 bits require 10 hex digits, so you can even avoid thinking in binary and just make up a unique 10-hex-digit value and add hex FD to the front.|Процесс может быть таким же простым, как выбор 40-битного значения в качестве глобального идентификатора. Эти 40 бит требуют 10 шестнадцатеричных цифр, поэтому вы можете даже не думать в двоичном формате и просто составить уникальное значение из 10 шестнадцатеричных цифр и добавить шестнадцатеричный FD вперед.
For example, imagine you chose a 10-hex-digit value of hex 00 0001 0001, prepend a hex FD, making the entire prefix be FD00:0001:0001::/48, or FD00:1:1::/48 when abbreviated.|Например, представьте, что вы выбрали 10-значное шестнадцатеричное значение 00 0001 0001, добавили шестнадцатеричный FD, сделав весь префикс FD00: 0001: 0001 :: / 48 или FD00: 1: 1 :: / 48, когда сокращенно.
|
To create subnets, just as you did in the earlier examples with a 48-bit global routing prefix, treat the entire fourth quartet as a subnet field, as shown in Figure 23-11.|Чтобы создать подсети, как вы делали в предыдущих примерах с 48-битным префиксом глобальной маршрутизации, обрабатывайте весь четвертый квартет как поле подсети, как показано на рисунке 23-11.
|
Figure 23-12 shows an example subnetting plan using unique local addresses.|На рис. 23-12 показан пример плана разделения на подсети с использованием уникальных локальных адресов.
The example repeats the same topology shown earlier in Figure 23-9; that figure showed subnetting with a global unicast prefix.|В примере повторяется топология, показанная ранее на рис. 23-9; на этом рисунке показано разбиение на подсети с глобальным префиксом одноадресной рассылки.
This example uses the exact same numbers for the fourth quartet’s subnet field, simply replacing the 48-bit global unicast prefix with this new local unique prefix of FD00:1:1.|В этом примере используются те же самые числа для поля подсети четвертого квартета, просто заменяя 48-битный глобальный префикс одноадресной передачи этим новым локальным уникальным префиксом FD00: 1: 1.
|
Figure 23-12 Subnetting Using Unique Local Addresses|Рисунок 23-12 Разделение на подсети с использованием уникальных локальных адресов
#### The Need for Globally Unique Local Addresses
Необходимость глобально уникальных местных адресов   
__|__
--|--
|
The example in Figure 23-12 shows an easy-to-remember prefix of FD00:1:1::/48.|Пример на рис. 23-12 показывает легко запоминающийся префикс FD00: 1: 1 :: / 48.
Clearly, I made up the easy-to-remember global ID in this example.|Ясно, что в этом примере я составил легко запоминающийся глобальный идентификатор.
What global ID would you choose for your company?|Какой глобальный идентификатор вы бы выбрали для своей компании?
Would you pick a number that you could not abbreviate and make it shorter?|Вы бы выбрали номер, который нельзя сокращать, и сделали бы его короче?
If you had to pick the IPv6 prefix for your unique local addresses from the options in the following list, which would you pick for your company?|Если бы вам нужно было выбрать префикс IPv6 для ваших уникальных локальных адресов из вариантов в следующем списке, что бы вы выбрали для своей компании?
###### FDE9:81BE:A059::/48
FDE9: 81BE: A059 :: / 48   
###### FDF0:E1D2:C3B4::/48
FDF0: E1D2: C3B4 :: / 48   
###### FD00:1:1::/48
FD00: 1: 1 :: / 48   
__|__
--|--
|
Given freedom to choose, most people would pick an easy-to-remember, short-to-type prefix, like FD00:1:1::/48.|Имея свободу выбора, большинство людей выбрало бы легко запоминающийся префикс с коротким набором символов, например FD00: 1: 1 :: / 48.
And in a lab or other small network used for testing, making up an easy-to-use number is reasonable.|А в лаборатории или другой небольшой сети, используемой для тестирования, разумно составить простой в использовании номер.
However, for use in real corporate networks, you should not just make up any global ID you like; you should try to follow the unique local address rules that strive to help make your addresses unique in the universe—even without registering a prefix with an ISP or RIR.|Однако для использования в реальных корпоративных сетях не следует просто придумывать какой-либо глобальный идентификатор, который вам нравится; вам следует стараться следовать правилам уникальных локальных адресов, которые стремятся помочь сделать ваши адреса уникальными во вселенной - даже без регистрации префикса у ISP или RIR.
|
RFC 4193 defines unique local addresses, and that RFC stresses the importance of choosing your global ID in a way to make it statistically unlikely to be used by other companies.|RFC 4193 определяет уникальные локальные адреса, и этот RFC подчеркивает важность выбора глобального идентификатора таким образом, чтобы статистически маловероятно его использование другими компаниями.
What is the result of unique global IDs at every company?|Каков результат уникальных глобальных идентификаторов в каждой компании?
Making all these unique local addresses unique across the globe.|Делаем все эти уникальные локальные адреса уникальными во всем мире.
So, if you do plan on using unique local addresses in a real network, plan on using the random number generator logic listed in RFC 4193 to create your prefix.|Итак, если вы планируете использовать уникальные локальные адреса в реальной сети, запланируйте использование логики генератора случайных чисел, перечисленной в RFC 4193, для создания вашего префикса.
|
One of the big reasons to attempt to use a unique prefix, rather than everyone using the same easy-to-remember prefixes, is to be ready for the day that your company merges with or buys another company.|Одна из главных причин попытаться использовать уникальный префикс вместо того, чтобы все использовали одни и те же легкие для запоминания префиксы, - это быть готовым к тому дню, когда ваша компания сливается или покупает другую компанию.
Today, with IPv4, a high percentage of companies use private IPv4 network 10.0.0.0.|Сегодня с IPv4 высокий процент компаний используют частную сеть IPv4 10.0.0.0.
When they merge their networks, the fact that both use network 10.0.0.0 makes the network merger more painful than if the companies had used different private IPv4 networks.|Когда они объединяют свои сети, тот факт, что оба используют сеть 10.0.0.0, делает слияние сетей более болезненным, чем если бы компании использовали разные частные сети IPv4.
With IPv6 unique local addresses, if both companies did the right thing and randomly chose a prefix, they will most likely be using completely different prefixes, making the merger much simpler.|С уникальными локальными адресами IPv6, если обе компании поступили правильно и случайно выбрали префикс, они, скорее всего, будут использовать совершенно разные префиксы, что значительно упростит слияние.
However, companies that take the seemingly easy way out and choose an easy-to-remember prefix like FD00:1:1 greatly increase their risk of requiring extra effort when merging with another company that also chose to use that same prefix.|Однако компании, которые выбирают, казалось бы, простой выход и выбирают легко запоминающийся префикс, такой как FD00: 1: 1, значительно повышают риск необходимости дополнительных усилий при слиянии с другой компанией, которая также решила использовать тот же префикс.
### Chapter Review
Обзор главы   
__|__
--|--
|
One key to doing well on the exams is to perform repetitive spaced review sessions.|Один из ключей к успешной сдаче экзаменов - повторение повторных сессий с интервалом.
Review this chapter’s material using either the tools in the book or interactive tools for the same material found on the book’s companion website.|Просмотрите материал этой главы, используя инструменты из книги или интерактивные инструменты для тех же материалов, которые можно найти на сопутствующем веб-сайте книги.
Refer to the “Your Study Plan” element for more details.|Обратитесь к элементу «Ваш учебный план» для получения более подробной информации.
Table 23-3 outlines the key review elements and where you can find them.|В Таблице 23-3 представлены основные элементы обзора и их местонахождение.
To better track your study progress, record when you completed these activities in the second column.|Чтобы лучше отслеживать свои успехи в учебе, отметьте, когда вы выполнили эти задания, во втором столбце.
|
Table 23-3 Chapter Review Tracking Table end.|Таблица 23-3 Окончание таблицы отслеживания обзора главы.
|
Review All the Key Topics Key Terms You Should Know global unicast address, global routing prefix, unique local address, subnet ID (prefix ID), subnet router anycast address|Ознакомьтесь со всеми ключевыми темами. Ключевые термины, которые вы должны знать: глобальный одноадресный адрес, глобальный префикс маршрутизации, уникальный локальный адрес, идентификатор подсети (идентификатор префикса), произвольный адрес маршрутизатора подсети
## Chapter 24 Implementing IPv6 Addressing on Routers
Глава 24 Реализация адресации IPv6 на маршрутизаторах   
__|__
--|--
|
Routers This chapter covers the following exam topics:|Маршрутизаторы В этой главе рассматриваются следующие экзаменационные темы:
###### 1.0 Network Fundamentals
1.0 Основы сети   
###### 1.9 Compare and contrast IPv6 address types
1.9 Сравните и сопоставьте типы адресов IPv6   
###### 1.9.a Global unicast
1.9.a Глобальная одноадресная передача   
###### 1.9.b Unique local
1.9.b Уникальный местный   
###### 1.9.c Link local
1.9.c Локальная ссылка   
###### 1.9.d Anycast
1.9.d Anycast   
###### 1.9.e Multicast
1.9.e Multicast   
###### 1.9.f Modified EUI 64
1.9.f Модифицированный EUI 64   
__|__
--|--
|
With IPv4 addressing, some devices, like servers and routers, typically use static predefined IPv4 addresses.|При адресации IPv4 некоторые устройства, такие как серверы и маршрутизаторы, обычно используют статические предопределенные адреса IPv4.
End-user devices do not mind if their address changes from time to time, and they typically learn an IPv4 address dynamically using DHCP. IPv6 uses the same approach, with servers, routers, and other devices in the control of the IT group often using predefined IPv6 addresses, and with end-user devices using dynamically learned IPv6 addresses.|Устройства конечных пользователей не возражают, если их адрес время от времени меняется, и обычно они изучают IPv4-адрес динамически с помощью DHCP. IPv6 использует тот же подход: серверы, маршрутизаторы и другие устройства, находящиеся под контролем ИТ-группы, часто используют заранее определенные адреса IPv6, а устройства конечных пользователей используют динамически изученные адреса IPv6.
|
This chapter focuses on IPv6 address configuration on routers.|В этой главе основное внимание уделяется настройке адреса IPv6 на маршрутизаторах.
The chapter begins with the more obvious IPv6 addressing configuration, with features that mirror IPv4 features, showing how to configure interfaces with IPv6 addresses and view that configuration with show commands.|Глава начинается с более очевидной конфигурации адресации IPv6 с функциями, которые отражают функции IPv4, показывая, как настраивать интерфейсы с адресами IPv6 и просматривать эту конфигурацию с помощью команд show.
The second half of the chapter introduces new IPv6 addressing concepts, showing some other addresses used by routers when doing different tasks.|Во второй половине главы представлены новые концепции адресации IPv6, показаны некоторые другие адреса, используемые маршрутизаторами при выполнении различных задач.
### “Do I Know This Already?” Quiz
«Знаю ли я это уже?» Викторина   
__|__
--|--
|
Take the quiz (either here or use the PTP software) if you want to use the score to help you decide how much time to spend on this chapter.|Пройдите тест (здесь или воспользуйтесь программой PTP), если вы хотите использовать оценку, чтобы решить, сколько времени потратить на эту главу.
The letter answers are listed at the bottom of the page following the quiz.|Ответы на письма перечислены внизу страницы после викторины.
Appendix C, found both at the end of the book as well as on the companion website, includes both the answers and explanations.|Приложение C, которое можно найти как в конце книги, так и на сопутствующем веб-сайте, включает как ответы, так и пояснения.
You can also find both answers and explanations in the PTP testing software.|Вы также можете найти ответы и пояснения в программе тестирования PTP.
|
Table 24-1 “Do I Know This Already?” Foundation Topics Section-to-Question Mapping|Таблица 24-1 «Знаю ли я это уже?» Сопоставление разделов с вопросами по основным темам
### Foundation Topics
Основные темы   
### Implementing Unicast IPv6 Addresses on Routers
Внедрение одноадресных IPv6-адресов на маршрутизаторах   
__|__
--|--
|
Special Addresses Used by Routers 4–5 CHAPTER 24 1.|Специальные адреса, используемые маршрутизаторами 4–5 ГЛАВА 24 1.
Router R1 has an interface named Gigabit Ethernet 0/1, whose MAC address has been set to 0200.0001.000A.|Маршрутизатор R1 имеет интерфейс с именем Gigabit Ethernet 0/1, MAC-адрес которого установлен на 0200.0001.000A.
Which of the following commands, added in R1’s Gigabit Ethernet 0/1 configuration mode, gives this router’s G0/1 interface a unicast IPv6 address of 2001:1:1:1:1:200:1:A, with a /64 prefix length?|Какая из следующих команд, добавленных в режиме конфигурации R1 Gigabit Ethernet 0/1, дает интерфейсу G0 / 1 этого маршрутизатора одноадресный IPv6-адрес 2001: 1: 1: 1: 1: 200: 1: A с префиксом / 64? длина?
|
a. ipv6 address 2001:1:1:1:1:200:1:A/64 b. ipv6 address 2001:1:1:1:1:200:1:A/64 eui-64 c. ipv6 address 2001:1:1:1:1:200:1:A /64 eui-64 d. ipv6 address 2001:1:1:1:1:200:1:A /64 e.|а. адрес ipv6 2001: 1: 1: 1: 1: 200: 1: A / 64 b. адрес ipv6 2001: 1: 1: 1: 1: 200: 1: A / 64 eui-64 c. IPv6 адрес 2001: 1: 1: 1: 1: 200: 1: A / 64 eui-64 d. IPv6-адрес 2001: 1: 1: 1: 1: 200: 1: A / 64 e.
None of the other answers are correct.|Все остальные ответы неверны.
|
2. Router R1 has an interface named Gigabit Ethernet 0/1, whose MAC address has been set to 5055.4444.3333.|2. Маршрутизатор R1 имеет интерфейс с именем Gigabit Ethernet 0/1, MAC-адрес которого установлен на 5055.4444.3333.
This interface has been configured with the ipv6 address 2000:1:1:1::/64 eui-64 subcommand.|Этот интерфейс был настроен с использованием подкоманды ipv6 address 2000: 1: 1: 1 :: / 64 eui-64.
What unicast address will this interface use?|Какой одноадресный адрес будет использовать этот интерфейс?
|
a. 2000:1:1:1:52FF:FE55:4444:3333 b. 2000:1:1:1:5255:44FF:FE44:3333 c. 2000:1:1:1:5255:4444:33FF:FE33 d. 2000:1:1:1:200:FF:FE00:0 3.|а. 2000: 1: 1: 1: 52FF: FE55: 4444: 3333 б. 2000: 1: 1: 1: 5255: 44FF: FE44: 3333 с. 2000: 1: 1: 1: 5255: 4444: 33FF: FE33 г. 2000: 1: 1: 1: 200: FF: FE00: 0 3.
Router R1 currently supports IPv4, routing packets in and out all its interfaces.|Маршрутизатор R1 в настоящее время поддерживает IPv4, маршрутизируя пакеты на всех своих интерфейсах и исходящих из них.
R1’s configuration needs to be migrated to support dual-stack operation, routing both IPv4 and IPv6.|Конфигурацию маршрутизатора R1 необходимо перенастроить для поддержки работы с двумя стеками с маршрутизацией как IPv4, так и IPv6.
Which of the following tasks must be performed before the router can also support routing IPv6 packets? (Choose two answers.)|Какие из следующих задач необходимо выполнить, прежде чем маршрутизатор сможет поддерживать маршрутизацию пакетов IPv6? (Выберите два ответа.)
|
a. Enable IPv6 on each interface using an ipv6 address interface subcommand.|а. Включите IPv6 на каждом интерфейсе с помощью подкоманды интерфейса адреса ipv6.
|
b. Enable support for both versions with the ip versions 4 6 global command.|б. Включите поддержку обеих версий с помощью глобальной команды ip versions 4 6.
|
c. Additionally enable IPv6 routing using the ipv6 unicast-routing global command.|c. Дополнительно включите маршрутизацию IPv6 с помощью глобальной команды ipv6 unicast-routing.
|
d. Migrate to dual-stack routing using the ip routing dual-stack global command.|d. Перейдите на маршрутизацию с двумя стеками с помощью глобальной команды ip routing dual-stack.
|
4. Router R1 has an interface named Gigabit Ethernet 0/1, whose MAC address has been set to 0200.0001.000A.|4. Маршрутизатор R1 имеет интерфейс с именем Gigabit Ethernet 0/1, MAC-адрес которого установлен на 0200.0001.000A.
The interface is then configured with the ipv6 address 2001:1:1:1:200:FF:FE01:B/64 interface subcommand; no other ipv6 address commands are configured on the interface.|Затем интерфейс настраивается с использованием подкоманды интерфейса IPv6 2001: 1: 1: 1: 200: FF: FE01: B / 64; на интерфейсе не настроены никакие другие адресные команды ipv6.
Which of the following answers lists the linklocal address used on the interface?|В каком из следующих ответов указан локальный адрес ссылки, используемый в интерфейсе?
|
a. FE80::FF:FE01:A b.|а. FE80 :: FF: FE01: А б.
FE80::FF:FE01:B c.|FE80 :: FF: FE01: B c.
FE80::200:FF:FE01:A d.|FE80 :: 200: FF: FE01: А д.
FE80::200:FF:FE01:B 5.|FE80 :: 200: FF: FE01: B 5.
Which of the following multicast addresses is defined as the address for sending packets to only the IPv6 routers on the local link?|Какой из следующих многоадресных адресов определяется как адрес для отправки пакетов только маршрутизаторам IPv6 на локальном канале?
|
a. FF02::1 b.|а. FF02 :: 1 б.
FF02::2 c.|FF02 :: 2 гр.
FF02::5 d.|FF02 :: 5 дн.
FF02::A Foundation Topics Implementing Unicast IPv6 Addresses on Routers Every company bases its enterprise network on one or more protocol models, or protocol stacks.|FF02 :: A Foundation Темы Внедрение одноадресных IPv6-адресов на маршрутизаторах Каждая компания строит свою корпоративную сеть на одной или нескольких моделях протоколов или стеках протоколов.
In the earlier days of networking, enterprise networks used one or more protocol stacks from different vendors, as shown on the left of Figure 24-1.|На заре создания сетей в корпоративных сетях использовались один или несколько стеков протоколов от разных поставщиков, как показано на рис. 24-1 слева.
Over time, companies added TCP/IP (based on IPv4) to the mix.|Со временем компании добавили к этому протокол TCP / IP (на основе IPv4).
Eventually, companies migrated fully to TCP/IP as the only protocol stack in use.|В конце концов, компании полностью перешли на TCP / IP как единственный используемый стек протоколов.
|
Figure 24-1 Migration of Enterprise Networks to Use TCP/IP Stack Only, IPv4 The emergence of IPv6 requires that IPv6 be implemented in end-user hosts, servers, routers, and other devices.|Рис. 24-1. Миграция корпоративных сетей для использования только стека TCP / IP, IPv4. Появление IPv6 требует, чтобы IPv6 был реализован на хостах конечных пользователей, серверах, маршрутизаторах и других устройствах.
However, corporations cannot just migrate all devices from IPv4 to IPv6 over one weekend.|Однако корпорации не могут просто перевести все устройства с IPv4 на IPv6 за один уик-энд.
Instead, what will likely occur is some kind of long-term migration and coexistence, in which for a large number of years, most corporate networks again use multiple protocol stacks—one based on IPv4 and one based on IPv6.|Вместо этого, скорее всего, произойдет некая долгосрочная миграция и сосуществование, при которой в течение многих лет большинство корпоративных сетей снова используют несколько стеков протоколов - один на основе IPv4, а другой на основе IPv6.
|
Eventually, over time, we might all see the day when enterprise networks run only IPv6, without any IPv4 remaining, but that day might take awhile.|В конце концов, со временем мы все можем увидеть день, когда в корпоративных сетях будет работать только IPv6, без остатка IPv4, но этот день может занять некоторое время.
Figure 24-2 shows the progression, just to make the point, but who knows how long it will take?|Рисунок 24-2 показывает прогрессию, просто чтобы пояснить суть дела, но кто знает, сколько времени это займет?
|
One way to add IPv6 support to an established IPv4-based enterprise internetwork is to implement a dual-stack strategy.|Один из способов добавить поддержку IPv6 к существующей корпоративной межсетевой сети на основе IPv4 - реализовать стратегию двойного стека.
To do so, the routers can be configured to route IPv6 packets, with IPv6 addresses on their interfaces, with a similar model to how routers support IPv4.|Для этого маршрутизаторы могут быть настроены для маршрутизации пакетов IPv6 с IPv6-адресами на своих интерфейсах по модели, аналогичной тому, как маршрутизаторы поддерживают IPv4.
Then hosts can implement IPv6 when ready, running both IPv4 and IPv6 (dual stacks).|Затем хосты могут реализовать IPv6, когда будут готовы, используя как IPv4, так и IPv6 (двойные стеки).
|
The first major section of this chapter shows how to configure and verify unicast IPv6 addresses on routers.|В первом основном разделе этой главы показано, как настроить и проверить одноадресные IPv6-адреса на маршрутизаторах.
|
Figure 24-2 Possible Path Through Dual-Stack (IPv4 and IPv6) over a Long Period|Рисунок 24-2 Возможный путь через двойной стек (IPv4 и IPv6) в течение длительного периода
#### Static Unicast Address Configuration
Конфигурация статического одноадресного адреса   
__|__
--|--
|
Cisco routers give us two options for static configuration of IPv6 addresses.|Маршрутизаторы Cisco предоставляют нам два варианта статической конфигурации адресов IPv6.
In one case, you configure the full 128-bit address, while in the other, you configure a 64-bit prefix and let the router derive the second half of the address (the interface ID). The next few pages show how to configure both options and how the router chooses the second half of the IPv6 address.|В одном случае вы настраиваете полный 128-битный адрес, а в другом вы настраиваете 64-битный префикс и позволяете маршрутизатору получать вторую половину адреса (идентификатор интерфейса). На следующих нескольких страницах показано, как настроить оба параметра и как маршрутизатор выбирает вторую половину IPv6-адреса.
##### Configuring the Full 128-Bit Address
Настройка полного 128-битного адреса   
__|__
--|--
|
To statically configure the full 128-bit unicast address—either global unicast or unique local—the router needs an ipv6 address address/prefix-length interface subcommand on each interface.|Для статической настройки полного 128-битного одноадресного адреса - глобального одноадресного или уникального локального - маршрутизатору требуется подкоманда интерфейса ipv6 address / prefix-length для каждого интерфейса.
The address can be an abbreviated IPv6 address or the full 32-digit hex address.|Адрес может быть сокращенным IPv6-адресом или полным 32-значным шестнадцатеричным адресом.
The command includes the prefix length value, at the end, with no space between the address and prefix length.|Команда включает значение длины префикса в конце без пробелов между адресом и длиной префикса.
|
The configuration of the router interface IPv6 address really is that simple.|Настройка IPv6-адреса интерфейса маршрутизатора действительно очень проста.
Figure 24-3, along with Examples 24-1 and 24-2, shows a basic example.|На рисунке 24-3 вместе с примерами 24-1 и 24-2 показан базовый пример.
The figure shows the global unicast IPv6 address used by two different routers, on two interfaces each.|На рисунке показан глобальный одноадресный IPv6-адрес, используемый двумя разными маршрутизаторами, на двух интерфейсах каждый.
As usual, all subnets use a /64 prefix length.|Как обычно, все подсети используют длину префикса / 64.
|
Figure 24-3 Sample 128-bit IPv6 Addresses to Be Configured on Cisco Router Interfaces Example 24-1 Configuring Static IPv6 Addresses on R1 Example end.|Рисунок 24-3. Пример 128-битных адресов IPv6 для настройки на интерфейсах маршрутизатора Cisco. Пример 24-1. Настройка статических адресов IPv6 на R1. Пример.
|
Example 24-2 Configuring Static IPv6 Addresses on R2 Example end.|Пример 24-2. Настройка статических адресов IPv6 на конце примера R2.
|
NOTE The configuration on R1 in Example 24-1 uses both abbreviated and unabbreviated addresses, and both lowercase and uppercase hex digits, showing that all are allowed.|ПРИМЕЧАНИЕ. Конфигурация R1 в примере 24-1 использует как сокращенные, так и несокращенные адреса, а также шестнадцатеричные цифры в нижнем и верхнем регистре, показывая, что все разрешены.
Router show commands list the abbreviated value with uppercase hex digits.|Команды Router show перечисляют сокращенное значение с прописными шестнадцатеричными цифрами.
##### Enabling IPv6 Routing
Включение маршрутизации IPv6   
__|__
--|--
|
While the configurations shown in Examples 24-1 and 24-2 focus on the IPv6 address configuration, they also include an important but often overlooked step when configuring IPv6 on Cisco routers: IPv6 routing needs to be enabled.|Хотя конфигурации, показанные в примерах 24-1 и 24-2, ориентированы на конфигурацию адреса IPv6, они также включают важный, но часто упускаемый из виду шаг при настройке IPv6 на маршрутизаторах Cisco: необходимо включить маршрутизацию IPv6.
On Cisco routers, IPv4 routing is enabled by default, but IPv6 routing is not enabled by default.|На маршрутизаторах Cisco маршрутизация IPv4 включена по умолчанию, но маршрутизация IPv6 не включена по умолчанию.
The solution takes only a single command—ipv6 unicast-routing—which enables IPv6 routing on the router.|Решение использует только одну команду - ipv6 unicast-routing - которая включает маршрутизацию IPv6 на маршрутизаторе.
|
A router must enable IPv6 globally (ipv6 unicast-routing) and enable IPv6 on the interface (ipv6 address) before the router will attempt to route IPv6 packets in and out an interface.|Маршрутизатор должен включить IPv6 глобально (одноадресная маршрутизация ipv6) и включить IPv6 на интерфейсе (адрес ipv6), прежде чем маршрутизатор попытается маршрутизировать пакеты IPv6 в интерфейс и из него.
|
If you omit the ipv6 unicast-routing command but configure interface IPv6 addresses, the router will not route any received IPv6 packets, but the router will act as an IPv6 host.|Если вы опустите команду ipv6 unicast-routing, но настроите IPv6-адреса интерфейса, маршрутизатор не будет маршрутизировать никакие полученные пакеты IPv6, но он будет действовать как хост IPv6.
If you include the ipv6 unicast-routing command but omit all the interface IPv6 addresses, the router will be ready to route IPv6 packets but have no interfaces that have IPv6 enabled, effectively disabling IPv6 routing.|Если вы включите команду ipv6 unicast-routing, но опустите все IPv6-адреса интерфейсов, маршрутизатор будет готов маршрутизировать пакеты IPv6, но не будет иметь интерфейсов с включенным IPv6, что фактически отключит маршрутизацию IPv6.
##### Verifying the IPv6 Address Configuration
Проверка конфигурации IPv6-адреса   
__|__
--|--
|
IPv6 uses many show commands that mimic the syntax of IPv4 show commands.|IPv6 использует множество команд show, имитирующих синтаксис команд show IPv4.
For example:|Например:
###### The show ipv6 interface brief command gives you interface IPv6 address info, but not
Краткая команда show ipv6 interface предоставляет информацию об адресе интерфейса IPv6, но не   
__|__
--|--
|
prefix length info, similar to the IPv4 show ip interface brief command.|информация о длине префикса, аналогичная команде IPv4 show ip interfacerief.
###### The show ipv6 interface command gives the details of IPv6 interface settings, much like
Команда show ipv6 interface предоставляет подробную информацию о настройках интерфейса IPv6, как и   
__|__
--|--
|
the show ip interface command does for IPv4.|команда show ip interface работает с IPv4.
|
The one notable difference in the most common commands is that the show interfaces command still lists the IPv4 address and mask but tells us nothing about IPv6.|Единственное заметное отличие наиболее распространенных команд заключается в том, что команда show interfaces по-прежнему отображает адрес и маску IPv4, но ничего не сообщает нам об IPv6.
So, to see IPv6 interface addresses, use commands that begin with show ipv6.|Итак, чтобы увидеть адреса интерфейса IPv6, используйте команды, которые начинаются с show ipv6.
Example 24-3 lists a few samples from Router R1, with the explanations following.|В примере 24-3 перечислены несколько примеров с маршрутизатора R1 с пояснениями ниже.
|
Example 24-3 Verifying Static IPv6 Addresses on Router R1 Example end.|Пример 24-3. Проверка статических адресов IPv6 на маршрутизаторе R1. Пример окончен.
|
First, focus on the output of the two show ipv6 interface commands at the top of the example, which lists interface G0/0, showing output about that interface only.|Во-первых, сфокусируйтесь на выводе двух команд show ipv6 interface в верхней части примера, в котором перечислены интерфейсы G0 / 0, показывающие вывод только для этого интерфейса.
Note that the output lists the configured IPv6 address and prefix length, as well as the IPv6 subnet (2001:DB8:1111:1::/64), which the router calculated based on the IPv6 address.|Обратите внимание, что в выходных данных перечислены настроенный адрес IPv6 и длина префикса, а также подсеть IPv6 (2001: DB8: 1111: 1 :: / 64), которую маршрутизатор рассчитал на основе адреса IPv6.
|
The end of the example lists the output of the show ipv6 interface brief command.|В конце примера перечислены выходные данные краткой команды show ipv6 interface.
Similar to the IPv4-focused show ip interface brief command, this command lists IPv6 addresses, but not the prefix length or prefixes.|Подобно команде show ip interfacerief, ориентированной на IPv4, эта команда выводит список адресов IPv6, но не длину префикса или префиксы.
This command also lists all interfaces on the router, whether or not IPv6 is enabled on the interfaces.|Эта команда также выводит список всех интерфейсов на маршрутизаторе, независимо от того, включен ли IPv6 на интерфейсах.
For example, in this case, the only two interfaces on R1 that have an IPv6 address are G0/0 and G0/0/0, as configured earlier in Example 24-1.|Например, в этом случае единственными двумя интерфейсами на R1, которые имеют адрес IPv6, являются G0 / 0 и G0 / 0/0, как было настроено ранее в примере 24-1.
|
Beyond the IPv6 addresses on the interfaces, the router also adds IPv6 connected routes to the IPv6 routing table off each interface.|Помимо адресов IPv6 на интерфейсах, маршрутизатор также добавляет маршруты с подключением IPv6 в таблицу маршрутизации IPv6 для каждого интерфейса.
Just as with IPv4, the router keeps these connected routes in the IPv6 routing table only when the interface is in a working (up/up) state.|Как и в случае с IPv4, маршрутизатор сохраняет эти подключенные маршруты в таблице маршрутизации IPv6 только тогда, когда интерфейс находится в рабочем (активном / активном) состоянии.
But if the interface has an IPv6 unicast address configured, and the interface is working, the router adds the connected routes.|Но если в интерфейсе настроен одноадресный IPv6-адрес и интерфейс работает, маршрутизатор добавляет подключенные маршруты.
Example 24-4 shows the connected IPv6 on Router R1 from Figure 24-3.|В примере 24-4 показан подключенный IPv6 к маршрутизатору R1 из рисунка 24-3.
|
Example 24-4 Displaying Connected IPv6 Routes on Router R1 Example end.|Пример 24-4. Отображение подключенных маршрутов IPv6 на маршрутизаторе R1. Пример конец.
##### Generating a Unique Interface ID Using Modified EUI-64
Создание уникального идентификатора интерфейса с использованием модифицированного EUI-64   
__|__
--|--
|
IPv6 follows the same general model as IPv4 regarding which types of devices typically use static, predefined addresses and which use dynamically learned address.|IPv6 следует той же общей модели, что и IPv4, в отношении того, какие типы устройств обычно используют статические предопределенные адреса, а какие - динамически изученные адреса.
For example, routers inside an enterprise use static IPv4 addresses, while end-user devices typically learn their IPv4 address using DHCP. With IPv6, routers also typically use static IPv6 addresses, while user devices use DHCP or Stateless Address Auto Configuration (SLAAC) to dynamically learn their IPv6 address.|Например, маршрутизаторы внутри предприятия используют статические адреса IPv4, а устройства конечных пользователей обычно узнают свой адрес IPv4 с помощью DHCP. С IPv6 маршрутизаторы также обычно используют статические адреса IPv6, в то время как пользовательские устройства используют DHCP или автоматическую настройку адреса без сохранения состояния (SLAAC) для динамического изучения своего IPv6-адреса.
|
Even though engineers typically choose to use stable and predictable IPv6 interface addresses, IOS supports two different methods to configure a stable address.|Хотя инженеры обычно предпочитают использовать стабильные и предсказуемые адреса интерфейса IPv6, IOS поддерживает два разных метода настройки стабильного адреса.
One method uses the ipv6 address command to define the entire 128-bit address, as shown in Examples 24-1 and 24-2.|Один метод использует команду ipv6 address для определения всего 128-битного адреса, как показано в примерах 24-1 и 24-2.
The other method uses this same ipv6 address command, but the command configures only the 64-bit IPv6 prefix for the interface and lets the router automatically generate a unique interface ID.|В другом методе используется та же команда адреса ipv6, но команда настраивает только 64-битный префикс IPv6 для интерфейса и позволяет маршрутизатору автоматически генерировать уникальный идентификатор интерфейса.
|
This second method uses rules called modified EUI-64 (extended unique identifier).|Этот второй метод использует правила, называемые модифицированным EUI-64 (расширенный уникальный идентификатор).
Often, in the context of IPv6 addressing, people refer to modified EUI-64 as just EUI-64; there is no other term or concept about EUI-64 that you need to know for IPv6.|Часто в контексте адресации IPv6 люди называют модифицированный EUI-64 просто EUI-64; нет другого термина или понятия о EUI-64, которое вам нужно знать для IPv6.
The configuration that uses EUI-64 includes a keyword to tell the router to use EUI-64 rules, along with the 64-bit prefix.|Конфигурация, использующая EUI-64, включает ключевое слово, указывающее маршрутизатору использовать правила EUI-64, вместе с 64-битным префиксом.
|
The router then uses EUI-64 rules to create the interface ID part of the address, as follows:|Затем маршрутизатор использует правила EUI-64 для создания части адреса интерфейса ID, как показано ниже:
|
1. Split the 6-byte (12-hex-digit) MAC address in two halves (6 hex digits each).|1. Разделите 6-байтовый (12-шестнадцатеричный) MAC-адрес на две половины (по 6 шестнадцатеричных цифр в каждой).
|
2. Insert FFFE in between the two, making the interface ID now have a total of 16 hex digits (64 bits).|2. Вставьте FFFE между ними, чтобы идентификатор интерфейса теперь состоял из 16 шестнадцатеричных цифр (64 бита).
|
3. Invert the seventh bit of the interface ID.|3. Инвертируйте седьмой бит идентификатора интерфейса.
|
Figure 24-4 shows the major pieces of how the address is formed.|На рис. 24-4 показаны основные этапы формирования адреса.
|
Figure 24-4 IPv6 Address Format with Interface ID and EUI-64 NOTE You can find a video about the EUI-64 process on the companion website, in the Chapter Review section for this chapter.|Рис. 24-4. Формат адреса IPv6 с идентификатором интерфейса и EUI-64 ПРИМЕЧАНИЕ. Видео о процессе EUI-64 можно найти на сопутствующем веб-сайте в разделе «Обзор главы» этой главы.
|
Although this process might seem a bit convoluted, it works.|Хотя этот процесс может показаться немного запутанным, он работает.
Also, with a little practice, you can look at an IPv6 address and quickly notice the FFFE in the middle of the interface ID and then easily find the two halves of the corresponding interface’s MAC address.|Кроме того, немного попрактиковавшись, вы можете взглянуть на IPv6-адрес и быстро заметить FFFE в середине идентификатора интерфейса, а затем легко найти две половины MAC-адреса соответствующего интерфейса.
But you need to be ready to do the same math, in this case to predict the EUI-64 formatted IPv6 address on an interface.|Но вы должны быть готовы проделать те же самые вычисления, в данном случае, чтобы предсказать IPv6-адрес в формате EUI-64 на интерфейсе.
|
For example, if you ignore the final step of inverting the seventh bit, the rest of the steps just require that you move the pieces around.|Например, если вы проигнорируете последний шаг инвертирования седьмого бита, остальные шаги просто требуют, чтобы вы перемещали части.
Figure 24-5 shows two examples, just so you see the process.|На рис. 24-5 показаны два примера, чтобы вы могли видеть процесс.
|
Figure 24-5 Two Examples of Most of the EUI-64 Interface ID Process Both examples follow the same process.|Рис. 24-5. Два примера большинства процессов идентификации интерфейса EUI-64. Оба примера следуют одному и тому же процессу.
Each starts with the MAC address, breaking it into two halves (Step 2).|Каждый начинается с MAC-адреса, разбивая его на две половины (шаг 2).
The third step inserts FFFE in the middle, and the fourth step inserts a colon every four hex digits, keeping with IPv6 conventions.|Третий шаг вставляет FFFE в середину, а четвертый шаг вставляет двоеточие через каждые четыре шестнадцатеричных цифры, соблюдая соглашения IPv6.
|
While the examples in Figure 24-5 show most of the steps, they omit the final step.|Хотя примеры на рис. 24-5 показывают большинство шагов, последний шаг опускается.
The final step requires that you convert the first byte (first two hex digits) from hex to binary, invert the seventh of the 8 bits, and convert the bits back to hex.|Последний шаг требует, чтобы вы преобразовали первый байт (первые две шестнадцатеричные цифры) из шестнадцатеричного в двоичный, инвертировали седьмой из 8 бит и снова преобразовали биты в шестнадцатеричный.
Inverting a bit means that if the bit is a 0, make it a 1; if it is a 1, make it a 0.|Инвертирование бита означает, что если бит равен 0, сделать его равным 1; если это 1, сделайте 0.
Most of the time, with IPv6 addresses, the original bit will be 0 and will be inverted to a 1.|В большинстве случаев с адресами IPv6 исходный бит будет равен 0 и будет инвертирован в 1.
|
For example, Figure 24-6 completes the two examples from Figure 24-5, focusing only on the first two hex digits.|Например, рис. 24-6 завершает два примера из рис. 24-5, фокусируясь только на первых двух шестнадцатеричных цифрах.
The examples show each pair of hex digits (Step 1) and the binary equivalent (Step 2).|В примерах показаны каждая пара шестнадцатеричных цифр (шаг 1) и двоичный эквивалент (шаг 2).
Step 3 shows a copy of those same 8 bits, except the seventh bit is inverted;|Шаг 3 показывает копию тех же 8 бит, за исключением того, что седьмой бит инвертирован;
|
the example on the left inverts from 0 to 1, and the example on the right inverts from 1 to 0.|пример слева инвертирует от 0 до 1, а пример справа инвертирует от 1 до 0.
Finally, the bits are converted back to hex at Step 4.|Наконец, на шаге 4 биты снова преобразуются в шестнадцатеричное.
|
Figure 24-6 Inverting the Seventh Bit of an EUI-64 Interface ID Field NOTE If you do not remember how to do hex-to-binary conversions, take a few moments to review the process.|Рис. 24-6. Инвертирование седьмого бита поля идентификатора интерфейса EUI-64 ПРИМЕЧАНИЕ Если вы не помните, как выполнять преобразование из шестнадцатеричного в двоичное, уделите несколько минут, чтобы просмотреть процесс.
If you memorize the 16 hex values for digits 0 through F, with the corresponding binary values, the conversion can be easy.|Если вы запомните 16 шестнадцатеричных значений для цифр от 0 до F с соответствующими двоичными значениями, преобразование может быть простым.
If you do not have those handy in your memory, take a few moments to look at Table A-2 in Appendix A, “Numeric Reference Tables.”|Если у вас их нет в памяти, найдите несколько минут и посмотрите на Таблицу A-2 в Приложении A, «Цифровые справочные таблицы».
|
For those of you who prefer the decimal shortcuts, with a little memorization you can do the bit-flip math without doing any hex-binary conversions.|Для тех из вас, кто предпочитает десятичные сокращения, с небольшим запоминанием вы можете выполнять математические вычисления с переворачиванием битов без каких-либо шестнадцатеричных преобразований.
First, note that the process to invert the seventh bit, when working with a hexadecimal IPv6 address, flips the third of 4 bits in a single hex digit.|Во-первых, обратите внимание, что процесс инвертирования седьмого бита при работе с шестнадцатеричным IPv6-адресом переворачивает третий из 4-х битов в одну шестнадцатеричную цифру.
With only 16 single hex digits, you could memorize what each hex digit becomes if its third bit is inverted, and you can easily memorize those values with a visual process.|Имея всего 16 одиночных шестнадцатеричных цифр, вы можете запомнить, чем становится каждая шестнадцатеричная цифра, если ее третий бит инвертируется, и вы можете легко запоминать эти значения с помощью визуального процесса.
|
If you want to try to memorize the values, it helps to work through the following process a few times, so grab a piece of scratch paper.|Если вы хотите попытаться запомнить значения, полезно несколько раз выполнить следующий процесс, поэтому возьмите лист бумаги для заметок.
Then write the 16 single hex digits as shown on the left side of Figure 24-7.|Затем запишите 16 одинарных шестнадцатеричных цифр, как показано в левой части рисунка 24-7.
That is, write them in eight rows of two numbers each, with the spacing as directed in the figure.|То есть запишите их в восемь рядов по два числа в каждом с интервалом, указанным на рисунке.
|
Next, start at the top of the lists and draw arrow lines between two numbers in the same column on the top left (0 and 2).|Затем начните с верха списков и нарисуйте линии со стрелками между двумя числами в одном столбце слева вверху (0 и 2).
Then move down the left-side column, connecting the next two digits (4 and 6) with an arrow line, then 8 and A, and then C and E.|Затем переместитесь вниз в левый столбец, соединив следующие две цифры (4 и 6) стрелкой, затем 8 и A, а затем C и E.
Repeat the process on the right, re-creating the right side of Figure 24-7.|Повторите процесс справа, воссоздав правую часть рисунка 24-7.
|
Figure 24-7 A Mnemonic Device to Help Memorize Bit Inversion Shortcut The figure you drew (and the right side of Figure 24-7) shows the hex digits which, when you invert their third bit, convert to the other.|Рисунок 24-7 Мнемоническое устройство, помогающее запомнить ярлык инверсии битов На рисунке, который вы нарисовали (и в правой части рисунка 24-7), показаны шестнадцатеричные цифры, которые, когда вы инвертируете их третий бит, преобразуются в другой.
That is, 0 converts to 2; 2 converts to 0; 1 converts to 3; 3 converts to 1; 4 converts to 6; 6 converts to 4; and so on.|То есть 0 преобразуется в 2; 2 преобразуется в 0; 1 превращается в 3; 3 конвертируется в 1; 4 конвертируется в 6; 6 конвертируется в 4; и так далее.
So, on the exam, if you can remember the pattern to redraw Figure 24-7, you could avoid doing binary/hexadecimal conversion.|Итак, на экзамене, если вы вспомните шаблон для перерисовки рисунка 24-7, вы можете избежать преобразования двоичного в шестнадцатеричный.
Use whichever approach makes you more comfortable.|Используйте тот подход, который вам удобнее.
|
As usual, the best way to get comfortable with forming these EUI-64 interface IDs is to calculate some yourself.|Как обычно, лучший способ привыкнуть к формированию этих идентификаторов интерфейса EUI-64 - это вычислить их самостоятельно.
Table 24-2 lists some practice problems, with an IPv6 64-bit prefix in the first column and the MAC address in the second column.|В таблице 24-2 перечислены некоторые практические проблемы с 64-битным префиксом IPv6 в первом столбце и MAC-адресом во втором столбце.
Your job is to calculate the full (unabbreviated) IPv6 address using EUI-64 rules.|Ваша задача - рассчитать полный (несокращенный) адрес IPv6 с использованием правил EUI-64.
The answers are at the end of the chapter, in the section “Answers to Earlier Practice Problems.”|Ответы находятся в конце главы, в разделе «Ответы на ранее возникшие проблемы».
|
Table 24-2 IPv6 EUI-64 Address Creation Practice Table end.|Таблица 24-2. Практика создания адресов IPv6 EUI-64 Конец таблицы.
|
Configuring a router interface to use the EUI-64 format uses the ipv6 address address/|При настройке интерфейса маршрутизатора для использования формата EUI-64 используется адрес ipv6 address /
|
prefix-length eui-64 interface subcommand.|Подкоманда интерфейса eui-64 длины префикса.
The eui-64 keyword tells the router to find the interface MAC address and do the EUI-64 conversion math to find the interface ID.|Ключевое слово eui-64 указывает маршрутизатору найти MAC-адрес интерфейса и выполнить математические вычисления преобразования EUI-64, чтобы найти идентификатор интерфейса.
|
Example 24-5 shows a revised configuration on Router R1, as compared to the earlier Example 24-1.|В примере 24-5 показана измененная конфигурация маршрутизатора R1 по сравнению с предыдущим примером 24-1.
In this case, R1 uses EUI-64 formatting for its IPv6 addresses.|В этом случае R1 использует форматирование EUI-64 для своих адресов IPv6.
|
Example 24-5 Configuring R1’s IPv6 Interfaces Using EUI-64 Example end.|Пример 24-5. Настройка интерфейсов IPv6 маршрутизатора R1 с помощью EUI-64. Пример конец.
|
The example uses only Ethernet interfaces, all of which have a universal MAC address to use to create their EUI-64 interface IDs. However, in this case, the configuration includes the mac-address command under R1’s G0/0 interface, which causes IOS to use the configured MAC address instead of the universal (burned-in) MAC address.|В этом примере используются только интерфейсы Ethernet, каждый из которых имеет универсальный MAC-адрес для создания идентификаторов их интерфейсов EUI-64. Однако в этом случае конфигурация включает команду mac-address под интерфейсом G0 / 0 маршрутизатора R1, что заставляет IOS использовать сконфигурированный MAC-адрес вместо универсального (встроенного) MAC-адреса.
Interface G0/0/0 defaults to use its universal MAC address.|Интерфейс G0 / 0/0 по умолчанию использует свой универсальный MAC-адрес.
Following that math:|Следуя этой математике:
|
G0/0 – MAC 0201.AA00.0001 – Interface ID 0001.AAFF.FE00.0001 G0/0 – MAC 30F7.0D29.8568 – Interface ID 32F7.0DFF.FE29.8568 Also, be aware that for interfaces that do not have a MAC address, like serial interfaces, the router uses the MAC of the lowest-numbered router interface that does have a MAC.|G0 / 0 - MAC 0201.AA00.0001 - ID интерфейса 0001.AAFF.FE00.0001 G0 / 0 - MAC 30F7.0D29.8568 - ID интерфейса 32F7.0DFF.FE29.8568 Также имейте в виду, что для интерфейсов, которые не имеют MAC-адрес, как и последовательные интерфейсы, маршрутизатор использует MAC интерфейса маршрутизатора с наименьшим номером, который имеет MAC-адрес.
|
NOTE When you use EUI-64, the address value in the ipv6 address command should be the prefix, not the full 128-bit IPv6 address.|ПРИМЕЧАНИЕ При использовании EUI-64 значение адреса в команде адреса ipv6 должно быть префиксом, а не полным 128-битным адресом IPv6.
However, if you mistakenly type the full address and still use the eui-64 keyword, IOS accepts the command and converts the address to the matching prefix before putting the command into the running config file.|Однако, если вы по ошибке набираете полный адрес и все еще используете ключевое слово eui-64, IOS принимает команду и преобразует адрес в соответствующий префикс, прежде чем помещать команду в рабочий файл конфигурации.
For example, IOS converts ipv6 address 2000:1:1:1::1/64 eui-64 to ipv6 address 2000:1:1:1::/64 eui-64.|Например, IOS преобразует адрес ipv6 2000: 1: 1: 1 :: 1/64 eui-64 в адрес ipv6 2000: 1: 1: 1 :: / 64 eui-64.
#### Dynamic Unicast Address Configuration
Конфигурация динамического одноадресного адреса   
__|__
--|--
|
In most cases, network engineers will configure the IPv6 addresses of router interfaces so that the addresses do not change until the engineer changes the router configuration.|В большинстве случаев сетевые инженеры настраивают IPv6-адреса интерфейсов маршрутизатора так, чтобы адреса не менялись, пока инженер не изменит конфигурацию маршрутизатора.
|
However, routers can be configured to use dynamically learned IPv6 addresses.|Однако маршрутизаторы можно настроить для использования динамически изученных адресов IPv6.
These can be useful for routers connecting to the Internet through some types of Internet access technologies, like DSL and cable modems.|Это может быть полезно для маршрутизаторов, подключающихся к Интернету с помощью некоторых типов технологий доступа в Интернет, таких как DSL и кабельные модемы.
|
Cisco routers support two ways for the router interface to dynamically learn an IPv6 address to use:|Маршрутизаторы Cisco поддерживают два способа динамического обучения интерфейсу маршрутизатора IPv6-адреса для использования:
###### Stateful DHCP
DHCP с отслеживанием состояния   
###### Stateless Address Autoconfiguration (SLAAC)
Автоконфигурация адреса без сохранения состояния (SLAAC)   
__|__
--|--
|
Both methods use the familiar ipv6 address command.|Оба метода используют знакомую команду адреса ipv6.
Of course, neither option configures the actual IPv6 address; instead, the commands configure a keyword that tells the router which method to use to learn its IPv6 address.|Конечно, ни один из вариантов не настраивает фактический адрес IPv6; вместо этого команды настраивают ключевое слово, которое сообщает маршрутизатору, какой метод использовать для определения его IPv6-адреса.
Example 24-6 shows the configuration, with one interface using stateful DHCP and one using SLAAC.|В примере 24-6 показана конфигурация с одним интерфейсом, использующим DHCP с отслеживанием состояния, а другим - SLAAC.
|
Example 24-6 Router Configuration to Learn IPv6 Addresses with DHCP and SLAAC Example end.|Пример 24-6. Конфигурация маршрутизатора для изучения адресов IPv6 с DHCP и SLAAC. Пример конец.
### Special Addresses Used by Routers
Специальные адреса, используемые маршрутизаторами   
__|__
--|--
|
IPv6 configuration on a router begins with the simple steps discussed in the first part of this chapter.|Настройка IPv6 на маршрутизаторе начинается с простых шагов, описанных в первой части этой главы.
After you configure the ipv6 unicast-routing global configuration command, to enable the function of IPv6 routing, the addition of a unicast IPv6 address on an interface causes the router to do the following:|После настройки команды глобальной конфигурации ipv6 unicast-routing для включения функции IPv6-маршрутизации добавление одноадресного IPv6-адреса на интерфейсе заставляет маршрутизатор выполнять следующие действия:
###### Gives the interface a unicast IPv6 address
Предоставляет интерфейсу одноадресный IPv6-адрес   
###### Enables the routing of IPv6 packets in/out that interface
Включает маршрутизацию пакетов IPv6 в / из этого интерфейса   
###### Defines the IPv6 prefix (subnet) that exists off that interface
Определяет префикс IPv6 (подсеть), существующий вне этого интерфейса.   
###### Tells the router to add a connected IPv6 route for that prefix, to the IPv6 routing table,
Указывает маршрутизатору добавить подключенный маршрут IPv6 для этого префикса в таблицу маршрутизации IPv6,   
__|__
--|--
|
when that interface is up/up NOTE In fact, if you pause and look at the list again, the same ideas happen for IPv4 when you configure an IPv4 address on a router interface.|когда этот интерфейс включен / активен. ПРИМЕЧАНИЕ. Фактически, если вы остановитесь и снова посмотрите на список, то же самое произойдет и с IPv4, когда вы настроите IPv4-адрес на интерфейсе маршрутизатора.
|
While all the IPv6 features in this list work much like similar features in IPv4, IPv6 also has a number of additional functions not seen in IPv4.|Хотя все функции IPv6 в этом списке работают так же, как аналогичные функции в IPv4, IPv6 также имеет ряд дополнительных функций, которых нет в IPv4.
Often, these additional functions use other IPv6 addresses, many of which are multicast addresses.|Часто эти дополнительные функции используют другие адреса IPv6, многие из которых являются многоадресными.
This second major section of the chapter examines the additional IPv6 addresses seen on routers, with a brief description of how they are used.|В этом втором основном разделе главы исследуются дополнительные адреса IPv6, встречающиеся на маршрутизаторах, с кратким описанием того, как они используются.
#### Link-Local Addresses
Link-Local Адреса   
__|__
--|--
|
IPv6 uses link-local addresses as a special kind of unicast IPv6 address.|IPv6 использует локальные адреса канала как особый вид одноадресного IPv6-адреса.
These addresses are not used for normal IPv6 packet flows that contain data for applications.|Эти адреса не используются для обычных потоков пакетов IPv6, содержащих данные для приложений.
Instead, these addresses are used by some overhead protocols and for routing.|Вместо этого эти адреса используются некоторыми служебными протоколами и для маршрутизации.
This next topic first looks at how IPv6 uses link-local addresses and then how routers create link-local addresses.|В следующем разделе сначала рассматривается, как IPv6 использует локальные для ссылки адреса, а затем как маршрутизаторы создают локальные для ссылки адреса.
##### Link-Local Address Concepts
Концепции Link-Local Address   
__|__
--|--
|
IPv6 defines rules so that packets sent to any link-local address should not be forwarded by any router to another subnet.|IPv6 определяет правила, согласно которым пакеты, отправленные на любой локальный адрес канала, не должны пересылаться каким-либо маршрутизатором в другую подсеть.
As a result, several IPv6 protocols make use of link-local addresses when the protocol’s messages need to stay within the local LAN. For example, Neighbor Discovery Protocol (NDP), which replaces the functions of IPv4’s ARP, uses linklocal addresses.|В результате несколько протоколов IPv6 используют локальные адреса канала, когда сообщения протокола должны оставаться в локальной сети. Например, протокол обнаружения соседей (NDP), который заменяет функции ARP IPv4, использует локальные адреса ссылок.
|
Routers also use link-local addresses as the next-hop IP addresses in IPv6 routes, as shown in Figure 24-8.|Маршрутизаторы также используют локальные адреса канала в качестве IP-адресов следующего перехода в маршрутах IPv6, как показано на рисунке 24-8.
IPv6 hosts also use a default router (default gateway) concept, like IPv4, but instead of the router address being in the same subnet, hosts refer to the router’s link-local address.|Хосты IPv6 также используют концепцию маршрутизатора по умолчанию (шлюз по умолчанию), такую ​​как IPv4, но вместо адреса маршрутизатора, находящегося в той же подсети, хосты ссылаются на локальный адрес маршрутизатора.
The show ipv6 route command lists the link-local address of the neighboring router, rather than the global unicast or unique local unicast address.|Команда show ipv6 route отображает локальный адрес канала соседнего маршрутизатора, а не глобальный одноадресный или уникальный локальный одноадресный адрес.
|
Figure 24-8 IPv6 Using Link-Local Addresses as the Next-Hop Address Following are some key facts about link-local addresses:|Рис. 24-8. IPv6 Использование локальных адресов канала в качестве адреса следующего перехода Ниже приведены некоторые ключевые факты о локальных адресах канала.
|
Unicast (not multicast): Link-local addresses represent a single host, and packets sent to a link-local address should be processed by only that one IPv6 host.|Одноадресная (не многоадресная): адреса, локальные для канала, представляют один хост, и пакеты, отправленные на локальный для канала адрес, должны обрабатываться только этим одним хостом IPv6.
|
Forwarding scope is the local link only: Packets sent to a link-local address do not leave the local data link because routers do not forward packets with link-local destination addresses.|Область пересылки - только локальный канал: пакеты, отправленные на локальный для канала адрес, не покидают локальный канал данных, поскольку маршрутизаторы не пересылают пакеты с локальными адресами назначения.
|
Automatically generated: Every IPv6 host interface (and router interface) can create its own link-local address automatically, solving some initialization problems for hosts before they learn a dynamically learned global unicast address.|Автоматически создается: каждый интерфейс хоста IPv6 (и интерфейс маршрутизатора) может автоматически создавать свой собственный локальный адрес канала, решая некоторые проблемы инициализации для хостов, прежде чем они узнают динамически изученный глобальный одноадресный адрес.
|
Common uses: Link-local addresses are used for some overhead protocols that stay local to one subnet and as the next-hop address for IPv6 routes.|Распространенное использование: локальные адреса канала используются для некоторых служебных протоколов, которые остаются локальными для одной подсети, и в качестве адреса следующего перехода для маршрутов IPv6.
##### Creating Link-Local Addresses on Routers
Создание локальных адресов канала на маршрутизаторах   
__|__
--|--
|
IPv6 hosts and routers can calculate their own link-local address, for each interface, using some basic rules.|Хосты и маршрутизаторы IPv6 могут вычислять свой собственный локальный адрес канала для каждого интерфейса, используя некоторые основные правила.
First, all link-local addresses start with the same prefix, as shown on the left side of Figure 24-9.|Во-первых, все локальные адреса канала начинаются с одного и того же префикса, как показано в левой части рисунка 24-9.
By definition, the first 10 bits must match prefix FE80::/10, meaning that the first three hex digits will be either FE8, FE9, FEA, or FEB. However, when following the RFC, the next 54 bits should be binary 0, so the link-local address should always start with FE80:0000:0000:0000 as the first four unabbreviated quartets.|По определению, первые 10 битов должны соответствовать префиксу FE80 :: / 10, что означает, что первые три шестнадцатеричные цифры будут либо FE8, FE9, FEA, либо FEB. Однако при соблюдении RFC следующие 54 бита должны быть двоичными 0, поэтому локальный адрес канала всегда должен начинаться с FE80: 0000: 0000: 0000 в качестве первых четырех не сокращенных квартетов.
|
Figure 24-9 Link-Local Address Format The second half of the link-local address, in practice, can be formed using EUI-64 rules, can be randomly generated, or even configured.|Рис. 24-9. Формат локального адреса канала. На практике вторая половина локального адреса канала может быть сформирована с использованием правил EUI-64, может быть сгенерирована случайным образом или даже настроена.
Cisco routers use the EUI-64 format to create the interface ID (see the earlier section “Generating a Unique Interface ID Using Modified EUI-64”).|Маршрутизаторы Cisco используют формат EUI-64 для создания идентификатора интерфейса (см. Предыдущий раздел «Создание уникального идентификатора интерфейса с использованием модифицированного EUI-64»).
As a result, a router’s complete link-local address should be unique because the MAC address that feeds into the EUI-64 process should be unique.|В результате полный локальный адрес маршрутизатора должен быть уникальным, поскольку MAC-адрес, передаваемый в процесс EUI-64, должен быть уникальным.
|
Alternately, some OSs create their link-local addresses by randomly generating the interface ID. For example, Microsoft OSs use a somewhat random process to choose the interface ID and change it over time in an attempt to prevent some forms of attacks.|В качестве альтернативы, некоторые ОС создают свои локальные для ссылки адреса путем случайной генерации идентификатора интерфейса. Например, операционные системы Microsoft используют несколько случайный процесс для выбора идентификатора интерфейса и его изменения с течением времени в попытке предотвратить некоторые формы атак.
|
IOS creates a link-local address for any interface that has configured at least one other unicast address using the ipv6 address command (global unicast or unique local).|IOS создает локальный адрес канала для любого интерфейса, который настроил хотя бы один другой одноадресный адрес с помощью команды адреса ipv6 (глобальная одноадресная или уникальная локальная).
To see the link-local address, just use the usual commands that also list the unicast IPv6 address: show ipv6 interface and show ipv6 interface brief.|Чтобы увидеть локальный адрес ссылки, просто используйте обычные команды, которые также перечисляют одноадресный IPv6-адрес: показать интерфейс ipv6 и показать краткое описание интерфейса ipv6.
Note that Example 24-7 shows an example from Router R1 just after it was configured as shown in Example 24-5 (with the eui-64 keyword on the ipv6 address commands).|Обратите внимание, что в примере 24-7 показан пример маршрутизатора R1 сразу после его настройки, как показано в примере 24-5 (с ключевым словом eui-64 в адресных командах ipv6).
|
Example 24-7 Comparing Link-Local Addresses with EUI-Generated Unicast Addresses Example end.|Пример 24-7. Сравнение локальных адресов канала с одноадресными адресами, созданными с помощью EUI. Пример конец.
|
First, examine the two pairs of highlighted entries in the example.|Сначала изучите две пары выделенных записей в примере.
For each of the two interfaces that have a global unicast address (G0/0 and G0/0/0), the output lists the global unicast, which happens to begin with 2001 in this case.|Для каждого из двух интерфейсов, имеющих глобальный одноадресный адрес (G0 / 0 и G0 / 0/0), в выходных данных указывается глобальный одноадресный адрес, который в данном случае начинается с 2001.
At the same time, the output also lists the link-local address for each interface, beginning with FE80.|В то же время в выходных данных также указывается локальный адрес канала для каждого интерфейса, начиная с FE80.
|
Next, focus on the two addresses listed under interface G0/0.|Затем сосредоточьтесь на двух адресах, перечисленных в интерфейсе G0 / 0.
If you look closely at the second half of the two addresses listed for interface G0/0, you will see that both addresses have the same interface ID value.|Если вы внимательно посмотрите на вторую половину из двух адресов, перечисленных для интерфейса G0 / 0, вы увидите, что оба адреса имеют одинаковое значение идентификатора интерфейса.
The global unicast address was configured in this case with the ipv6 address 2001:DB8:1111:1::/64 eui-64 command, so the router used EUI-64 logic to form both the global unicast address and the link-local address.|В этом случае глобальный одноадресный адрес был настроен с помощью команды ipv6 address 2001: DB8: 1111: 1 :: / 64 eui-64, поэтому маршрутизатор использовал логику EUI-64 для формирования как глобального индивидуального адреса, так и локального адреса канала. .
The interface MAC address in this case is 0201.AA00.0001, so the router calculates an interface ID portion of both addresses as 0001:AAFF:FE00:0001 (unabbreviated).|MAC-адрес интерфейса в этом случае - 0201.AA00.0001, поэтому маршрутизатор вычисляет часть идентификатора интерфейса для обоих адресов как 0001: AAFF: FE00: 0001 (без сокращений).
After abbreviation, Router R1’s linklocal address on interface G0/0 becomes FE80::AAFF:FE00:1.|После сокращения локальный адрес канала связи маршрутизатора R1 на интерфейсе G0 / 0 становится FE80 :: AAFF: FE00: 1.
|
IOS can either automatically create the link-local address, or it can be configured.|IOS может либо автоматически создать локальный адрес канала, либо его можно настроить.
IOS chooses the link-local address for the interface based on the following rules:|IOS выбирает локальный адрес для интерфейса на основе следующих правил:
###### If configured, the router uses the value in the ipv6 address address link-local interface
Если настроен, маршрутизатор использует значение в интерфейсе локального канала адреса адреса ipv6.   
__|__
--|--
|
subcommand.|подкоманда.
Note that the configured link-local address must be from the correct address range for link-local addresses; that is, an address from prefix FE80::/10.|Обратите внимание, что настроенный локальный адрес ссылки должен быть из правильного диапазона адресов для локальных адресов канала; то есть адрес из префикса FE80 :: / 10.
In other words, the address must begin with FE8, FE9, FEA, or FEB.|Другими словами, адрес должен начинаться с FE8, FE9, FEA или FEB.
###### If not configured, the IOS calculates the link-local address using EUI-64 rules, as discussed
Если не настроен, IOS вычисляет локальный адрес канала, используя правила EUI-64, как обсуждалось.   
__|__
--|--
|
and demonstrated in and around Example 24-7.|и продемонстрировано в Примере 24-7 и вокруг него.
The calculation uses EUI-64 rules even if the interface unicast address does not use EUI-64.|В расчетах используются правила EUI-64, даже если в одноадресном адресе интерфейса не используется EUI-64.
##### Routing IPv6 with Only Link-Local Addresses on an Interface
Маршрутизация IPv6 только с локальными адресами канала на интерфейсе   
__|__
--|--
|
This chapter has shown four variations on the ipv6 address command so far.|В этой главе на данный момент показано четыре варианта адресной команды ipv6.
To review:|Для обзора:
|
ipv6 address address/prefix-length: Static configuration of a specific address ipv6 address prefix/prefix-length eui-64: Static configuration of a specific prefix and prefix length, with the router calculating the interface ID using EUI-64 rules ipv6 address dhcp: Dynamic learning on the address and prefix length using DHCP ipv6 address autoconfig: Dynamic learning of the prefix and prefix length, with the router calculating the interface ID using EUI-64 rules (SLAAC)|адрес ipv6 адрес / длина префикса: статическая конфигурация определенного адреса адрес IPv6 префикс / длина префикса eui-64: статическая конфигурация определенного префикса и длины префикса, при этом маршрутизатор вычисляет идентификатор интерфейса с использованием правил EUI-64 адрес IPv6 dhcp : Динамическое изучение адреса и длины префикса с использованием DHCP ipv6 address autoconfig: Динамическое обучение префикса и длины префикса, при этом маршрутизатор вычисляет идентификатор интерфейса с использованием правил EUI-64 (SLAAC)
|
This next short topic completes the list with the following command:|Следующая короткая тема дополняет список следующей командой:
|
ipv6 enable: Enables IPv6 processing and adds a link-local address, but adds no other unicast IPv6 addresses.|ipv6 enable: включает обработку IPv6 и добавляет локальный адрес ссылки, но не добавляет других одноадресных IPv6-адресов.
|
The purpose of the ipv6 enable command will not make sense until you realize that some links, particularly WAN links, do not need a global unicast address.|Назначение команды ipv6 enable не будет иметь смысла, пока вы не поймете, что некоторым ссылкам, особенно каналам WAN, не нужен глобальный одноадресный адрес.
Using the backdrop of Figure 24-10, think about the destination of packets sent by hosts like PC1 and PC2. When PC1 sends PC2 an IPv6 packet, the packet holds PC1’s and PC2’s IPv6 addresses and never contains the WAN link’s IPv6 addresses.|Используя фон на рис. 24-10, подумайте о месте назначения пакетов, отправляемых такими хостами, как ПК1 и ПК2. Когда ПК1 отправляет ПК2 пакет IPv6, этот пакет содержит IPv6-адреса ПК1 и ПК2 и никогда не содержит IPv6-адресов канала WAN.
PC1 and PC2 may need to know the routers’ LAN IPv6 addresses, to use as their default gateway, but the hosts do not need to know the routers’|ПК1 и ПК2, возможно, потребуется знать IPv6-адреса LAN маршрутизаторов, чтобы использовать их в качестве шлюза по умолчанию, но хостам не нужно знать маршрутизаторы.
|
WAN interface addresses.|Адреса интерфейсов WAN.
|
Figure 24-10 Typical Use of the ipv6 enable Command Additionally, the routers do not need to have global unicast (or unique local) addresses on the WAN links for routing to work.|Рис. 24-10. Типичное использование команды ipv6 enable. Кроме того, маршрутизаторам не требуется иметь глобальные одноадресные (или уникальные локальные) адреса на каналах глобальной сети для работы маршрутизации.
IPv6 routing protocols use link-local addresses as the next-hop address when dynamically building IPv6 routes.|Протоколы маршрутизации IPv6 используют локальные адреса канала в качестве адреса следующего перехода при динамическом построении маршрутов IPv6.
Additionally, static routes, as discussed in Chapter 25, “Implementing IPv6 Routing,” can use link-local addresses for the next-hop address.|Кроме того, статические маршруты, как обсуждалось в главе 25 «Реализация маршрутизации IPv6», могут использовать локальные для канала адреса для адреса следующего перехода.
|
In short, creating a WAN link with no global unicast (or unique local) addresses works.|Короче говоря, создание канала WAN без глобальных одноадресных (или уникальных локальных) адресов работает.
As a result, you would not even need to assign an IPv6 subnet to each WAN link.|В результате вам даже не нужно будет назначать подсеть IPv6 каждому каналу WAN.
Then to configure the WAN interfaces, use the ipv6 enable command, enabling IPv6 and giving each interface a generated link-local IPv6 address.|Затем, чтобы настроить интерфейсы WAN, используйте команду ipv6 enable, включив IPv6 и присвоив каждому интерфейсу сгенерированный локальный IPv6-адрес канала.
|
To use the command, just configure the ipv6 enable command on the interfaces on both ends of the WAN link.|Чтобы использовать эту команду, просто настройте команду ipv6 enable на интерфейсах на обоих концах канала WAN.
##### IPv6 Multicast Addresses
Многоадресные IPv6-адреса   
__|__
--|--
|
IPv6 uses multicast IPv6 addresses for several purposes.|IPv6 использует многоадресные IPv6-адреса для нескольких целей.
Like IPv4, IPv6 includes a range of multicast addresses that can be used by multicast applications, with many of the same fundamental concepts as IPv4 multicasts.|Как и IPv4, IPv6 включает диапазон адресов многоадресной рассылки, которые могут использоваться приложениями многоадресной рассылки, со многими из тех же фундаментальных концепций, что и многоадресные рассылки IPv4.
For instance, IANA defines the range FF30::/12 (all IPv6 addresses that begin with FF3) as the range of addresses to be used for some types of multicast applications.|Например, IANA определяет диапазон FF30 :: / 12 (все адреса IPv6, начинающиеся с FF3) как диапазон адресов, который будет использоваться для некоторых типов многоадресных приложений.
|
Additionally, different IPv6 RFCs reserve multicast addresses for specific purposes.|Кроме того, различные RFC IPv6 резервируют адреса многоадресной рассылки для определенных целей.
For instance, OSPFv3 uses FF02::5 and FF02::6 as the all-OSPF-routers and all-DR-Routers multicast addresses, respectively, similar to how OSPFv2 uses IPv4 addresses 224.0.0.5 and 224.0.0.6 for the equivalent purposes.|Например, OSPFv3 использует FF02 :: 5 и FF02 :: 6 в качестве многоадресных адресов all-OSPF-router и all-DR-Routers соответственно, аналогично тому, как OSPFv2 использует IPv4-адреса 224.0.0.5 и 224.0.0.6 для эквивалентных целей. .
|
This next section focuses on IPv6 multicast addresses reserved for use with different protocols.|Следующий раздел посвящен групповым адресам IPv6, зарезервированным для использования с различными протоколами.
|
The first, link-local multicast addresses, are multicast addresses useful for communicating over a single link.|Первые, локальные для канала многоадресные адреса, представляют собой многоадресные адреса, полезные для связи по одному каналу.
The other type is a special overhead multicast address calculated for each host, called the solicited-node multicast address.|Другой тип - это специальный служебный многоадресный адрес, вычисляемый для каждого хоста, называемый многоадресным адресом запрошенного узла.
##### Reserved Multicast Addresses
Зарезервированные адреса многоадресной рассылки   
__|__
--|--
|
Stop for a moment and think about some of the control plane protocols discussed throughout this book so far.|Остановитесь на мгновение и подумайте о некоторых протоколах уровня управления, которые до сих пор обсуждались в этой книге.
Some of those IPv4 control plane protocols used IPv4 broadcasts, meaning that the packet destination address was either 255.255.255.255 (the address for all hosts in the local LAN) or the subnet broadcast address (the address for all hosts in that specific subnet).|Некоторые из этих протоколов плоскости управления IPv4 использовали широковещательную рассылку IPv4, что означает, что адрес назначения пакета был либо 255.255.255.255 (адрес для всех хостов в локальной LAN), либо широковещательный адрес подсети (адрес для всех хостов в этой конкретной подсети).
Those broadcast packets were then sent as Ethernet broadcast frames, destined to the Ethernet broadcast address of FFFF.FFFF.FFFF.|Эти широковещательные пакеты затем отправлялись как широковещательные кадры Ethernet, предназначенные для широковещательного адреса Ethernet FFFF.FFFF.FFFF.
|
While useful, the IPv4 approach of IPv4 broadcast and LAN broadcast requires every host in the VLAN to process the broadcast frame, even if only one other device needed to think about the message.|Несмотря на свою полезность, подход IPv4 к широковещательной рассылке IPv4 и широковещательной рассылке по локальной сети требует, чтобы каждый хост в VLAN обрабатывал широковещательный кадр, даже если только одно другое устройство должно было думать о сообщении.
Also, each host has to process the frame, then packet, read the type of message, and so on, before ignoring the task.|Кроме того, каждый хост должен обработать кадр, затем пакет, прочитать тип сообщения и так далее, прежде чем игнорировать задачу.
For example, an IPv4 ARP Request—an IPv4 and LAN broadcast—requires a host to process the Ethernet, IP, and ARP details of the message before deciding whether to reply or not.|Например, запрос IPv4 ARP - широковещательная рассылка IPv4 и LAN - требует, чтобы хост обработал сведения об Ethernet, IP и ARP сообщения, прежде чем принять решение, отвечать или нет.
|
IPv6, instead of using Layer 3 and Layer 2 broadcasts, instead uses Layer 3 multicast addresses, which in turn cause Ethernet frames to use Ethernet multicast addresses.|IPv6 вместо использования широковещательной рассылки уровня 3 и уровня 2 вместо этого использует многоадресные адреса уровня 3, что, в свою очередь, заставляет кадры Ethernet использовать многоадресные адреса Ethernet.
As a result:|Как результат:
###### All the hosts that should receive the message receive the message, which is necessary for
Все хосты, которые должны получить сообщение, получают сообщение, которое необходимо для   
__|__
--|--
|
the protocols to work.|протоколы работать.
However…|Однако…
###### …Hosts that do not need to process the message can make that choice with much less
… Хосты, которым не нужно обрабатывать сообщение, могут сделать этот выбор с гораздо меньшими затратами   
__|__
--|--
|
processing as compared to IPv4.|обработка по сравнению с IPv4.
|
For instance, OSPFv3 uses IPv6 multicast addresses FF02::5 and FF02::6.|Например, OSPFv3 использует многоадресные IPv6-адреса FF02 :: 5 и FF02 :: 6.
In a subnet, the OSPFv3 routers will listen for packets sent to those addresses.|В подсети маршрутизаторы OSPFv3 будут прослушивать пакеты, отправленные на эти адреса.
However, all the endpoint hosts do not use OSPFv3 and should ignore those OSPFv3 messages.|Однако все узлы конечных точек не используют OSPFv3 и должны игнорировать эти сообщения OSPFv3.
If a host receives a packet with FF02::5 as the destination IPv6 address, the host can ignore the packet because the host knows it does not care about packets sent to that multicast address.|Если хост получает пакет с FF02 :: 5 в качестве IPv6-адреса назначения, он может игнорировать пакет, потому что хост знает, что его не волнуют пакеты, отправленные на этот многоадресный адрес.
That check takes much less time than the equivalent checks with IPv4.|Эта проверка занимает гораздо меньше времени, чем эквивалентная проверка с IPv4.
|
Table 24-3 lists the most common reserved IPv6 multicast addresses.|В Табл. 24-3 перечислены наиболее распространенные зарезервированные многоадресные IPv6-адреса.
|
Table 24-3 Key IPv6 Local-Scope Multicast Addresses Table end.|Таблица 24-3. Конец таблицы ключевых IPv6-адресов многоадресной рассылки в локальной области.
|
NOTE An Internet search of “IPv6 Multicast Address Space Registry” will show the IANA page that lists all the reserved values and the RFC that defines the use of each address.|ПРИМЕЧАНИЕ. Поиск в Интернете «Реестр многоадресного адресного пространства IPv6» покажет страницу IANA, на которой перечислены все зарезервированные значения и RFC, который определяет использование каждого адреса.
|
Example 24-8 repeats the output of the show ipv6 interface command to show the multicast addresses used by Router R1 on its G0/0 interface.|В примере 24-8 повторяется вывод команды show ipv6 interface, чтобы показать адреса многоадресной рассылки, используемые маршрутизатором R1 на его интерфейсе G0 / 0.
In this case, the highlighted lines show the all-nodes address (FF02::1), all-routers (FF02::2), and two for OSPFv3 (FF02::5 and FF02::6).|В этом случае выделенные строки показывают адрес всех узлов (FF02 :: 1), все маршрутизаторы (FF02 :: 2) и два для OSPFv3 (FF02 :: 5 и FF02 :: 6).
Note that the IPv6 multicast addresses that the router interface is listening for and processing are listed under the heading “Joined group address(es):” at the top of the highlighted section of the output.|Обратите внимание, что многоадресные IPv6-адреса, которые интерфейс маршрутизатора прослушивает и обрабатывает, перечислены под заголовком «Адрес (а) присоединенной группы:» в верхней части выделенного раздела выходных данных.
|
Example 24-8 Verifying Static IPv6 Addresses on Router R1 Example end.|Пример 24-8. Проверка статических адресов IPv6 на маршрутизаторе R1. Пример окончен.
##### Multicast Address Scopes
Области многоадресной рассылки   
__|__
--|--
|
IPv6 RFC 4291 defines IPv6 addressing including the ideas of IPv6 address scope.|IPv6 RFC 4291 определяет адресацию IPv6, включая идеи области IPv6-адресов.
Each scope defines a different set of rules about whether routers should or should not forward a packet, and how far routers should forward packets, based on those scopes.|Каждая область действия определяет свой набор правил о том, должны или не должны маршрутизаторы пересылать пакет, и на каком расстоянии маршрутизаторы должны пересылать пакеты в зависимости от этих областей.
|
For instance, you read earlier in this chapter about the link-local address on an interface—a unicast IPv6 address—but with a link-local scope.|Например, ранее в этой главе вы читали о локальном для ссылки адресе на интерфейсе - одноадресном IPv6-адресе - но с локальной для ссылки областью.
The scope definition called “link-local”|Определение области действия называется «локальная ссылка».
|
dictates that packets sent to a link-local unicast address should remain on the link and not be forwarded by any router.|диктует, что пакеты, отправленные на локальный адрес одноадресной рассылки, должны оставаться в канале и не пересылаться каким-либо маршрутизатором.
|
Most of the scope discussion in RFC 4291 applies to multicast addresses, using the term multicast scope.|Большая часть обсуждения области в RFC 4291 относится к адресам многоадресной рассылки, используя термин область многоадресной рассылки.
Per that RFC, the fourth digit of the multicast address identifies the scope, as noted in Table 24-4.|Согласно этому RFC четвертая цифра адреса многоадресной рассылки определяет область действия, как указано в Таблице 24-4.
|
Table 24-4 IPv6 Multicast Scope Terms Table end.|Таблица 24-4 Термины области многоадресной рассылки IPv6 Конец таблицы.
|
Breaking down the concepts a little further, packets sent to a multicast address with a linklocal scope should stay on the local link, that is, the local subnet.|Разбивая концепции немного дальше, пакеты, отправленные на адрес многоадресной рассылки с областью действия linklocal, должны оставаться в локальной ссылке, то есть в локальной подсети.
Hosts know they can process a link-local packet if received, as do routers.|Хосты знают, что они могут обработать пакет локального канала, если он получен, как и маршрутизаторы.
However, routers know to not route the packet to other subnets because of the scope.|Однако маршрутизаторы знают, что не следует направлять пакет в другие подсети из-за области действия.
Packets with an organization-local scope should be routed inside the organization but not out to the Internet or over a link to another company. (Note that routers can predict the boundaries of some scopes, like link-local, but they need configuration to know the boundaries of other scopes, for instance, organizationlocal.)|Пакеты с локальной областью видимости должны маршрутизироваться внутри организации, но не в Интернет или по ссылке в другую компанию. (Обратите внимание, что маршрутизаторы могут прогнозировать границы некоторых областей действия, например, локальной для связи, но им нужна конфигурация, чтобы знать границы других областей, например, для локальной организации.)
|
Comparing a few of the scopes in terms of where the packets can flow, the higher the value in the fourth hex digit, the further away from the sending host the scope allows the packet to be forwarded.|Сравнивая несколько областей с точки зрения того, где могут проходить пакеты, чем выше значение в четвертой шестнадцатеричной цифре, тем дальше от отправляющего хоста область позволяет пересылать пакет.
Table 24-4 shows that progression top to bottom, while Figure 24-11 shows an example with three scopes: link-local, site-local, and organization-local.|Таблица 24-4 показывает это развитие сверху вниз, а на рисунке 24-11 показан пример с тремя областями: локальная ссылка, локальная сайт и локальная организация.
In the figure, site-local messages do not cross the WAN, and organization-local messages do not leave the organization over the link to the Internet.|На рисунке локальные сообщения сайта не пересекают WAN, а локальные сообщения организации не покидают организацию по ссылке в Интернет.
|
Figure 24-11 IPv6 Multicast Scopes Finally, the term link-local has a couple of common uses in IPv6 and can be confusing as a result.|Рис. 24-11. Области многоадресной рассылки IPv6 Наконец, термин «локальная ссылка» имеет несколько общих применений в IPv6 и в результате может сбивать с толку.
The following descriptions should clarify the different uses of the term:|Следующие ниже описания должны прояснить различные варианты использования этого термина:
|
Link-local address: An IPv6 address that begins FE80.|Локальный адрес канала: IPv6-адрес, который начинается с FE80.
This serves as a unicast address for an interface to which devices apply a link-local scope.|Это служит одноадресным адресом для интерфейса, к которому устройства применяют локальную связь.
Devices often create their own linklocal addresses using EUI-64 rules.|Устройства часто создают свои собственные локальные адреса ссылок, используя правила EUI-64.
A more complete term for comparison would be linklocal unicast address.|Более полным термином для сравнения было бы одноадресный адрес linklocal.
|
Link-local multicast address: An IPv6 address that begins with FF02.|Локальный адрес многоадресной рассылки: IPv6-адрес, который начинается с FF02.
This serves as a reserved multicast address to which devices apply a link-local scope.|Это служит зарезервированным адресом многоадресной рассылки, к которому устройства применяют локальную область связи.
|
Link-local scope: A reference to the scope itself, rather than an address.|Локальная область действия ссылки: ссылка на саму область действия, а не на адрес.
This scope defines that routers should not forward packets sent to an address in this scope.|Эта область определяет, что маршрутизаторы не должны пересылать пакеты, отправленные на адрес в этой области.
##### Solicited-Node Multicast Addresses
Многоадресные адреса запрошенных узлов   
__|__
--|--
|
IPv6 Neighbor Discovery Protocol (NDP) replaces IPv4 ARP, as discussed in Chapter 25.|Протокол обнаружения соседей IPv6 (NDP) заменяет IPv4 ARP, как описано в главе 25.
|
NDP improves the MAC-discovery process by sending IPv6 multicast packets that can be processed by the correct host but discarded with less processing by the rest of the hosts in the subnet.|NDP улучшает процесс обнаружения MAC-адресов, отправляя многоадресные пакеты IPv6, которые могут обрабатываться правильным хостом, но отбрасываются с меньшей обработкой остальными хостами в подсети.
The process uses the solicited-node multicast address associated with the unicast IPv6 address.|Процесс использует многоадресный адрес запрошенного узла, связанный с одноадресным IPv6-адресом.
|
Figure 24-12 shows how to determine the solicited node multicast address associated with a unicast address.|На рисунке 24-12 показано, как определить групповой адрес запрошенного узла, связанный с одноадресным адресом.
Start with the predefined /104 prefix (26 hex digits) shown in Figure 24-12.|Начните с предопределенного префикса / 104 (26 шестнадцатеричных цифр), показанного на рисунке 24-12.
In other words, all the solicited-node multicast addresses begin with the abbreviated FF02::1:FF. In the last 24 bits (6 hex digits), copy the last 6 hex digits of the unicast address into the solicited-node address.|Другими словами, все многоадресные адреса запрашиваемых узлов начинаются с сокращенного FF02 :: 1: FF. В последних 24 битах (6 шестнадцатеричных цифр) скопируйте последние 6 шестнадцатеричных цифр одноадресного адреса в адрес запрошенного узла.
|
Figure 24-12 Solicited-Node Multicast Address Format Note that a host or router calculates a matching solicited node multicast address for every unicast address on an interface.|Рис. 24-12 Формат многоадресного адреса запрошенного узла Обратите внимание, что хост или маршрутизатор вычисляет соответствующий многоадресный адрес запрошенного узла для каждого одноадресного адреса на интерфейсе.
Example 24-9 shows an example, in which the router interface has a unicast address of 2001:DB8:1111:1::1/64, and a link-local address of FE80::AA:AAAA. As a result, the interface has two solicited node multicast addresses, shown at the end of the output.|В примере 24-9 показан пример, в котором интерфейс маршрутизатора имеет одноадресный адрес 2001: DB8: 1111: 1 :: 1/64 и локальный адрес канала FE80 :: AA: AAAA. В результате интерфейс имеет два запрошенных адреса многоадресной рассылки узлов, показанных в конце вывода.
|
Example 24-9 Verifying Static IPv6 Addresses on Router R1 Example end.|Пример 24-9. Проверка статических адресов IPv6 на маршрутизаторе R1. Пример окончен.
|
Note that in this case, R1’s global unicast address ends with 00:0001 (unabbreviated), resulting in an unabbreviated solicited node multicast address of FF02:0000:0000:0000:0000:|Обратите внимание, что в этом случае глобальный одноадресный адрес маршрутизатора R1 заканчивается на 00: 0001 (без сокращений), что приводит к несокращенному адресу многоадресной рассылки запрошенного узла FF02: 0000: 0000: 0000: 0000:
|
0001:FF00:00001.|0001: FF00: 00001.
This value begins with the 26-hex-digit prefix shown in Figure 24-12, followed by 00:0001.|Это значение начинается с префикса из 26 шестнадцатеричных цифр, показанного на рисунке 24-12, за которым следует 00: 0001.
The solicited node multicast address corresponding to link-local address FE80::AA:AAAA ends in AA:AAAA and is shown in the last line of the example.|Адрес многоадресной рассылки запрошенного узла, соответствующий локальному адресу канала FE80 :: AA: AAAA, заканчивается на AA: AAAA и показан в последней строке примера.
#### Miscellaneous IPv6 Addresses
Разные адреса IPv6   
__|__
--|--
|
Together, this chapter and the preceding chapter have introduced most of the IPv6 addressing concepts included in this book.|Вместе эта и предыдущая главы представили большинство концепций адресации IPv6, включенных в эту книгу.
This short topic mentions a few remaining IPv6 addressing ideas and summarizes the topics for easy study.|В этой короткой теме упоминаются несколько оставшихся идей адресации IPv6 и кратко излагаются темы для легкого изучения.
|
First, all IPv6 hosts can use two additional special addresses:|Во-первых, все хосты IPv6 могут использовать два дополнительных специальных адреса:
###### The unknown (unspecified) IPv6 address, ::, or all 0s
Неизвестный (неуказанный) IPv6-адрес, :: или все нули   
###### The loopback IPv6 address, ::1, or 127 binary 0s with a single 1
Адрес IPv6 обратной петли, :: 1 или 127 двоичных нулей с одной единицей   
__|__
--|--
|
A host can use the unknown address (::) when its own IPv6 address is not yet known or when the host wonders if its own IPv6 address might have problems.|Хост может использовать неизвестный адрес (: :), когда его собственный IPv6-адрес еще не известен или когда хост задается вопросом, могут ли быть проблемы с его собственным IPv6-адресом.
For example, hosts use the unknown address during the early stages of dynamically discovering their IPv6 address.|Например, хосты используют неизвестный адрес на ранних этапах динамического обнаружения своего IPv6-адреса.
|
When a host does not yet know what IPv6 address to use, it can use the :: address as its source IPv6 address.|Когда хост еще не знает, какой IPv6-адрес использовать, он может использовать :: address в качестве исходного IPv6-адреса.
|
The IPv6 loopback address gives each IPv6 host a way to test its own protocol stack.|Адрес обратной связи IPv6 дает каждому хосту IPv6 возможность протестировать собственный стек протоколов.
Just like the IPv4 127.0.0.1 loopback address, packets sent to ::1 do not leave the host but are instead simply delivered down the stack to IPv6 and back up the stack to the application on the local host.|Как и в случае с адресом обратной связи IPv4 127.0.0.1, пакеты, отправленные на :: 1, не покидают хост, а просто доставляются вниз по стеку на IPv6 и создают резервную копию стека в приложении на локальном хосте.
#### Anycast Addresses
Anycast Адреса   
__|__
--|--
|
Imagine that routers collectively need to implement some service.|Представьте, что маршрутизаторам необходимо реализовать некую услугу.
Rather than have one router supply that service, that service works best when implemented on several routers.|Вместо того, чтобы предоставлять эту услугу одному маршрутизатору, эта услуга лучше всего работает при реализации на нескольких маршрутизаторах.
But the hosts that use the service need to contact only the nearest such service, and the network wants to hide all these details from the hosts.|Но хостам, которые используют эту службу, необходимо связываться только с ближайшей такой службой, и сеть хочет скрыть все эти детали от хостов.
Hosts can send just one packet to an IPv6 address, and the routers will forward the packet to the nearest router that supports that service by virtue of supporting that destination IPv6 address.|Хосты могут отправлять только один пакет на IPv6-адрес, и маршрутизаторы пересылают пакет на ближайший маршрутизатор, который поддерживает эту услугу, благодаря поддержке этого IPv6-адреса назначения.
|
IPv6 anycast addresses provide that exact function.|Адреса IPv6 anycast обеспечивают именно эту функцию.
The any part of the name refers to the fact that any instances of the service can be used.|Любая часть имени указывает на то, что можно использовать любые экземпляры службы.
Figure 24-13 shows this big concept, with two major steps:|На рис. 24-13 показана эта большая концепция с двумя основными этапами:
|
Step 1.|Шаг 1.
Two routers configure the exact same IPv6 address, designated as an anycast address, to support some service.|Два маршрутизатора настраивают один и тот же адрес IPv6, обозначенный как произвольный адрес, для поддержки некоторых услуг.
|
Step 2.|Шаг 2.
In the future, when any router receives a packet for that anycast address, the other routers simply route the packet to the nearest router that supports the address.|В будущем, когда какой-либо маршрутизатор получит пакет для этого произвольного адреса, другие маршрутизаторы просто направят пакет на ближайший маршрутизатор, поддерживающий этот адрес.
|
Figure 24-13 IPv6 Anycast Addresses To make this anycast process work, the routers implementing the anycast address must be configured and then advertise a route for the anycast address.|Рис. 24-13. Адреса Anycast IPv6 Чтобы заставить этот процесс anycast работать, маршрутизаторы, реализующие произвольный адрес, должны быть настроены, а затем объявить маршрут для произвольного адреса.
The addresses do not come from a special reserved range of addresses; instead, they are from the unicast address range.|Адреса не поступают из специального зарезервированного диапазона адресов; вместо этого они из диапазона одноадресных адресов.
|
Often, the address is configured with a /128 prefix so that the routers advertise a host route for that one anycast address.|Часто адрес конфигурируется с префиксом / 128, так что маршрутизаторы объявляют маршрут хоста для этого одного произвольного адреса.
At that point, the routing protocol advertises the route just like any other IPv6 route; the other routers cannot tell the difference.|В этот момент протокол маршрутизации объявляет маршрут точно так же, как любой другой маршрут IPv6; другие маршрутизаторы не заметят разницы.
|
Example 24-10 shows a sample configuration on a router.|В примере 24-10 показан пример конфигурации маршрутизатора.
Note that the actual address (2001:1:1:2::99) looks like any other unicast address; the value can be chosen like any other IPv6 unicast addresses.|Обратите внимание, что фактический адрес (2001: 1: 1: 2 :: 99) похож на любой другой одноадресный адрес; значение может быть выбрано, как и любые другие одноадресные IPv6-адреса.
However, note the different anycast keyword on the ipv6 address command, telling the local router that the address has a special purpose as an anycast address.|Однако обратите внимание на другое ключевое слово anycast в команде адреса ipv6, говорящее локальному маршрутизатору о том, что адрес имеет особое назначение как адрес anycast.
Finally, note that the show ipv6 interface command does identify the address as an anycast address, but the show ipv6 interface brief command does not.|Наконец, обратите внимание, что команда show ipv6 interface действительно идентифицирует адрес как произвольный адрес, а команда show ipv6 interfacerief - нет.
|
Example 24-10 Configuring and Verifying IPv6 Anycast Addresses Example end.|Пример 24-10. Настройка и проверка адресов Anycast IPv6. Пример конец.
|
NOTE The subnet router anycast address is one special anycast address in each subnet.|ПРИМЕЧАНИЕ. Anycast-адрес маршрутизатора подсети - это один специальный произвольный адрес в каждой подсети.
|
It is reserved for use by routers as a way to send a packet to any router on the subnet.|Он зарезервирован для использования маршрутизаторами как способ отправки пакета любому маршрутизатору в подсети.
The address’s value in each subnet is the same number as the subnet ID; that is, the address has the same prefix value as the other addresses and all binary 0s in the interface ID.|Значение адреса в каждой подсети совпадает с номером ID подсети; то есть адрес имеет то же значение префикса, что и другие адреса, и все двоичные 0 в идентификаторе интерфейса.
#### IPv6 Addressing Configuration Summary
Сводка конфигурации адресации IPv6   
__|__
--|--
|
This chapter completes the discussion of various IPv6 address types, while showing how to enable IPv6 on interfaces.|В этой главе завершается обсуждение различных типов адресов IPv6 и показано, как включить IPv6 на интерфейсах.
Many implementations will use the ipv6 address command on each router LAN interface, and either that same command or the ipv6 enable command on the WAN interfaces.|Многие реализации будут использовать команду адреса ipv6 на каждом интерфейсе локальной сети маршрутизатора и ту же самую команду или команду ipv6 enable на интерфейсах глобальной сети.
For exam prep, Table 24-5 summarizes the various commands and the automatically generated IPv6 addresses in one place for review and study.|Для подготовки к экзамену в Табл. 24-5 собраны различные команды и автоматически сгенерированные адреса IPv6, которые можно просмотреть и изучить.
|
Table 24-5 Summary of IPv6 Address Types and the Commands That Create Them Table end.|Таблица 24-5 Сводка типов адресов IPv6 и команд, которые их создают. Таблица end.
### Chapter Review
Обзор главы   
__|__
--|--
|
One key to doing well on the exams is to perform repetitive spaced review sessions.|Один из ключей к успешной сдаче экзаменов - повторение повторных сессий с интервалом.
Review this chapter’s material using either the tools in the book or interactive tools for the same material found on the book’s companion website.|Просмотрите материал этой главы, используя инструменты из книги или интерактивные инструменты для тех же материалов, которые можно найти на сопутствующем веб-сайте книги.
Refer to the “Your Study Plan” element for more details.|Обратитесь к элементу «Ваш учебный план» для получения более подробной информации.
Table 24-6 outlines the key review elements and where you can find them.|В Таблице 24-6 представлены основные элементы обзора и их местонахождение.
To better track your study progress, record when you completed these activities in the second column.|Чтобы лучше отслеживать свои успехи в учебе, отметьте, когда вы выполнили эти задания, во втором столбце.
|
Table 24-6 Chapter Review Tracking Table end.|Таблица 24-6 Окончание таблицы отслеживания обзора главы.
|
Review All the Key Topics Key Terms You Should Know anycast address, dual stacks, EUI-64, link-local address, link-local scope, link-local multicast address, site-local scope, organization-local scope, interface-local scope, IPv6 address scope, solicited-node multicast address, all-nodes multicast address, all-routers multicast address, subnet-router anycast address Additional Practice for This Chapter’s Processes For additional practice with IPv6 abbreviations, you may do the same set of practice problems using your choice of tools:|Ознакомьтесь со всеми ключевыми темами. Ключевые термины, которые вы должны знать. Anycast-адрес, двойные стеки, EUI-64, локальный адрес ссылки, локальная область действия, многоадресный адрес локальной ссылки, область локального сайта, область локальной организации, область действия интерфейса. , Область IPv6-адреса, многоадресный адрес запрошенного узла, многоадресный адрес всех узлов, многоадресный адрес для всех маршрутизаторов, произвольный адрес подсети-маршрутизатора Дополнительная практика для процессов в этой главе Для дополнительной практики с сокращениями IPv6 вы можете выполнить тот же набор практических задач используя ваш выбор инструментов:
|
For additional practice with calculating IPv6 address using EUI-64 rules and finding the solicited-node multicast address based on a unicast address, use the exercises in Appendix options to use:|Для дополнительной практики с вычислением IPv6-адреса с использованием правил EUI-64 и поиском многоадресного адреса запрошенного узла на основе одноадресного адреса используйте упражнения в вариантах приложения, чтобы использовать:
|
PDF: Navigate to the companion website and open the PDF for Appendix H.|PDF: перейдите на сопутствующий веб-сайт и откройте PDF-файл для приложения H.
|
Application: Navigate to the companion website and open the application “Practice Exercise: EUI-64 and Solicited Node Multicast Problems”|Приложение: перейдите на сопутствующий веб-сайт и откройте приложение «Практическое упражнение: EUI-64 и проблемы многоадресной рассылки запрошенных узлов».
|
Additionally, you can create your own problems using any real router or simulator: Get into the router CLI, into configuration mode, and configure the mac-address address and ipv6 address prefix/64 eui-64 command.|Кроме того, вы можете создавать свои собственные проблемы с помощью любого реального маршрутизатора или симулятора: войдите в интерфейс командной строки маршрутизатора, перейдите в режим конфигурации и настройте MAC-адрес и команду префикса IPv6-адреса / 64 eui-64.
Then predict the IPv6 unicast address, link-local address, and solicited-node multicast address; finally, check your predictions against the show ipv6 interface command.|Затем спрогнозируйте индивидуальный адрес IPv6, локальный адрес канала и многоадресный адрес запрошенного узла; наконец, сверьте свои прогнозы с командой show ipv6 interface.
|
Command References Tables 24-8 and 24-9 list configuration and verification commands used in this chapter.|Ссылки на команды В таблицах 24-8 и 24-9 перечислены команды конфигурации и проверки, используемые в этой главе.
As an easy review exercise, cover the left column in a table, read the right column, and try to recall the command without looking.|В качестве простого упражнения на повторение закройте левый столбец таблицы, прочтите правый столбец и попытайтесь вспомнить команду, не глядя.
Then repeat the exercise, covering the right column, and try to recall what the command does.|Затем повторите упражнение, охватывая правый столбец, и попытайтесь вспомнить, что делает команда.
|
Table 24-8 Chapter 24 Configuration Command Reference Table end.|Таблица 24-8 Глава 24 Справочник команд конфигурации Конец таблицы.
|
Table 24-9 Chapter 24 EXEC Command Reference Table end.|Таблица 24-9 Глава 24 Справочник команд EXEC Конец таблицы.
|
Answers to Earlier Practice Problems Table 24-2, earlier in this chapter, listed several practice problems in which you needed to calculate the IPv6 address based on EUI-64 rules.|Ответы на более ранние практические проблемы Таблица 24-2, ранее в этой главе, перечисляла несколько практических проблем, в которых вам нужно было вычислить адрес IPv6 на основе правил EUI-64.
Table 24-10 lists the answers to those problems.|В Таблице 24-10 перечислены ответы на эти проблемы.
|
Table 24-10 Answers to IPv6 EUI-64 Address Creation Practice Table end.|Таблица 24-10. Ответы на вопросы по созданию адресов IPv6 EUI-64 Конец таблицы.
## Chapter 25 Implementing IPv6 Routing
Глава 25 Реализация маршрутизации IPv6   
###### 3.0 IP Connectivity
3.0 IP-подключение   
###### 3.3 Configure and verify IPv4 and IPv6 static routing
3.3 Настройка и проверка статической маршрутизации IPv4 и IPv6   
###### 3.3.a Default route
3.3.a Маршрут по умолчанию   
###### 3.3.b Network route
3.3.b Сетевой маршрут   
###### 3.3.c Host route
3.3.c Хост-маршрут   
###### 3.3.d Floating static
3.3.d Плавающая статика   
__|__
--|--
|
This last chapter in Part VII of the book completes the materials about IPv6 by examining three major topics.|В последней главе части VII книги материалы по IPv6 завершаются рассмотрением трех основных тем.
The first section examines IPv6 connected and local routes, similar to IPv4, showing how a router adds both connected and local routes based on each interface IPv6 address.|В первом разделе исследуются подключенные и локальные маршруты IPv6, аналогичные IPv4, показывая, как маршрутизатор добавляет как подключенные, так и локальные маршруты на основе каждого IPv6-адреса интерфейса.
The second major section of this chapter then looks at how to configure static IPv6 routes by typing in commands, in this case using the ipv6 route command instead of IPv4’s ip route command.|Затем во втором основном разделе этой главы рассматривается, как настроить статические маршруты IPv6 путем ввода команд, в данном случае с помощью команды ipv6 route вместо команды IPv4 ip route.
The final major section examines the Neighbor Discovery Protocol (NDP).|Последний основной раздел исследует протокол обнаружения соседей (NDP).
### “Do I Know This Already?” Quiz
«Знаю ли я это уже?» Викторина   
__|__
--|--
|
Take the quiz (either here or use the PTP software) if you want to use the score to help you decide how much time to spend on this chapter.|Пройдите тест (здесь или воспользуйтесь программой PTP), если вы хотите использовать оценку, чтобы решить, сколько времени потратить на эту главу.
The letter answers are listed at the bottom of the page following the quiz.|Ответы на письма перечислены внизу страницы после викторины.
Appendix C, found both at the end of the book as well as on the companion website, includes both the answers and explanations.|Приложение C, которое можно найти как в конце книги, так и на сопутствующем веб-сайте, включает как ответы, так и пояснения.
You can also find both answers and explanations in the PTP testing software.|Вы также можете найти ответы и пояснения в программе тестирования PTP.
|
Table 25-1 “Do I Know This Already?” Foundation Topics Section-to-Question Mapping|Таблица 25-1 «Знаю ли я это уже?» Сопоставление разделов с вопросами по основным темам
### Foundation Topics
Основные темы   
### Connected and Local IPv6 Routes
Подключенные и локальные маршруты IPv6   
__|__
--|--
|
Static IPv6 Routes 3–6 The Neighbor Discovery Protocol 7–8 Refer to the following figure for questions 1, 3, and 4.|Статические маршруты IPv6 3–6 Протокол обнаружения соседей 7–8 На следующем рисунке приведены вопросы 1, 3 и 4.
|
2000:1:2:56::6 S0/1/1 R5 R6 G0/1 Subnet 2000:1:2:3:: /64 FE80::FF:FE00:6 G0/0 S0/1/0 2000:1:2:56::5 FE80::FF:FE00:5 CHAPTER 25 1.|2000: 1: 2: 56 :: 6 S0 / 1/1 R5 R6 G0 / 1 Подсеть 2000: 1: 2: 3 :: / 64 FE80 :: FF: FE00: 6 G0 / 0 S0 / 1/0 2000: 1: 2: 56 :: 5 FE80 :: FF: FE00: 5 ГЛАВА 25 1.
A router has been configured with the ipv6 address 2000:1:2:3::1/64 command on its G0/1 interface as shown in the figure.|Маршрутизатор был настроен с использованием команды ipv6 address 2000: 1: 2: 3 :: 1/64 на его интерфейсе G0 / 1, как показано на рисунке.
The router creates a link-local address of FE80::FF:FE00:1 as well.|Маршрутизатор также создает локальный адрес канала FE80 :: FF: FE00: 1.
The interface is working.|Интерфейс рабочий.
Which of the following routes will the router add to its IPv6 routing table? (Choose two answers.)|Какой из следующих маршрутов маршрутизатор добавит в свою таблицу маршрутизации IPv6? (Выберите два ответа.)
|
a. A route for 2000:1:2:3::/64 b.|а. Маршрут на 2000 год: 1: 2: 3 :: / 64 б.
A route for FE80::FF:FE00:1/64 c.|Маршрут для FE80 :: FF: FE00: 1/64 гр.
A route for 2000:1:2:3::1/128 d.|Маршрут на 2000 год: 1: 2: 3 :: 1/128 д.
A route for FE80::FF:FE00:1/128 2.|Маршрут для FE80 :: FF: FE00: 1/128 2.
A router has been configured with the ipv6 address 3111:1:1:1::1/64 command on its G0/1 interface and ipv6 address 3222:2:2:2::1/64 on its G0/2 interface.|Маршрутизатор был настроен с использованием команды ipv6 address 3111: 1: 1: 1 :: 1/64 на его интерфейсе G0 / 1 и ipv6-адреса 3222: 2: 2: 2 :: 1/64 на его интерфейсе G0 / 2.
Both interfaces are working.|Оба интерфейса работают.
Which of the following routes would you expect to see in the output of the show ipv6 route connected command? (Choose two answers.)|Какой из следующих маршрутов вы ожидаете увидеть в выходных данных команды show ipv6 route connected? (Выберите два ответа.)
|
a. A route for 3111:1:1:1::/64 b.|а. Маршрут 3111: 1: 1: 1 :: / 64 б.
A route for 3111:1:1:1::1/64 c.|Маршрут 3111: 1: 1: 1 :: 1/64 гр.
A route for 3222:2:2:2::/64 d.|Маршрут для 3222: 2: 2: 2 :: / 64 d.
A route for 3222:2:2:2::2/128 3.|Маршрут для 3222: 2: 2: 2 :: 2/128 3.
An engineer needs to add a static IPv6 route for prefix 2000:1:2:3::/64 to Router R5’s configuration, in the figure shown with question 1.|Инженеру необходимо добавить статический маршрут IPv6 для префикса 2000: 1: 2: 3 :: / 64 в конфигурацию маршрутизатора R5, как показано на рисунке с вопросом 1.
Which of the following answers shows a valid static IPv6 route for that subnet, on Router R5?|Какой из следующих ответов показывает действительный статический маршрут IPv6 для этой подсети на маршрутизаторе R5?
|
a. ipv6 route 2000:1:2:3::/64 S0/1/1 b. ipv6 route 2000:1:2:3::/64 S0/1/0 c. ip route 2000:1:2:3::/64 S0/1/1 d. ip route 2000:1:2:3::/64 S0/1/0 4.|а. ipv6 route 2000: 1: 2: 3 :: / 64 S0 / 1/1 б. ipv6 route 2000: 1: 2: 3 :: / 64 S0 / 1/0 c. ip route 2000: 1: 2: 3 :: / 64 S0 / 1/1 д. IP-маршрут 2000: 1: 2: 3 :: / 64 S0 / 1/0 4.
An engineer needs to add a static IPv6 route for prefix 2000:1:2:3::/64 to Router R5 in the figure shown with question 1.|Инженеру необходимо добавить статический IPv6-маршрут для префикса 2000: 1: 2: 3 :: / 64 к маршрутизатору R5 на рисунке, показанном с вопросом 1.
Which of the following answers shows a valid static IPv6 route for that subnet on Router R5?|Какой из следующих ответов показывает действительный статический маршрут IPv6 для этой подсети на маршрутизаторе R5?
|
a. ipv6 route 2000:1:2:3::/64 2000:1:2:56::5 b. ipv6 route 2000:1:2:3::/64 2000:1:2:56::6 c. ipv6 route 2000:1:2:3::/64 FE80::FF:FE00:5 d. ipv6 route 2000:1:2:3::/64 FE80::FF:FE00:6 5.|а. ipv6 route 2000: 1: 2: 3 :: / 64 2000: 1: 2: 56 :: 5 б. ipv6 route 2000: 1: 2: 3 :: / 64 2000: 1: 2: 56 :: 6 гр. ipv6 route 2000: 1: 2: 3 :: / 64 FE80 :: FF: FE00: 5 d. ipv6 route 2000: 1: 2: 3 :: / 64 FE80 :: FF: FE00: 6 5.
An engineer types the command ipv6 route 2001:DB8:8:8::/64 2001:DB8:9:9::9 129 in configuration mode of Router R1 and presses Enter.|Инженер набирает команду ipv6 route 2001: DB8: 8: 8 :: / 64 2001: DB8: 9: 9 :: 9 129 в режиме конфигурации маршрутизатора R1 и нажимает Enter.
Later, a show ipv6 route command does not list any route for subnet 2001:DB8:8:8::/64.|Позже команда show ipv6 route не выводит список маршрутов для подсети 2001: DB8: 8: 8 :: / 64.
Which of the following could have caused the route to not be in the IPv6 routing table?|Что из перечисленного могло привести к тому, что маршрут не попал в таблицу маршрутизации IPv6?
|
a. The command should be using a next-hop link-local address instead of a global unicast.|а. Команда должна использовать локальный адрес следующего перехода вместо глобальной одноадресной рассылки.
|
b. The command is missing an outgoing interface parameter, so IOS rejected the ipv6 route command.|б. В команде отсутствует параметр исходящего интерфейса, поэтому IOS отклонила команду маршрута ipv6.
|
c. The router has no routes that match 2001:DB8:9:9::9.|c. Маршрутизатор не имеет маршрутов, соответствующих 2001: DB8: 9: 9 :: 9.
|
d. A route for 2001:DB8:8:8::/64 with administrative distance 110 already exists.|d. Маршрут на 2001 год: DB8: 8: 8 :: / 64 с административным расстоянием 110 уже существует.
|
6. The command output shows two routes from the longer output of the show ipv6 route command.|6. В выходных данных команды показаны два маршрута из более длинных выходных данных команды show ipv6 route.
Which answers are true about the output? (Choose two answers.)|Какие ответы верны о выходе? (Выберите два ответа.)
|
R1# show ipv6 route static !|R1 # показывать статический маршрут ipv6!
Legend omitted for brevity S 2001:DB8:2:2::/64 [1/0]|Условные обозначения опущены для краткости S 2001: DB8: 2: 2 :: / 64 [1/0]
|
via 2001:DB8:4:4::4 S ::/0 [1/0]|через 2001: DB8: 4: 4 :: 4 S :: / 0 [1/0]
|
via Serial0/0/1, directly connected a.|через Serial0 / 0/1, напрямую подключен a.
The route to ::/0 is added because of an ipv6 route global command.|Маршрут к :: / 0 добавлен из-за глобальной команды ipv6 route.
|
b. The administrative distance of the route to 2001:DB8:2:2::/64 is 1.|б. Административное расстояние до 2001: DB8: 2: 2 :: / 64 составляет 1.
|
c. The route to ::/0 is added because of an ipv6 address interface subcommand.|c. Маршрут к :: / 0 добавлен из-за подкоманды интерфейса адреса ipv6.
|
d. The route to 2001:DB8:2:2::/64 is added because of an IPv6 routing protocol.|d. Маршрут к 2001: DB8: 2: 2 :: / 64 добавлен из-за протокола маршрутизации IPv6.
|
7. PC1, PC2, and Router R1 all connect to the same VLAN and IPv6 subnet.|7. ПК1, ПК2 и маршрутизатор R1 подключены к одной и той же подсети VLAN и IPv6.
PC1 wants to send its first IPv6 packet to PC2. What protocol or message will PC1 use to discover the MAC address to which PC1 should send the Ethernet frame that encapsulates this IPv6 packet?|ПК1 хочет отправить свой первый пакет IPv6 на ПК2. Какой протокол или сообщение будет использовать ПК1 для обнаружения MAC-адреса, на который ПК1 должен отправить кадр Ethernet, инкапсулирующий этот пакет IPv6?
|
a. ARP b.|а. ARP б.
NDP NS c.|ПНР Н.С. гр.
NDP RS d.|ПНР по РС д.
SLAAC 8.|SLAAC 8.
Which of the following pieces of information does a router supply in an NDP Router Advertisement (RA) message? (Choose two answers.)|Какую из следующих частей информации маршрутизатор предоставляет в сообщении NDP Router Advertisement (RA)? (Выберите два ответа.)
|
a. Router IPv6 address b.|а. IPv6-адрес маршрутизатора b.
Host name of the router c.|Имя хоста маршрутизатора c.
IPv6 prefix(es) on the link d.|Префиксы IPv6 в ссылке d.
IPv6 address of DHCP server Foundation Topics Connected and Local IPv6 Routes A Cisco router adds IPv6 routes to its IPv6 routing table for several reasons.|IPv6-адрес DHCP-сервера Основные темы Подключенные и локальные маршруты IPv6 Маршрутизатор Cisco добавляет маршруты IPv6 в свою таблицу маршрутизации IPv6 по нескольким причинам.
Many of you could predict those reasons at this point in your reading, in part because the logic mirrors the logic routers use for IPv4.|Многие из вас могли бы предсказать эти причины на данном этапе чтения, отчасти потому, что логика отражает логические маршрутизаторы, используемые для IPv4.
Specifically, a router adds IPv6 routes based on the following:|В частности, маршрутизатор добавляет маршруты IPv6 на основе следующего:
###### The configuration of IPv6 addresses on working interfaces (connected and local routes)
Настройка IPv6-адресов на рабочих интерфейсах (подключенных и локальных маршрутах)   
###### The direct configuration of a static route (static routes)
Прямая настройка статического маршрута (статические маршруты)   
###### The configuration of a routing protocol, like OSPFv3, on routers that share the same data
Конфигурация протокола маршрутизации, такого как OSPFv3, на маршрутизаторах, которые используют одни и те же данные.   
__|__
--|--
|
link (dynamic routes)|ссылка (динамические маршруты)
|
The first two sections of this chapter examine the first of these two topics, with discussions of IPv6 routing protocols now residing in the CCNP Enterprise exams.|В первых двух разделах этой главы исследуется первая из этих двух тем, а также обсуждаются протоколы маршрутизации IPv6, которые теперь присутствуют в экзаменах CCNP Enterprise.
#### Rules for Connected and Local Routes
Правила для подключенных и локальных маршрутов   
__|__
--|--
|
Routers add and remove connected routes and local routes, based on the interface configuration and the interface state.|Маршрутизаторы добавляют и удаляют подключенные маршруты и локальные маршруты в зависимости от конфигурации интерфейса и состояния интерфейса.
First, the router looks for any configured unicast addresses on any interfaces by looking for the ipv6 address command.|Сначала маршрутизатор ищет любые настроенные одноадресные адреса на любых интерфейсах, ища команду адреса ipv6.
Then, if the interface is working—if the interface has a “line status is up, protocol status is up” notice in the output of the show interfaces command—the router adds both a connected and local route.|Затем, если интерфейс работает - если интерфейс имеет сообщение «состояние линии работает, состояние протокола - работает» в выходных данных команды show interfaces - маршрутизатор добавляет как подключенный, так и локальный маршрут.
|
NOTE Routers do not create connected or local IPv6 routes for link-local addresses.|ПРИМЕЧАНИЕ Маршрутизаторы не создают подключенные или локальные маршруты IPv6 для локальных адресов.
|
The connected and local routes themselves follow the same general logic as with IPv4.|Сами подключенные и локальные маршруты следуют той же общей логике, что и IPv4.
The connected route represents the subnet connected to the interface, whereas the local route is a host route for only the specific IPv6 address configured on the interface.|Подключенный маршрут представляет подсеть, подключенную к интерфейсу, тогда как локальный маршрут - это маршрут хоста только для определенного адреса IPv6, настроенного на интерфейсе.
|
As an example, consider a router, with a working interface, configured with the ipv6 address 2000:1:1:1::1/64 command.|В качестве примера рассмотрим маршрутизатор с рабочим интерфейсом, настроенный с использованием команды ipv6 address 2000: 1: 1: 1 :: 1/64.
The router will calculate the subnet ID based on this address and prefix length, and it will place a connected route for that subnet (2000:1:1:1::/64) into the routing table.|Маршрутизатор рассчитает идентификатор подсети на основе этого адреса и длины префикса и поместит подключенный маршрут для этой подсети (2000: 1: 1: 1 :: / 64) в таблицу маршрутизации.
The router also takes the listed IPv6 address and creates a host route for that address, with a /128 prefix length. (With IPv4, host routes have a /32 prefix length, while IPv6 uses a /128 prefix length, meaning “exactly this one address.”)|Маршрутизатор также принимает указанный IPv6-адрес и создает для этого адреса маршрут хоста с длиной префикса / 128. (В IPv4 маршруты хоста имеют длину префикса / 32, тогда как IPv6 использует длину префикса / 128, что означает «именно этот адрес».)
|
The following list summarizes the rules about how routers create routes based on the configuration of an interface IPv6 unicast address, for easier review and study:|В следующем списке приведены правила создания маршрутов маршрутизаторами на основе конфигурации одноадресного IPv6-адреса интерфейса для облегчения просмотра и изучения:
|
1. Routers create IPv6 routes based on each unicast IPv6 address on an interface, as configured with the ipv6 address command, as follows:|1. Маршрутизаторы создают маршруты IPv6 на основе каждого одноадресного IPv6-адреса на интерфейсе, как указано с помощью команды ipv6 address, следующим образом:
|
A. The router creates a route for the subnet (a connected route).|A. Маршрутизатор создает маршрут для подсети (подключенный маршрут).
|
B. The router creates a host route (/128 prefix length) for the router IPv6 address (a local route).|Б. Маршрутизатор создает маршрут к хосту (длина префикса / 128) для IPv6-адреса маршрутизатора (локальный маршрут).
|
2. Routers do not create routes based on the link-local addresses associated with the interface.|2. Маршрутизаторы не создают маршруты на основе локальных адресов канала, связанных с интерфейсом.
|
3. Routers remove the connected and local routes for an interface if the interface fails, and they re-add these routes when the interface is again in a working (up/up) state.|3. Маршрутизаторы удаляют подключенные и локальные маршруты для интерфейса, если интерфейс выходит из строя, и повторно добавляют эти маршруты, когда интерфейс снова находится в рабочем (активном / активном) состоянии.
#### Example of Connected IPv6 Routes
Пример подключенных маршрутов IPv6   
__|__
--|--
|
While the concept of connected and local IPv6 routes works much like IPv4 routes, seeing a few examples can certainly help.|Хотя концепция подключенных и локальных маршрутов IPv6 работает так же, как маршруты IPv4, просмотр нескольких примеров, безусловно, может помочь.
To show some sample routes, Figure 25-1 gives the details of one sample internetwork used in this chapter.|Чтобы показать несколько примеров маршрутов, на рис. 25-1 приведены подробности одной примерной объединенной сети, используемой в этой главе.
The figure shows the IPv6 subnet IDs. The upcoming examples focus on the connected and local routes on Router R1.|На рисунке показаны идентификаторы подсети IPv6. В следующих примерах основное внимание уделяется подключенным и локальным маршрутам на маршрутизаторе R1.
|
Figure 25-1 Sample Network Used to Show Connected and Local Routes To clarify the notes in Figure 25-1, note that the figure shows IPv6 prefixes (subnets), with a shorthand notation for the interface IPv6 addresses.|Рисунок 25-1. Пример сети, используемой для отображения подключенных и локальных маршрутов. Чтобы пояснить примечания на рисунке 25-1, обратите внимание, что на рисунке показаны префиксы IPv6 (подсети) с сокращенным обозначением IPv6-адресов интерфейсов.
The figure shows only the abbreviated interface ID portion of each interface address near each interface.|На рисунке показана только сокращенная часть идентификатора интерфейса каждого адреса интерфейса рядом с каждым интерфейсом.
For example, R1’s G0/0 interface address would begin with subnet ID value 2001:DB8:1111:1, added to ::1, for 2001:DB8:1111:1::1.|Например, адрес интерфейса G0 / 0 маршрутизатора R1 будет начинаться со значения идентификатора подсети 2001: DB8: 1111: 1, добавленного к :: 1, для 2001: DB8: 1111: 1 :: 1.
|
Now on to the example of connected routes.|Теперь перейдем к примеру связанных маршрутов.
To begin, consider the configuration of Router R1 from Figure 25-1, as shown in Example 25-1.|Для начала рассмотрим конфигурацию маршрутизатора R1 из рисунка 25-1, как показано в примере 25-1.
The excerpt from the show running-config command on R1 shows three interfaces, all of which are working.|Отрывок из команды show running-config на R1 показывает три интерфейса, все из которых работают.
Also note that no static route or routing protocol configuration exists.|Также обратите внимание, что не существует статического маршрута или конфигурации протокола маршрутизации.
|
Example 25-1 IPv6 Addressing Configuration on Router R1 Example end.|Пример 25-1. Конфигурация адресации IPv6 на маршрутизаторе R1. Пример окончен.
|
Answers to the “Do I Know This Already?” quiz:|Ответы на вопрос «Знаю ли я это уже?» викторина:
|
1 A, C 2 A, C 3 A 4 B 5 C 6 A, B 7 B 8 A, C Based on Figure 25-1 and Example 25-1, R1 should have three connected IPv6 routes, as highlighted in Example 25-2.|1 A, C 2 A, C 3 A 4 B 5 C 6 A, B 7 B 8 A, C На основе рисунка 25-1 и примера 25-1 R1 должен иметь три подключенных маршрута IPv6, как показано в примере 25- 2.
|
Example 25-2 Routes on Router R1 Before Adding Static Routes or Routing Protocols Example end.|Пример 25-2. Маршруты на маршрутизаторе R1 до добавления статических маршрутов или протоколов маршрутизации. Пример конец.
|
All three highlighted routes show the same basic kinds of information, so for discussion, focus on the first pair of highlighted lines, which detail the connected route for subnet 2001:DB8:1111:1::/64.|Все три выделенных маршрута отображают одни и те же основные виды информации, поэтому для обсуждения сосредоточьтесь на первой паре выделенных строк, которые подробно описывают подключенный маршрут для подсети 2001: DB8: 1111: 1 :: / 64.
The first pair of highlighted lines state: The route is a “directly connected” route; the interface ID is GigabitEthernet0/0; and the prefix/length is 2001:DB8:1111:1::/64.|Первая пара выделенных строк указывает: Маршрут является маршрутом с «прямым подключением»; идентификатор интерфейса - GigabitEthernet0 / 0; а префикс / длина - 2001: DB8: 1111: 1 :: / 64.
At the far left, the code letter “C” identifies the route as a connected route (per the legend above).|В крайнем левом углу кодовая буква «C» идентифицирует маршрут как связанный маршрут (согласно легенде выше).
Also note that the numbers in brackets mirror the same ideas as IPv4’s show ip route command: The first number represents the administrative distance, and the second is the metric.|Также обратите внимание, что числа в скобках отражают те же идеи, что и команда show ip route IPv4: первое число представляет административное расстояние, а второе - метрику.
#### Examples of Local IPv6 Routes
Примеры локальных маршрутов IPv6   
__|__
--|--
|
Continuing this same example, three local routes should exist on R1 for the same three interfaces as the connected routes.|Продолжая этот же пример, на R1 должны существовать три локальных маршрута для тех же трех интерфейсов, что и подключенные маршруты.
Indeed, that is the case, with one extra local route for other purposes.|Действительно, это так, с одним дополнительным местным маршрутом для других целей.
Example 25-3 shows only the local routes, as listed by the show ipv6 route local command, with highlights of one particular local route for discussion.|В примере 25-3 показаны только локальные маршруты, перечисленные командой show ipv6 route local, с выделением одного конкретного локального маршрута для обсуждения.
|
Example 25-3 Local IPv6 Routes on Router R1 Example end.|Пример 25-3 Локальные маршруты IPv6 на маршрутизаторе R1 Пример окончен.
|
For the highlighted local route, look for a couple of quick facts.|Чтобы узнать об выделенном местном маршруте, поищите несколько фактов.
First, look back to R1’s configuration in Example 25-1, and note R1’s IPv6 address on its G0/0 interface.|Во-первых, вернитесь к конфигурации R1 в примере 25-1 и обратите внимание на IPv6-адрес R1 на его интерфейсе G0 / 0.
This local route lists the exact same address.|В этом локальном маршруте указан точно такой же адрес.
Also note the /128 prefix length, meaning this route matches packets sent to that address (2001:DB8:1111:1::1), and only that address.|Также обратите внимание на длину префикса / 128, что означает, что этот маршрут соответствует пакетам, отправленным на этот адрес (2001: DB8: 1111: 1 :: 1), и только этому адресу.
|
NOTE While the show ipv6 route local command shows all local IPv6 routes, the show ipv6 route connected command shows all connected routes.|ПРИМЕЧАНИЕ. Хотя команда show ipv6 route local показывает все локальные маршруты IPv6, команда show ipv6 route connected показывает все подключенные маршруты.
### Static IPv6 Routes
Статические маршруты IPv6   
__|__
--|--
|
While routers automatically add connected and local routes based on the interface configuration, static routes require direct configuration with the ipv6 route command.|В то время как маршрутизаторы автоматически добавляют подключенные и локальные маршруты в зависимости от конфигурации интерфейса, статические маршруты требуют прямой настройки с помощью команды ipv6 route.
Simply put, someone configures the command, and the router places the details from the command into a route in the IPv6 routing table.|Проще говоря, кто-то настраивает команду, и маршрутизатор помещает детали из команды в маршрут в таблице маршрутизации IPv6.
|
The ipv6 route command follows the same general logic as does IPv4’s ip route command, as discussed in Chapter 16, “Configuring IPv4 Addressing and Static Routes.” For IPv4, the ip route command starts by listing the subnet ID and mask, so for IPv6, the ipv6 route command begins with the prefix and prefix length.|Команда ipv6 route следует той же общей логике, что и команда ip route IPv4, как описано в главе 16 «Настройка адресации IPv4 и статических маршрутов». Для IPv4 команда ip route начинается с перечисления идентификатора и маски подсети, поэтому для IPv6 команда ipv6 route начинается с префикса и длины префикса.
Then the respective commands list the directions of how this router should forward packets toward that destination subnet or prefix by listing the outgoing interface or the address of the next-hop router.|Затем соответствующие команды перечисляют направления того, как этот маршрутизатор должен пересылать пакеты в эту подсеть или префикс назначения, перечисляя исходящий интерфейс или адрес маршрутизатора следующего перехода.
|
Figure 25-2 shows the concepts behind a single ipv6 route command, demonstrating the concepts behind a static route on Router R1 for the subnet on the right (subnet 2, or 2001:DB8:1111:2::/64).|На рис. 25-2 показаны концепции, лежащие в основе одной команды маршрута ipv6, демонстрирующие концепции статического маршрута на маршрутизаторе R1 для подсети справа (подсеть 2 или 2001: DB8: 1111: 2 :: / 64).
A static route on R1, for this subnet, will begin with ipv6 route 2001:DB8:1111:2::/64, followed by either the outgoing interface (S0/0/0) or the next-hop IPv6 address, or both.|Статический маршрут на R1 для этой подсети будет начинаться с маршрута ipv6 2001: DB8: 1111: 2 :: / 64, за которым следует либо исходящий интерфейс (S0 / 0/0), либо IPv6-адрес следующего перехода, либо оба. .
|
Now that you understand the big ideas with IPv6 static routes, the next few pages walk you through a series of examples.|Теперь, когда вы понимаете основные идеи статических маршрутов IPv6, на следующих нескольких страницах вы познакомитесь с рядом примеров.
In particular, the examples look at configuring static routes with an outgoing interface, then with a next-hop global unicast address, and then with a next-hop link-local address.|В частности, в примерах рассматривается настройка статических маршрутов с исходящим интерфейсом, затем с глобальным одноадресным адресом следующего прыжка, а затем с локальным адресом ссылки следующего прыжка.
This section ends with a discussion of static IPv6 default routes.|В конце этого раздела обсуждаются статические маршруты IPv6 по умолчанию.
|
Figure 25-2 Logic Behind IPv6 Static Route Commands (IPv6 Route)|Рисунок 25-2 Логика команд статического маршрута IPv6 (Маршрут IPv6)
#### Static Routes Using the Outgoing Interface
Статические маршруты с использованием исходящего интерфейса   
__|__
--|--
|
This first IPv6 static route example uses the outgoing interface option.|В этом первом примере статического маршрута IPv6 используется параметр исходящего интерфейса.
As a reminder, for both IPv4 and IPv6 static routes, when the command references an interface, the interface is a local interface.|Напоминаем, что для статических маршрутов IPv4 и IPv6, когда команда ссылается на интерфейс, интерфейс является локальным.
That is, it is an interface on the router where the command is added.|То есть это интерфейс на маршрутизаторе, куда добавляется команда.
In this case, as shown in Figure 25-2, R1’s ipv6 route command would use interface S0/0/0, as shown in Example 25-4.|В этом случае, как показано на рисунке 25-2, команда ipv6 route маршрутизатора R1 будет использовать интерфейс S0 / 0/0, как показано в примере 25-4.
|
Example 25-4 Static IPv6 Routes on Router R1 Example end.|Пример 25-4 Статические маршруты IPv6 на маршрутизаторе R1 Пример окончен.
|
While Example 25-4 shows the correct syntax of the route, if using static routes throughout this internetwork, more static routes are needed.|Хотя в примере 25-4 показан правильный синтаксис маршрута, при использовании статических маршрутов во всей этой межсетевой сети требуется больше статических маршрутов.
For example, to support traffic between hosts A and B, R1 is now prepared.|Например, для поддержки трафика между хостами A и B теперь подготовлен R1.
Host A will forward all its IPv6 packets to its default router (R1), and R1 can now route those packets out S0/0/0 to R2 next.|Хост A будет перенаправлять все свои пакеты IPv6 на свой маршрутизатор по умолчанию (R1), а R1 теперь может направлять эти пакеты из S0 / 0/0 на следующий маршрутизатор R2.
However, Router R2 does not yet have a route back to host A’s subnet, subnet 1 (2001:DB8:1111:1::/64), so a complete solution requires more routes.|Однако маршрутизатор R2 еще не имеет обратного маршрута к подсети хоста A, подсети 1 (2001: DB8: 1111: 1 :: / 64), поэтому для полного решения требуется больше маршрутов.
|
Example 25-5 solves this problem by giving Router R2 a static route for subnet 1 (2001:DB8:1111:1::/64).|Пример 25-5 решает эту проблему, предоставляя маршрутизатору R2 статический маршрут для подсети 1 (2001: DB8: 1111: 1 :: / 64).
After this route is added, hosts A and B should be able to ping each other.|После добавления этого маршрута узлы A и B должны иметь возможность пинговать друг друга.
|
Example 25-5 Static IPv6 Routes on Router R2 Example end.|Пример 25-5. Статические маршруты IPv6 на маршрутизаторе R2. Пример окончен.
|
Many options exist for verifying the existence of the static route and testing whether hosts can use the route. ping and traceroute can test connectivity.|Существует множество вариантов для проверки существования статического маршрута и проверки того, могут ли хосты использовать этот маршрут. ping и traceroute могут проверить подключение.
From the router command line, the show ipv6 route command will list all the IPv6 routes.|В командной строке маршрутизатора команда show ipv6 route выведет список всех маршрутов IPv6.
The shorter output of the show ipv6 route static command, which lists only static routes, could also be used; Example 25-6 shows that output, with the legend omitted.|Можно также использовать более короткий вывод статической команды show ipv6 route, в которой перечислены только статические маршруты; В примере 25-6 показан этот вывод без пояснения.
|
Example 25-6 Verification of Static Routes Only on R1 Example end.|Пример 25-6 Проверка статических маршрутов только на конце примера R1.
|
This command lists many facts about the one static route on R1. First, the code “S” in the left column does identify the route as a static route. (However, the later phrase “directly connected”|Эта команда перечисляет множество фактов об одном статическом маршруте на R1. Во-первых, код «S» в левом столбце действительно идентифицирует маршрут как статический. (Однако более поздняя фраза «напрямую связана»
|
might mislead you to think this is a connected route; trust the “S” code.) Note that the prefix (2001:DB8:1111:2::/64) matches the configuration (in Example 25-4), as does the outgoing interface (S0/0/0).|может ввести вас в заблуждение, если вы подумаете, что это связанный маршрут; доверять коду «S».) Обратите внимание, что префикс (2001: DB8: 1111: 2 :: / 64) соответствует конфигурации (в Примере 25-4), как и исходящий интерфейс (S0 / 0/0).
|
While this command lists basic information about each static route, it does not state whether this route would be used when forwarding packets to a particular destination.|Хотя эта команда перечисляет основную информацию о каждом статическом маршруте, она не указывает, будет ли этот маршрут использоваться при пересылке пакетов в конкретный пункт назначения.
For example, if host A sent an IPv6 packet to host B (2001:DB8:1111:2::22), would R1 use this static route?|Например, если хост A отправил пакет IPv6 хосту B (2001: DB8: 1111: 2 :: 22), будет ли R1 использовать этот статический маршрут?
As it turns out, R1 would use that route, as confirmed by the show ipv6 route 2001:DB8:1111:2::22 command.|Оказывается, R1 будет использовать этот маршрут, что подтверждается командой show ipv6 route 2001: DB8: 1111: 2 :: 22.
This command asks the router to list the route that the router would use when forwarding packets to that particular address.|Эта команда просит маршрутизатор перечислить маршрут, который маршрутизатор будет использовать при пересылке пакетов на этот конкретный адрес.
Example 25-7 shows an example.|Пример 25-7 показывает пример.
|
Example 25-7 Displaying the Route R1 Uses to Forward to Host B Example end.|Пример 25-7. Отображение маршрута, который R1 использует для пересылки к хосту B Пример конец.
#### Static Routes Using Next-Hop IPv6 Address
Статические маршруты с использованием IPv6-адреса следующего перехода   
__|__
--|--
|
The previous example used a serial WAN link on purpose.|В предыдущем примере специально использовался последовательный канал WAN.
With a point-to-point WAN link, the ipv6 route command can use the outgoing interface style of configuration Static IPv6 routes that refer to a next-hop address have two options: the unicast address on the neighboring router (global unicast or unique local) or the link-local address of that same neighboring router.|В случае соединения WAN точка-точка команда ipv6 route может использовать стиль исходящего интерфейса конфигурации. Статические маршруты IPv6, которые ссылаются на адрес следующего перехода, имеют два варианта: одноадресный адрес на соседнем маршрутизаторе (глобальный одноадресный или уникальный локальный). ) или локальный адрес того же соседнего маршрутизатора.
Figure 25-3 spells out those two options with an updated version of Figure 25-2, this time showing Router R2’s global unicast as well as R2’s link-local address.|Рисунок 25-3 описывает эти два варианта с обновленной версией рисунка 25-2, на этот раз показывая глобальную одноадресную рассылку маршрутизатора R2, а также локальный адрес канала R2.
|
Figure 25-3 Using Unicast or Link-Local as the Next-Hop Address for Static Routes The next few pages walk you through examples, first with a global unicast as a next-hop and then with a link-local as a next-hop.|Рис. 25-3. Использование одноадресной рассылки или локальной связи в качестве адреса следующего перехода для статических маршрутов На следующих нескольких страницах вы увидите примеры, сначала с глобальной одноадресной рассылкой в ​​качестве следующего перехода, а затем с локальной связью в качестве следующего перехода. .
##### Example Static Route with a Global Unicast Next-Hop Address
Пример статического маршрута с глобальным одноадресным адресом следующего перехода   
__|__
--|--
|
This example uses the internetwork shown in Figure 25-3, but with the earlier static routes removed.|В этом примере используется объединенная сеть, показанная на рисунке 25-3, но с удаленными ранее статическими маршрутами.
That is, both routers have only connected and local routes to begin the example.|То есть у обоих маршрутизаторов есть только подключенные и локальные маршруты, чтобы начать пример.
|
In Example 25-8, both R1 and R2 add static routes that refer to the neighbor’s global unicast address.|В примере 25-8 и R1, и R2 добавляют статические маршруты, которые ссылаются на глобальный одноадресный адрес соседа.
R1 adds a route for subnet 2 (on the right), while R2 adds a route for subnet 1 (on the left).|R1 добавляет маршрут для подсети 2 (справа), а R2 добавляет маршрут для подсети 1 (слева).
Note that the example shows routes in both directions so that the two hosts can send packets to each other.|Обратите внимание, что в примере показаны маршруты в обоих направлениях, так что два хоста могут отправлять пакеты друг другу.
|
Example 25-8 Static IPv6 Routes Using Global Unicast Addresses Example end.|Пример 25-8 Статические маршруты IPv6 с использованием глобальных одноадресных адресов Пример конец.
|
The ipv6 route command itself is relatively straightforward.|Сама по себе команда ipv6 route относительно проста.
Focus on R1’s route, which matches the logic shown in Figure 25-3.|Сосредоточьтесь на маршруте R1, который соответствует логике, показанной на рисунке 25-3.
The command lists subnet 2 (2001:DB8:1111:2::/64).|Команда отображает подсеть 2 (2001: DB8: 1111: 2 :: / 64).
|
It then lists R2’s global unicast address (ending in 4::2).|Затем он перечисляет глобальный одноадресный адрес R2 (заканчивающийся на 4 :: 2).
|
The verification commands on R1, as shown in Example 25-9, list the usual information.|Команды проверки на R1, как показано в примере 25-9, содержат обычную информацию.
|
Example 25-9 shows two commands, first listing R1’s only static route (the one configured in Example 25-8).|В примере 25-9 показаны две команды, первая из которых перечисляет единственный статический маршрут R1 (настроенный в примере 25-8).
The end of the example lists the show ipv6 route 2001:DB8:1111:2::22 command, which lists the route R1 uses when forwarding packets to Host B, proving that R1 uses this new static route when forwarding packets to that host.|В конце примера приводится команда show ipv6 route 2001: DB8: 1111: 2 :: 22, в которой указывается маршрут, который R1 использует при пересылке пакетов на хост B, доказывая, что R1 использует этот новый статический маршрут при пересылке пакетов на этот хост.
|
Example 25-9 Verification of Static Routes to a Next-Hop Global Unicast Address Example end.|Пример 25-9. Проверка статических маршрутов до глобального одноадресного адреса следующего перехода. Пример конец.
##### Example Static Route with a Link-Local Next-Hop Address
Пример статического маршрута с локальным адресом следующего перехода   
__|__
--|--
|
Static routes that refer to a neighbor’s link-local address work a little like both of the preceding two styles of static routes.|Статические маршруты, которые ссылаются на локальный для канала адрес соседа, работают примерно так же, как и оба предыдущих стиля статических маршрутов.
First, the ipv6 route command refers to a next-hop address, namely a link-local address.|Во-первых, команда ipv6 route ссылается на адрес следующего перехода, а именно на локальный адрес ссылки.
However, the command must also refer to the router’s local outgoing interface.|Однако команда также должна относиться к локальному исходящему интерфейсу маршрутизатора.
Why both?|Почему оба?
The ipv6 route command cannot simply refer to a link-local next-hop address by itself because the link-local address does not, by itself, tell the local router which outgoing interface to use.|Команда ipv6 route не может просто ссылаться на локальный для ссылки адрес следующего перехода сама по себе, поскольку локальный для ссылки адрес сам по себе не сообщает локальному маршрутизатору, какой исходящий интерфейс использовать.
|
Interestingly, when the ipv6 route command refers to a global unicast next-hop address, the router can deduce the outgoing interface.|Интересно, что когда команда ipv6 route ссылается на глобальный одноадресный адрес следующего перехода, маршрутизатор может определить исходящий интерфейс.
For example, the earlier example on R1, as shown in Example 25-8, shows R1 with a static IPv6 route with a next-hop IPv6 address of 2001:DB8:1111:4::2.|Например, предыдущий пример на R1, показанный в примере 25-8, показывает R1 со статическим маршрутом IPv6 с IPv6-адресом следующего перехода 2001: DB8: 1111: 4 :: 2.
R1 can look at its IPv6 routing table, see its connected route that includes this 2001:DB8:1111:4::2 address, and see a connected route off R1’s S0/0/0.|R1 может просмотреть свою таблицу маршрутизации IPv6, увидеть свой подключенный маршрут, который включает этот адрес 2001: DB8: 1111: 4 :: 2, и увидеть подключенный маршрут от S0 / 0/0 маршрутизатора R1.
As a result, with a next-hop global unicast address, R1 can deduce the correct outgoing interface (R1’s S0/0/0).|В результате с помощью глобального одноадресного адреса следующего перехода R1 может определить правильный исходящий интерфейс (S0 / 0/0 R1).
|
With a link-local next-hop address, a router cannot work through this same logic, so the outgoing interface must also be configured.|С адресом следующего перехода, локальным для канала, маршрутизатор не может работать по этой же логике, поэтому исходящий интерфейс также должен быть настроен.
Example 25-10 shows the configuration of static routes on R1 and R2, replacements for the two routes previously configured in Example 25-8.|В примере 25-10 показана конфигурация статических маршрутов на R1 и R2, заменяющих два маршрута, ранее настроенных в примере 25-8.
|
Example 25-10 Static IPv6 Routes Using Link-Local Neighbor Addresses Example end.|Пример 25-10. Статические маршруты IPv6 с использованием адресов локальных соседей. Пример конец.
|
Example 25-11 verifies the configuration in Example 25-10 by repeating the show ipv6 route static and show ipv6 route 2001:DB8:1111:2::22 commands used in Example 25-9.|В примере 25-11 проверяется конфигурация из примера 25-10, повторяя команды show ipv6 route static и show ipv6 route 2001: DB8: 1111: 2 :: 22, использованные в примере 25-9.
|
Note that the output from both commands differs slightly in regard to the forwarding details.|Обратите внимание, что вывод обеих команд немного отличается в отношении деталей пересылки.
Because the new commands list both the next-hop address and outgoing interface, the show commands also list both the next-hop (link-local) address and the outgoing interface.|Поскольку в новых командах указывается как адрес следующего перехода, так и исходящий интерфейс, команды show также перечисляют как адрес следующего перехода (локальный для ссылки), так и исходящий интерфейс.
|
If you refer back to Example 25-9, you will see only a next-hop address listed.|Если вы вернетесь к примеру 25-9, вы увидите в списке только адрес следующего перехода.
|
Example 25-11 Verification of Static Routes to a Next-Hop Link-Local Address Example end.|Пример 25-11. Проверка статических маршрутов до локального адреса канала следующего перехода. Пример конец.
##### Static Routes over Ethernet Links
Статические маршруты по каналам Ethernet   
__|__
--|--
|
You might have wondered why the chapter shows examples with a serial link, knowing that most networks use fewer and fewer serial links today.|Вы могли спросить, почему в главе показаны примеры с последовательным соединением, зная, что в большинстве сетей сегодня используется все меньше и меньше последовательных каналов.
Using serial links in the examples avoids one complication when defining static routes that use Ethernet interfaces (LAN or WAN). The next example discusses the issues and shows configuration options for static routes when the outgoing interface is an Ethernet interface.|Использование последовательных каналов в примерах позволяет избежать одной сложности при определении статических маршрутов, использующих интерфейсы Ethernet (LAN или WAN). В следующем примере обсуждаются проблемы и показаны параметры конфигурации для статических маршрутов, когда исходящий интерфейс является интерфейсом Ethernet.
|
To configure a static route that uses an Ethernet interface, the ipv6 route command’s forwarding parameters should always include a next-hop IPv6 address.|Чтобы настроить статический маршрут, использующий интерфейс Ethernet, параметры пересылки команды ipv6 route всегда должны включать IPv6-адрес следующего перехода.
IOS allows you to configure the ipv6 route command using only the outgoing-interface parameter, without listing a next-hop address.|IOS позволяет настраивать команду ipv6 route, используя только параметр outgoing-interface, без указания адреса следующего перехода.
The router will accept the command; however, if that outgoing interface happens to be an Ethernet interface, the router cannot successfully forward IPv6 packets using the route.|Маршрутизатор примет команду; однако, если этот исходящий интерфейс является интерфейсом Ethernet, маршрутизатор не может успешно пересылать пакеты IPv6, используя маршрут.
|
To configure the ipv6 route correctly when directing packets out an Ethernet interface, the configuration should use one of these styles:|Чтобы правильно настроить маршрут ipv6 при перенаправлении пакетов через интерфейс Ethernet, конфигурация должна использовать один из следующих стилей:
###### Refer to the next-hop global unicast address (or unique local address) only
Ссылаться только на глобальный одноадресный адрес следующего перехода (или уникальный локальный адрес)   
###### Refer to both the outgoing interface and next-hop global unicast address (or unique local
Обращайтесь как к исходящему интерфейсу, так и к глобальному одноадресному адресу следующего перехода (или уникальному локальному   
__|__
--|--
|
address)|адрес)
###### Refer to both the outgoing interface and next-hop link-local address
Обращайтесь как к исходящему интерфейсу, так и к локальному адресу ссылки следующего перехода   
__|__
--|--
|
Example 25-12 shows a sample configuration from routers R1 and R3 in Figure 25-4.|В примере 25-12 показан пример конфигурации маршрутизаторов R1 и R3 на рисунке 25-4.
The top part of the figure shows the details for R1’s route to the subnet on the right side of the figure, with the details labeled with an “A.” The bottom half shows the details for R3’s route to the LAN subnet on the left of the figure, labeled with a “B.”.|В верхней части рисунка показаны детали маршрута маршрутизатора R1 к подсети в правой части рисунка, при этом детали отмечены буквой «А». В нижней половине показаны детали маршрута маршрутизатора R3 к подсети LAN в левой части рисунка, помеченные буквой «B».
|
Figure 25-4 Network Details for IPv6 Static Routes on an Ethernet Interface Example 25-12 Static IPv6 Routes with an Ethernet WAN Interface Example end.|Рисунок 25-4 Сетевые детали для статических маршрутов IPv6 на примере интерфейса Ethernet 25-12 Статические маршруты IPv6 с интерфейсом Ethernet WAN Пример конец.
#### Static Default Routes
Статические маршруты по умолчанию   
__|__
--|--
|
IPv6 supports a default route concept, similar to IPv4.|IPv6 поддерживает концепцию маршрута по умолчанию, аналогичную IPv4.
The default route tells the router what to do with an IPv6 packet when the packet matches no other IPv6 route.|Маршрут по умолчанию сообщает маршрутизатору, что делать с пакетом IPv6, если пакет не соответствует ни одному другому маршруту IPv6.
The logic is pretty basic:|Логика довольно проста:
###### With no default route, the router discards the IPv6 packet.
При отсутствии маршрута по умолчанию маршрутизатор отбрасывает пакет IPv6.   
###### With a default route, the router forwards the IPv6 packet based on the default route.
При использовании маршрута по умолчанию маршрутизатор пересылает пакет IPv6 на основе маршрута по умолчанию.   
__|__
--|--
|
Default routes can be particularly useful in a couple of network design cases.|Маршруты по умолчанию могут быть особенно полезны в нескольких случаях проектирования сети.
For example, with an enterprise network design that uses a single router at each branch office, with one WAN link to each branch, the branch routers have only one possible path over which to forward packets.|Например, в структуре корпоративной сети, в которой используется один маршрутизатор в каждом филиале с одним WAN-каналом для каждого филиала, маршрутизаторы филиала имеют только один возможный путь для пересылки пакетов.
In a large network, when using a routing protocol, the branch router could learn thousands of routes—all of which point back toward the core of the network over that one WAN link.|В большой сети при использовании протокола маршрутизации маршрутизатор филиала может изучить тысячи маршрутов, каждый из которых указывает на ядро ​​сети по одному каналу WAN.
|
Branch routers could use default routes instead of a routing protocol.|Маршрутизаторы филиалов могут использовать маршруты по умолчанию вместо протокола маршрутизации.
The branch router would forward all traffic to the core of the network.|Маршрутизатор филиала будет перенаправлять весь трафик в ядро ​​сети.
Figure 25-5 shows just such an example, with two sample branch routers on the right and a core site router on the left.|На рис. 25-5 показан именно такой пример с двумя типовыми маршрутизаторами ответвлений справа и маршрутизатором основного сайта слева.
|
Figure 25-5 Using Static Default Routes at Branches to Forward Back to the Core To configure a static default route, use the same rules already discussed in this section of the chapter, but use a specific value to note the route as a default route: ::/0.|Рисунок 25-5. Использование статических маршрутов по умолчанию в ветвях для перенаправления обратно в ядро. Чтобы настроить статический маршрут по умолчанию, используйте те же правила, которые уже обсуждались в этом разделе главы, но используйте конкретное значение, чтобы отметить маршрут как маршрут по умолчанию: :: / 0.
Taken literally, the double colon (::) is the IPv6 abbreviation for all 0s, and the /0 means the prefix length is 0.|Буквально двойное двоеточие (: :) - это аббревиатура IPv6 для всех нулей, а / 0 означает, что длина префикса равна 0.
|
This idea mirrors the IPv4 convention to refer to the default route as 0.0.0.0/0.|Эта идея отражает соглашение IPv4 о маршруте по умолчанию как 0.0.0.0/0.
Otherwise, just configure the ipv6 route command as normal.|В противном случае просто настройте команду ipv6 route как обычно.
|
Example 25-13 shows one such sample static default route on Router B1 from Figure 25-5.|В примере 25-13 показан один из таких примеров статического маршрута по умолчанию на маршрутизаторе B1 с рисунка 25-5.
|
This example uses the outgoing interface option.|В этом примере используется параметр исходящего интерфейса.
|
Example 25-13 Static Default Route for Branch Router B1 Example end.|Пример 25-13 Статический маршрут по умолчанию для маршрутизатора ответвления B1 Пример end.
|
With IPv6, the router displays the default a little more cleanly than with IPv4.|С IPv6 маршрутизатор отображает настройки по умолчанию немного более четко, чем с IPv4.
The show ipv6 route command simply includes the route in the output of the command, along with the other routes.|Команда show ipv6 route просто включает маршрут в выходные данные команды вместе с другими маршрутами.
Example 25-14 shows an example, with “::/0” listed to denote this route as the default route.|В примере 25-14 показан пример с указанием «:: / 0» для обозначения этого маршрута как маршрута по умолчанию.
|
Example 25-14 Router B1’s Static Default Route (Using Outgoing Interface)|Пример 25-14 Статический маршрут по умолчанию маршрутизатора B1 (с использованием исходящего интерфейса)
|
Example end.|Пример конец.
#### Static IPv6 Host Routes
Маршруты статических IPv6-хостов   
__|__
--|--
|
Both IPv4 and IPv6 allow the definition of static host routes—that is, a route to a single host IP address.|И IPv4, и IPv6 позволяют определять статические маршруты хоста, то есть маршрут к одному IP-адресу хоста.
With IPv4, those routes use a /32 mask, which identifies a single IPv4 address in the ip route command; with IPv6, a /128 mask identifies that single host in the ipv6 route command.|В IPv4 эти маршруты используют маску / 32, которая идентифицирует единственный IPv4-адрес в команде ip route; с IPv6 маска / 128 идентифицирует этот единственный хост в команде маршрута ipv6.
|
A host route follows the same rules as a route for any other IPv6 subnet.|Маршрут к хосту подчиняется тем же правилам, что и маршрут для любой другой подсети IPv6.
For instance, if you refer back to Figure 25-3, host B sits on the right side of the figure.|Например, если вы вернетесь к рисунку 25-3, хост B находится в правой части рисунка.
Earlier examples showed R1’s static routes for the subnet in which host B resides—for example, the routes for Router R1 in Examples 25-8 and 25-10.|В предыдущих примерах были показаны статические маршруты маршрутизатора R1 для подсети, в которой находится хост B, например маршруты для маршрутизатора R1 в примерах 25-8 и 25-10.
To create a host route on R1, referring to host B’s specific IPv6 address, just change those commands to refer to host B’s entire IPv6 address (2001:DB8:1111:2::22), with prefix length /128.|Чтобы создать маршрут к хосту на R1, ссылаясь на конкретный IPv6-адрес хоста B, просто измените эти команды, чтобы они ссылались на весь IPv6-адрес хоста B (2001: DB8: 1111: 2 :: 22) с длиной префикса / 128.
|
Example 25-15 shows two sample host routes on Router R1. Both define a host route to host B’s IPv6 address as seen in Figure 25-3.|В примере 25-15 показаны два примера маршрутов хоста на маршрутизаторе R1. Оба определяют маршрут хоста к IPv6-адресу хоста B, как показано на рисунке 25-3.
One route uses Router R2’s link-local address as the next-hop address, and one route uses R2’s global unicast address as the next-hop address.|Один маршрут использует локальный адрес канала маршрутизатора R2 в качестве адреса следующего прыжка, а другой маршрут использует глобальный одноадресный адрес R2 в качестве адреса следующего прыжка.
|
Example 25-15 Static Host IPv6 Routes on R1, for Host B Example end.|Пример 25-15 Статические IPv6-маршруты хоста на R1 для хоста B.
#### Floating Static IPv6 Routes
Плавающие статические маршруты IPv6   
__|__
--|--
|
Next, consider the case in which a static route competes with other static routes or routes learned by a routing protocol.|Затем рассмотрим случай, когда статический маршрут конкурирует с другими статическими маршрутами или маршрутами, изученными протоколом маршрутизации.
For example, consider the topology shown in Figure 25-6, which shows a branch office with two WAN links: one very fast Gigabit Ethernet link and one rather slow (but cheap) T1. In this design, the network uses OSPFv3 to learn IPv6 routes over the primary link, learning a route for subnet 2001:DB8:1111:7::/64.|Например, рассмотрим топологию, показанную на рисунке 25-6, где показан филиал с двумя каналами WAN: один очень быстрый канал Gigabit Ethernet и один довольно медленный (но дешевый) T1. В этом проекте сеть использует OSPFv3 для изучения маршрутов IPv6 по первичному каналу, изучая маршрут для подсети 2001: DB8: 1111: 7 :: / 64.
R1 also defines a static route over the backup link to that exact same subnet, so R1 must choose whether to use the static route or the OSPF-learned route.|R1 также определяет статический маршрут по резервному каналу к той же самой подсети, поэтому R1 должен выбрать, использовать ли статический маршрут или маршрут, полученный с помощью OSPF.
|
Figure 25-6 Using a Floating Static Route to Key Subnet 2001:DB8:1111:7::/64 IOS considers static routes better than OSPF-learned routes by default due to administrative distance.|Рисунок 25-6. Использование плавающего статического маршрута к ключевой подсети 2001: DB8: 1111: 7 :: / 64 IOS по умолчанию считает статические маршруты лучше, чем маршруты, полученные с помощью OSPF, из-за административной удаленности.
IOS uses the same administrative distance concept and default values for IPv6 as it does for IPv4.|IOS использует ту же концепцию административного расстояния и значения по умолчанию для IPv6, что и для IPv4.
As a result, a static IPv6 route over the lower path would be given an administrative distance of 1, and an OSPFv3-learned route over the top path would be given an administrative distance of 110.|В результате статическому маршруту IPv6 по нижнему пути будет присвоено административное расстояние 1, а для маршрута, полученного OSPFv3 по верхнему пути, будет задано административное расстояние 110.
R1 would use the lower path to reach subnet 2001:DB8:1111:7::/64 in this case, which is not the intended design.|В этом случае R1 будет использовать нижний путь для достижения подсети 2001: DB8: 1111: 7 :: / 64, что не является предполагаемой схемой.
Instead, the engineer prefers to use the OSPF-learned routes over the much-faster primary link and use the static route over the backup link only as needed when the primary link fails.|Вместо этого инженер предпочитает использовать маршруты, изученные OSPF, по гораздо более быстрому первичному каналу и использовать статический маршрут по резервному каналу только по мере необходимости, когда первичный канал выходит из строя.
|
To instead prefer the OSPF routes, the configuration would need to change the administrative distance settings and use what many networkers call a floating static route.|Чтобы вместо этого отдавать предпочтение маршрутам OSPF, в конфигурации необходимо изменить настройки административного расстояния и использовать то, что многие сетевики называют плавающим статическим маршрутом.
Like an IPv4 floating static route, an IPv6 floating static route floats or moves into and out of the IPv6 routing table depending on whether the better (lower) administrative distance route learned by the routing protocol happens to exist currently.|Как и плавающий статический маршрут IPv4, плавающий статический маршрут IPv6 перемещается или перемещается в таблицу маршрутизации IPv6 и из нее в зависимости от того, существует ли в настоящее время лучший (меньший) маршрут административного расстояния, полученный протоколом маршрутизации.
Basically, the router ignores the static route during times when the better routing protocol route is known.|По сути, маршрутизатор игнорирует статический маршрут в то время, когда известен лучший маршрут протокола маршрутизации.
|
To implement an IPv6 floating static route, just override the default administrative distance on the static route, making the value larger than the default administrative distance of the routing protocol.|Чтобы реализовать плавающий статический маршрут IPv6, просто переопределите административное расстояние по умолчанию на статическом маршруте, сделав это значение больше, чем административное расстояние по умолчанию для протокола маршрутизации.
For example, the ipv6 route 2001:db8:1111:7::/64 2001:db8:1111:9::3 130 command on R1 would do exactly that, setting the static route’s administrative distance to 130.|Например, команда ipv6 route 2001: db8: 1111: 7 :: / 64 2001: db8: 1111: 9 :: 3 130 на маршрутизаторе R1 сделает именно это, установив административное расстояние статического маршрута равным 130.
As long as the primary link (G0/0) stays up, and OSPFv3 on R1 learns a route for 2001:db8:1111:7::/64 with OSPF’s default administrative distance of 110, R1 ignores the static route whose administrative distance is explicitly configured as 130.|Пока основной канал (G0 / 0) работает и OSPFv3 на R1 изучает маршрут для 2001: db8: 1111: 7 :: / 64 с административным расстоянием OSPF по умолчанию 110, R1 игнорирует статический маршрут, административное расстояние которого равно явно настроен как 130.
|
Finally, note that both the show ipv6 route and show ipv6 route 2001:db8:1111:7::/64 commands list the administrative distance.|Наконец, обратите внимание, что команды show ipv6 route и show ipv6 route 2001: db8: 1111: 7 :: / 64 указывают административное расстояние.
Example 25-16 shows a sample matching this most recent example.|В примере 25-16 показан образец, соответствующий этому последнему примеру.
Note that in this case, the static route is in use in the IPv6 routing table.|Обратите внимание, что в этом случае статический маршрут используется в таблице маршрутизации IPv6.
|
Example 25-16 Displaying the Administrative Distance of the Static Route Example end.|Пример 25-16 Отображение административного расстояния до конца примера статического маршрута.
|
Table 25-2 lists some of the default administrative distance values used with IPv6.|В таблице 25-2 перечислены некоторые значения административного расстояния по умолчанию, используемые с IPv6.
|
Table 25-2 IOS Defaults for Administrative Distance Table end.|Таблица 25-2. Настройки IOS по умолчанию для конца административной таблицы расстояний.
#### Troubleshooting Static IPv6 Routes
Устранение неполадок статических маршрутов IPv6   
__|__
--|--
|
IPv6 static routes have the same potential issues and mistakes as do static IPv4 routes, as discussed in Chapter 16.|Статические маршруты IPv6 имеют те же потенциальные проблемы и ошибки, что и статические маршруты IPv4, как обсуждалось в главе 16.
However, IPv6 static routes do have a few small differences.|Однако статические маршруты IPv6 имеют несколько небольших отличий.
This last part of the static route content in the chapter looks at troubleshooting IPv6 static routes, reviewing many of the same troubleshooting rules applied to IPv4 static routes, while focusing on the details specific to IPv6.|В последней части содержания статических маршрутов в главе рассматривается устранение неполадок статических маршрутов IPv6, рассматриваются многие из тех же правил устранения неполадок, которые применяются к статическим маршрутам IPv4, при этом особое внимание уделяется деталям, характерным для IPv6.
|
This topic breaks static route troubleshooting into two perspectives: cases in which the route is in the routing table but is incorrect, and cases in which the route is not in the routing table.|В этом разделе устранение неполадок статического маршрута разбивается на две части: случаи, когда маршрут есть в таблице маршрутизации, но является неправильным, и случаи, когда маршрут отсутствует в таблице маршрутизации.
##### Troubleshooting Incorrect Static Routes That Appear in the IPv6 Routing Table
Устранение неполадок с неправильными статическими маршрутами, которые появляются в таблице маршрутизации IPv6   
__|__
--|--
|
A static route is only as good as the input typed into the ipv6 route command.|Статический маршрут хорош ровно настолько, насколько хорош ввод, введенный в команду ipv6 route.
IOS checks the syntax of the command, of course.|Конечно, iOS проверяет синтаксис команды.
However, IOS cannot tell if you choose the incorrect outgoing interface, incorrect next-hop address, or incorrect prefix/prefix-length in a static route.|Однако IOS не может определить, выбрали ли вы неправильный исходящий интерфейс, неправильный адрес следующего перехода или неправильную длину префикса / префикса в статическом маршруте.
If the parameters pass the syntax checks, IOS places the ipv6 route command into the running-config file.|Если параметры проходят проверку синтаксиса, IOS помещает команду ipv6 route в файл рабочей конфигурации.
Then, if no other problem exists (as discussed at the next heading), IOS puts the route into the IP routing table—even though the route may not work because of the poorly chosen parameters.|Затем, если другой проблемы не существует (как обсуждается в следующем заголовке), IOS помещает маршрут в таблицу IP-маршрутизации, даже если маршрут может не работать из-за плохо выбранных параметров.
|
For instance, an exam question might show a figure with Router R1 having an address of 2001:1:1:1::1 and neighboring Router R2 with an address of 2001:1:1:1::2.|Например, в экзаменационном вопросе может отображаться число с маршрутизатором R1, имеющим адрес 2001: 1: 1: 1 :: 1, и соседним маршрутизатором R2 с адресом 2001: 1: 1: 1 :: 2.
If R1 lists a static route with the command ipv6 route 3333::/64 2001:1:1:1::1, the command would be accepted by IOS with correct syntax, but it would not be effective as a route.|Если R1 перечисляет статический маршрут с помощью команды ipv6 route 3333 :: / 64 2001: 1: 1: 1 :: 1, команда будет принята IOS с правильным синтаксисом, но не будет эффективна в качестве маршрута.
Note that the command lists R1’s address as the next-hop address, and R1 cannot use its own IPv6 address as a next-hop address.|Обратите внимание, что команда указывает адрес R1 как адрес следующего перехода, а R1 не может использовать свой собственный IPv6-адрес в качестве адреса следующего перехода.
IOS does not prevent the configuration of the command, however; it allows the command and adds the route to the IPv6 routing table, but the route cannot possibly forward packets correctly.|Однако IOS не препятствует настройке команды; он разрешает команду и добавляет маршрут в таблицу маршрутизации IPv6, но маршрут не может правильно пересылать пакеты.
|
When you see an exam question that has static routes, and you see them in the output of show ipv6 route, remember that the routes may have incorrect parameters.|Когда вы видите вопрос экзамена со статическими маршрутами и видите их в выходных данных команды show ipv6 route, помните, что маршруты могут иметь неверные параметры.
Check for these types of mistakes:|Проверьте эти типы ошибок:
|
Step 1.|Шаг 1.
Prefix/Length: Does the ipv6 route command reference the correct subnet ID (prefix) and mask (prefix length)?|Префикс / длина: указывает ли команда маршрута ipv6 на правильный идентификатор подсети (префикс) и маску (длину префикса)?
|
Step 2.|Шаг 2.
If using a next-hop IPv6 address that is a link-local address:|Если используется IPv6-адрес следующего перехода, который является локальным адресом ссылки:
|
A. Is the link-local address an address on the correct neighboring router? (It should be an address on another router on a shared link.)|A. Является ли локальный адрес канала адресом правильного соседнего маршрутизатора? (Это должен быть адрес другого маршрутизатора по общему каналу.)
|
B. Does the ipv6 route command also refer to the correct outgoing interface on the local router?|Б. Указывает ли команда ipv6 route также на правильный исходящий интерфейс на локальном маршрутизаторе?
|
Step 3.|Шаг 3.
If using a next-hop IPv6 address that is a global unicast or unique local address, is the address the correct unicast address of the neighboring router?|Если используется IPv6-адрес следующего перехода, который является глобальным одноадресным или уникальным локальным адресом, является ли этот адрес правильным одноадресным адресом соседнего маршрутизатора?
|
Step 4.|Шаг 4.
If referencing an outgoing interface, does the ipv6 route command reference the interface on the local router (that is, the same router where the static route is configured)?|При ссылке на исходящий интерфейс, указывает ли команда маршрута ipv6 на интерфейс на локальном маршрутизаторе (то есть на тот же маршрутизатор, на котором настроен статический маршрут)?
|
This troubleshooting checklist works through the various cases in which IOS would accept the configuration of the static IPv6 route, but the route would not work because of the incorrect parameters in context.|Этот контрольный список для устранения неполадок учитывает различные случаи, когда IOS принимает конфигурацию статического маршрута IPv6, но маршрут не работает из-за неверных параметров в контексте.
It helps to see a few examples.|Это помогает увидеть несколько примеров.
Figure 25-7 shows a sample network to use for the examples; all the examples focus on routes added to Router R1, for the subnet on the far right.|На рис. 25-7 показан образец сети для использования в примерах; все примеры сосредоточены на маршрутах, добавленных к маршрутизатору R1, для подсети справа.
|
Figure 25-7 Sample Topology for Incorrect IPv6 Route Examples Example 25-17 shows five ipv6 route commands.|Рис. 25-7. Пример топологии для неправильного маршрута IPv6. Пример 25-17 показывает пять команд маршрута ipv6.
All have correct syntax, but all have one incorrect value; that is, the route will not work because of the types of problems in the troubleshooting checklist.|Все имеют правильный синтаксис, но все имеют одно неверное значение; то есть маршрут не будет работать из-за типов проблем, указанных в контрольном списке устранения неполадок.
Look for the short comment at the end of each configuration command to see why each is incorrect.|Найдите короткий комментарий в конце каждой команды конфигурации, чтобы понять, почему каждая из них неверна.
|
Example 25-17 IPv6 route Commands with Correct Syntax but Incorrect Ideas Example end.|Пример 25-17. Команды маршрута IPv6 с правильным синтаксисом, но неправильными идеями. Пример конец.
|
All these incorrect examples have correct syntax and would be added to R1’s IPv6 routing table if configured on R1. However, all have flaws.|Все эти неверные примеры имеют правильный синтаксис и будут добавлены в таблицу маршрутизации IPv6 маршрутизатора R1, если настроены на маршрутизаторе R1. Однако у всех есть недостатки.
Working through the examples in order:|Рассмотрим примеры по порядку:
|
Step 1.|Шаг 1.
The prefix (2001:DB8:9:33::) has a typo in the fourth quartet (33 instead of 3).|В префиксе (2001: DB8: 9: 33: :) есть опечатка в четвертом квартете (33 вместо 3).
|
Step 2A.|Шаг 2А.
The figure shows R2’s G0/1 with link-local address FE80::2, but the command uses FE80::AAA9.|На рисунке показан G0 / 1 R2 с локальным адресом канала FE80 :: 2, но в команде используется FE80 :: AAA9.
|
Step 2B.|Шаг 2Б.
The command uses the correct link-local address on R2’s address on the common link (FE80::2 per the figure), but it omits the outgoing interface of R1’s G0/2 interface. (See the next example for more detail.)|Команда использует правильный локальный адрес канала на адресе R2 в общем канале (FE80 :: 2 на рисунке), но пропускает исходящий интерфейс интерфейса G0 / 2 маршрутизатора R1. (Подробнее см. Следующий пример.)
|
Step 3.|Шаг 3.
The figure shows the subnet in the center as 2001:DB8:9:2::/64, with R1 using the ::1 address and R2 using ::2.|На рисунке показана подсеть в центре как 2001: DB8: 9: 2 :: / 64, причем R1 использует адрес :: 1, а R2 использует :: 2.
For the fourth command, R1’s command should use R2’s address 2001:DB8:9:2::2, but it uses R1’s own 2001:DB8:9:2::1 address instead.|Для четвертой команды команда R1 должна использовать адрес R2 2001: DB8: 9: 2 :: 2, но вместо этого она использует собственный адрес R1 2001: DB8: 9: 2 :: 1.
|
Step 4.|Шаг 4.
As a command on R1, the outgoing interface references R1’s own interfaces.|В качестве команды на R1 исходящий интерфейс ссылается на собственные интерфейсы R1.
R1’s G0/1 is the interface on the left, whereas R1 should use its G0/2 interface on the right when forwarding packets to subnet 2001:DB8:9:3::/64.|G0 / 1 маршрутизатора R1 - это интерфейс слева, в то время как R1 должен использовать свой интерфейс G0 / 2 справа при пересылке пакетов в подсеть 2001: DB8: 9: 3 :: / 64.
|
The key takeaway for this section is to know that a route in the IPv6 routing table may be incorrect due to poor choices for the parameters.|Ключевой вывод из этого раздела - знать, что маршрут в таблице маршрутизации IPv6 может быть неправильным из-за неправильного выбора параметров.
The parameters should always include the neighboring router’s IPv6 addresses, but the local router’s interface type/number, and in all cases, the correct prefix/length.|Параметры всегда должны включать IPv6-адреса соседнего маршрутизатора, но тип / номер интерфейса локального маршрутизатора и во всех случаях правильный префикс / длину.
The fact that a route is in the IPv6 routing table, particularly a static route, does not mean it is a correct route.|Тот факт, что маршрут находится в таблице маршрутизации IPv6, особенно статический маршрут, не означает, что это правильный маршрут.
|
Note that of the five example commands in Example 25-17, IOS would accept all of them except the third one.|Обратите внимание, что из пяти команд в примере 25-17 IOS примет все, кроме третьей.
IOS can notice the case of omitting the outgoing interface if the nexthop address is a link-local address.|IOS может заметить случай пропуска исходящего интерфейса, если адрес nexthop является локальным адресом ссылки.
Example 25-18 shows a sample of the error message from IOS.|В примере 25-18 показан образец сообщения об ошибке от IOS.
|
Example 25-18 IOS Rejects the ipv6 route Command with Link-Local and No Outgoing Example end.|Пример 25-18. IOS отклоняет команду ipv6 route с окончанием Link-Local и No Outgoing Example.
##### The Static Route Does Not Appear in the IPv6 Routing Table
Статический маршрут не отображается в таблице маршрутизации IPv6   
__|__
--|--
|
The preceding few pages focused on IPv6 static routes that show up in the IPv6 routing table but unfortunately have incorrect parameters.|Несколько предыдущих страниц были посвящены статическим маршрутам IPv6, которые отображаются в таблице маршрутизации IPv6, но, к сожалению, имеют неверные параметры.
The next page looks at IPv6 routes that have correct parameters, but IOS does not place them into the IPv6 routing table.|На следующей странице рассматриваются маршруты IPv6 с правильными параметрами, но IOS не помещает их в таблицу маршрутизации IPv6.
|
When you add an ipv6 route command to the configuration, and the syntax is correct, IOS considers that route to be added to the IPv6 routing table.|Когда вы добавляете команду маршрута ipv6 в конфигурацию и синтаксис правильный, IOS считает, что этот маршрут добавляется в таблицу маршрутизации IPv6.
IOS makes the following checks before adding the route; note that IOS uses this same kind of logic for IPv4 static routes:|IOS выполняет следующие проверки перед добавлением маршрута; обратите внимание, что IOS использует ту же логику для статических маршрутов IPv4:
###### For ipv6 route commands that list an outgoing interface, that interface must be in an
Для команд маршрута ipv6, которые перечисляют исходящий интерфейс, этот интерфейс должен быть в   
__|__
--|--
|
up/up state.|состояние вверх / вверх.
###### For ipv6 route commands that list a global unicast or unique local next-hop IP address
Для команд маршрута ipv6, которые перечисляют глобальный одноадресный или уникальный локальный IP-адрес следующего перехода   
__|__
--|--
|
(that is, not a link-local address), the local router must have a route to reach that next-hop address.|(то есть не локальный адрес канала), локальный маршрутизатор должен иметь маршрут для достижения этого адреса следующего перехода.
###### If another IPv6 route exists for that exact same prefix/prefix-length, the static route must
Если существует другой маршрут IPv6 для того же префикса / длины префикса, статический маршрут должен   
__|__
--|--
|
have a better (lower) administrative distance.|иметь лучшую (меньшую) административную дистанцию.
### The Neighbor Discovery Protocol
Протокол обнаружения соседей   
__|__
--|--
|
Similar to ICMP for IPv4, IPv6 defines the ICMP protocol for IPv6 (ICMPv6).|Подобно ICMP для IPv4, IPv6 определяет протокол ICMP для IPv6 (ICMPv6).
However, ICMPv6 reaches further than ICMPv4, pulling in functions done by other miscellaneous protocols in IPv4.|Однако ICMPv6 идет дальше ICMPv4, вбирая в себя функции, выполняемые другими различными протоколами IPv4.
For instance, with IPv4, ARP works as a separate protocol; with IPv6, the Neighbor Discovery Protocol (NDP), a part of ICMPv6, performs the same functions.|Например, с IPv4 ARP работает как отдельный протокол; с IPv6 протокол обнаружения соседей (NDP), являющийся частью ICMPv6, выполняет те же функции.
|
As it turns out, routers play a key role in several NDP protocol functions, so this final major section of the chapter explains a few of the functions of the NDP protocol (RFC 4861).|Оказывается, маршрутизаторы играют ключевую роль в нескольких функциях протокола NDP, поэтому в этом последнем основном разделе главы объясняются некоторые функции протокола NDP (RFC 4861).
|
Some of those NDP functions are Neighbor MAC Discovery: An IPv6 LAN-based host will need to learn the MAC address of other hosts in the same subnet.|Некоторые из этих функций NDP - это обнаружение соседних MAC-адресов: хосту на основе IPv6 LAN необходимо будет узнать MAC-адреса других хостов в той же подсети.
NDP replaces IPv4’s ARP, providing messages that replace the ARP Request and Reply messages.|NDP заменяет протокол ARP IPv4, предоставляя сообщения, которые заменяют сообщения запроса и ответа ARP.
|
Router Discovery: Hosts learn the IPv6 addresses of the available IPv6 routers in the same subnet.|Обнаружение маршрутизатора: хосты изучают адреса IPv6 доступных маршрутизаторов IPv6 в той же подсети.
|
SLAAC: When using Stateless Address Auto Configuration (SLAAC), the host uses NDP messages to learn the subnet (prefix) used on the link plus the prefix length.|SLAAC: при использовании автоматической настройки адреса без сохранения состояния (SLAAC) хост использует сообщения NDP для определения подсети (префикса), используемой в канале связи, а также длины префикса.
|
DAD: Before using an IPv6 address, hosts use NDP to perform a Duplicate Address Detection (DAD) process, to ensure no other host uses the same IPv6 address before attempting to use it.|DAD: перед использованием адреса IPv6 узлы используют NDP для выполнения процесса обнаружения повторяющегося адреса (DAD), чтобы убедиться, что ни один другой узел не использует тот же адрес IPv6 перед попыткой его использования.
#### Discovering Neighbor Link Addresses with NDP NS and NA
Обнаружение адресов соседних каналов с NDP NS и NA   
__|__
--|--
|
NDP replaces IPv4 ARP using a pair of matched solicitation and advertisement messages: the Neighbor Solicitation (NS) and Neighbor Advertisement (NA) messages.|NDP заменяет IPv4 ARP, используя пару совпадающих сообщений запроса и объявления: сообщения Neighbor Solicitation (NS) и Neighbor Advertisement (NA).
Basically, the NS acts like an IPv4 ARP request, asking the host with a particular unicast IPv6 address to send back a reply.|По сути, NS действует как запрос IPv4 ARP, прося хост с конкретным одноадресным IPv6-адресом отправить ответ.
The NA message acts like an IPv4 ARP Reply, listing that host’s MAC address.|Сообщение NA действует как ответ ARP IPv4, в котором указывается MAC-адрес этого хоста.
|
The process of sending the NS and NA messages follows the same general process with IPv4 ARP: the NS message asks for information, and the NA supplies the information, as summarized in this list:|Процесс отправки сообщений NS и NA следует тому же общему процессу с IPv4 ARP: сообщение NS запрашивает информацию, а NA предоставляет информацию, как показано в этом списке:
|
Neighbor Solicitation (NS): This message asks the host with a particular IPv6 address (the target address) to reply with an NA message that lists its MAC address.|Neighbor Solicitation (NS): это сообщение запрашивает у хоста конкретный IPv6-адрес (целевой адрес), чтобы он ответил сообщением NA, в котором указан его MAC-адрес.
The NS message is sent to the solicited-node multicast address associated with the target address, so the message is processed only by hosts whose last six hex digits match the address that is being queried.|Сообщение NS отправляется на многоадресный адрес запрошенного узла, связанный с целевым адресом, поэтому сообщение обрабатывается только теми узлами, последние шесть шестнадцатеричных цифр которых совпадают с запрашиваемым адресом.
|
Neighbor Advertisement (NA): This message lists the sender’s IPv6 and MAC addresses.|Объявление соседа (NA): в этом сообщении перечислены IPv6- и MAC-адреса отправителя.
|
It can be sent in reply to an NS message, and if so, the packet is sent to the IPv6 unicast address of the host that sent the original NS message.|Он может быть отправлен в ответ на сообщение NS, и если это так, пакет отправляется на одноадресный IPv6-адрес хоста, который отправил исходное сообщение NS.
A host can also send an unsolicited NA, announcing its IPv6 and MAC addresses, in which case the message is sent to the all-|Хост также может отправить незапрошенное NA, объявляя свои IPv6 и MAC-адреса, и в этом случае сообщение отправляется всем
|
IPv6-hosts local-scope multicast address FF02::1.|Адрес многоадресной рассылки IPv6-hosts в локальной области FF02 :: 1.
|
NOTE With NDP, the word neighbor refers to the fact that the devices will be on the same data link—for example, the same VLAN.|ПРИМЕЧАНИЕ В случае NDP слово «сосед» относится к тому факту, что устройства будут подключены к одному каналу передачи данных - например, к одной и той же VLAN.
|
Figure 25-8 shows an example of how a host (PC1) uses an NS message to learn the MAC address used by another host.|На рис. 25-8 показан пример того, как хост (ПК1) использует сообщение NS, чтобы узнать MAC-адрес, используемый другим хостом.
The NS message lists a target IPv6 unicast address, with the implied question: “What is your link address?” The NA message, in this example sent back to the original host that asked the question, lists that link address.|В сообщении NS указан целевой одноадресный IPv6-адрес с подразумеваемым вопросом: «Какой у вас адрес ссылки?» Сообщение NA, в этом примере отправленное обратно на исходный хост, задавший вопрос, содержит адрес этой ссылки.
|
Figure 25-8 Example NDP NS/NA Process to Find the Neighbor’s Link Addresses At Step 1 of this particular example, PC1 sends the solicitation to find PC2’s MAC address.|Рисунок 25-8 Пример процесса NDP NS / NA для поиска адресов соседних каналов На шаге 1 этого конкретного примера ПК1 отправляет запрос на поиск MAC-адреса ПК2.
|
PC1 first looks in its NDP neighbor table, the equivalent of the IPv4 ARP cache, and does not find the MAC address for IPv6 address 2001:DB8:1111:1::22.|ПК1 сначала просматривает свою таблицу соседей NDP, эквивалентную кешу IPv4 ARP, и не находит MAC-адрес для IPv6-адреса 2001: DB8: 1111: 1 :: 22.
So, at Step 1, PC1 sends the NDP NS message to the matching solicited-node multicast address for 2001:DB8:1111:1::22 or FF02::1:FF00:22.|Итак, на этапе 1 ПК1 отправляет сообщение NDP NS на соответствующий многоадресный адрес запрошенного узла для 2001: DB8: 1111: 1 :: 22 или FF02 :: 1: FF00: 22.
Only IPv6 hosts whose address ends with 00:0022 will listen for this solicited-node multicast address.|Только хосты IPv6, адрес которых заканчивается на 00: 0022, будут прослушивать этот многоадресный адрес запрошенного узла.
As a result, only a small subset of hosts on this link will process the received NDP NS message.|В результате только небольшая часть хостов на этом канале будет обрабатывать полученное сообщение NDP NS.
|
At Step 2, PC2 reacts to the received NS message.|На шаге 2 ПК2 реагирует на полученное сообщение NS.
PC2 sends back an NA message in reply, listing PC2’s MAC address.|ПК2 отправляет в ответ сообщение NA, в котором перечисляется MAC-адрес ПК2.
PC1 records PC2’s MAC address in PC1’s NDP neighbor table.|ПК1 записывает MAC-адрес ПК2 в таблицу соседей NDP ПК1.
|
Example 25-19 shows an example of the IPv6 neighbor table on Router R3, as seen originally back in Figure 25-1.|В примере 25-19 показан пример таблицы соседей IPv6 на маршрутизаторе R3, как это было первоначально показано на рисунке 25-1.
In this case, R3 has learned the MAC addresses of Router R1’s WAN interface (G0/1/0)—both its global unicast address as well as the link-local address on that same interface.|В этом случае R3 узнал MAC-адреса WAN-интерфейса маршрутизатора R1 (G0 / 1/0) - как его глобальный одноадресный адрес, так и локальный адрес канала на том же интерфейсе.
|
Example 25-19 IPv6 Neighbor Table on Router R3 Example end.|Пример 25-19 Таблица соседей IPv6 на маршрутизаторе R3 Пример конец.
|
NOTE To view a host’s NDP neighbor table, use these commands: (Windows) netsh interface ipv6 show neighbors; (Linux) ip -6 neighbor show; (Mac OS) ndp -an.|ПРИМЕЧАНИЕ Для просмотра таблицы соседей NDP хоста используйте следующие команды: (Windows) netsh interface ipv6 show neighbors; (Linux) ip -6 Neighbor show; (Mac OS) ndp -an.
#### Discovering Routers with NDP RS and RA
Обнаружение маршрутизаторов с NDP RS и RA   
__|__
--|--
|
IPv4 hosts use the concept of an IPv4 default gateway or default router.|Хосты IPv4 используют концепцию шлюза по умолчанию IPv4 или маршрутизатора по умолчанию.
When the host needs to send a packet to some IPv4 subnet other than the local subnet, the host sends the IPv4 packet to the default router, expecting the router to be able to route the packet to the destination.|Когда хосту необходимо отправить пакет в какую-то подсеть IPv4, отличную от локальной подсети, хост отправляет пакет IPv4 маршрутизатору по умолчанию, ожидая, что маршрутизатор сможет направить пакет к месту назначения.
Note that hosts either statically set the IP address of their default gateway or learn it from a server called a Dynamic Host Configuration Protocol (DHCP) server.|Обратите внимание, что хосты либо статически устанавливают IP-адрес своего шлюза по умолчанию, либо узнают его от сервера, называемого сервером протокола динамической конфигурации хоста (DHCP).
|
IPv6 uses the same concept of a default gateway, but it improves the method for hosts to learn the identity of possible default gateways using NDP. NDP defines two messages that allow any host to discover all routers in the subnet:|IPv6 использует ту же концепцию шлюза по умолчанию, но он улучшает метод, позволяющий хостам узнавать идентичность возможных шлюзов по умолчанию с помощью NDP. NDP определяет два сообщения, которые позволяют любому хосту обнаруживать все маршрутизаторы в подсети:
|
Router Solicitation (RS): This message is sent to the “all-IPv6-routers” local-scope multicast address of FF02::2 so that the message asks all routers, on the local link only, to identify themselves.|Запрос маршрутизатора (RS): это сообщение отправляется на адрес многоадресной рассылки «все IPv6-маршрутизаторы» в локальной области FF02 :: 2, так что сообщение запрашивает у всех маршрутизаторов только на локальном канале идентификацию.
|
Router Advertisement (RA): This message, sent by the router, lists many facts, including the link-local IPv6 address of the router.|Объявление маршрутизатора (RA): это сообщение, отправленное маршрутизатором, перечисляет множество фактов, включая локальный IPv6-адрес маршрутизатора.
When sent in response to an RS message, it flows back to either the unicast address of the host that sent the RS or to the all-IPv6-hosts address FF02::1.|При отправке в ответ на сообщение RS оно возвращается либо на одноадресный адрес хоста, который отправил RS, либо на адрес всех IPv6-хостов FF02 :: 1.
Routers also send RA messages without being asked, sent to the all-IPv6-|Маршрутизаторы также отправляют сообщения RA без запроса, отправленные на все IPv6-
|
hosts local-scope multicast address of FF02::1.|host-адрес многоадресной рассылки FF02 :: 1 в локальной области.
|
For example, Figure 25-9 shows how host PC1 can learn R1’s link-local address.|Например, на рис. 25-9 показано, как хост PC1 может узнать локальный адрес канала R1.
The process is indeed simple, with PC1 first asking and R1 replying.|Процесс действительно прост: сначала ПК1 спрашивает, а R1 отвечает.
|
Figure 25-9 Example NDP RS/RA Process to Find the Default Routers NOTE IPv6 allows multiple prefixes and multiple default routers to be listed in the RA message; Figure 25-9 just shows one of each for simplicity’s sake.|Рисунок 25-9 Пример процесса NDP RS / RA для поиска маршрутизаторов по умолчанию ПРИМЕЧАНИЕ IPv6 позволяет указывать несколько префиксов и несколько маршрутизаторов по умолчанию в сообщении RA; На рис. 25-9 для простоты показано только по одному.
|
IPv6 does not use broadcasts, but it does use multicasts.|IPv6 не использует широковещательные рассылки, но использует многоадресные рассылки.
In this case, the RS message flows to the all-routers multicast address (FF02::2) so that all routers will receive the message.|В этом случае сообщение RS передается на групповой адрес всех маршрутизаторов (FF02 :: 2), так что все маршрутизаторы получат сообщение.
It has the same good effect as a broadcast with IPv4, without the negatives of a broadcast.|Он имеет такой же хороший эффект, как и широковещательная рассылка с IPv4, без негативных последствий широковещательной рассылки.
In this case, only IPv6 routers will spend any CPU cycles processing the RS message, and IPv6 hosts will ignore the message.|В этом случае только маршрутизаторы IPv6 будут тратить циклы ЦП на обработку сообщения RS, а узлы IPv6 будут игнорировать это сообщение.
The RA message can flow either to the unicast IPv6 address of PC1 or to the all-nodes FF02::1 address.|Сообщение RA может передаваться либо на одноадресный IPv6-адрес ПК1, либо на адрес всех узлов FF02 :: 1.
|
Note that while Figure 25-9 shows how a host can ask to learn about any routers, routers also periodically send unsolicited RA messages, even without an incoming RS. When routers send these periodic RA messages, they basically advertise details about IPv6 on the link.|Обратите внимание, что хотя на рис. 25-9 показано, как хост может запрашивать сведения о любых маршрутизаторах, маршрутизаторы также периодически отправляют незапрошенные сообщения RA, даже без входящего RS. Когда маршрутизаторы отправляют эти периодические сообщения RA, они в основном объявляют подробности о IPv6 по ссылке.
In this case, the RA messages flow to the FF02::1 all-nodes IPv6 multicast address.|В этом случае сообщения RA поступают на многоадресный IPv6-адрес FF02 :: 1 для всех узлов.
#### Using SLAAC with NDP RS and RA
Использование SLAAC с NDP RS и RA   
__|__
--|--
|
Both IPv4 and IPv6 support the idea of dynamic address assignment for hosts via the Dynamic Host Configuration Protocol (DHCP). To find an address to use with DHCP, the DHCP client sends messages to a DHCP server, and the server assigns a currently unused address in the correct subnet for the endpoint host to use.|И IPv4, и IPv6 поддерживают идею динамического назначения адресов для хостов через протокол динамической конфигурации хоста (DHCP). Чтобы найти адрес для использования с DHCP, клиент DHCP отправляет сообщения на сервер DHCP, и сервер назначает в настоящее время неиспользуемый адрес в правильной подсети для хоста конечной точки.
The process relies on DHCP client functions in each device and a DHCP server configured and working in the network.|Этот процесс зависит от функций клиента DHCP в каждом устройстве и сервера DHCP, настроенного и работающего в сети.
|
IPv6 supports an alternative method for IPv6 hosts to dynamically choose an unused IPv6 address to use—a process that does not require a server like a DHCP server.|IPv6 поддерживает альтернативный метод для хостов IPv6 динамического выбора неиспользуемого адреса IPv6 для использования - процесс, который не требует такого сервера, как DHCP-сервер.
The process goes by the name Stateless Address Autoconfiguration (SLAAC). SLAAC uses a simple three-step process that begins by learning the prefix/length as shown in the figure.|Этот процесс называется автоконфигурацией адреса без сохранения состояния (SLAAC). SLAAC использует простой трехэтапный процесс, который начинается с изучения префикса / длины, как показано на рисунке.
The steps are as follows:|Шаги следующие:
|
1. Learn the IPv6 prefix used on the link, from any router, using NDP RS/RA messages.|1. Изучите префикс IPv6, используемый на канале, от любого маршрутизатора, используя сообщения NDP RS / RA.
|
2. Build an address from the prefix plus an interface ID, chosen either by using EUI-64 rules or as a random value.|2. Создайте адрес из префикса и идентификатора интерфейса, выбранного либо с помощью правил EUI-64, либо как случайное значение.
|
3. Before using the address, first use DAD to make sure that no other host is already using the same address.|3. Перед использованием адреса сначала используйте DAD, чтобы убедиться, что ни один другой хост уже не использует тот же адрес.
|
Figure 25-10 shows the structure of an IPv6 address created with SLACC using Steps 1 and 2 in the process, with the next topic detailing the third step (DAD).|На рис. 25-10 показана структура IPv6-адреса, созданного с помощью SLACC с использованием шагов 1 и 2 в процессе, а в следующем разделе подробно описывается третий шаг (DAD).
|
Figure 25-10 Host IPv6 Address Formation Using SLAAC|Рисунок 25-10 Формирование IPv6-адреса хоста с использованием SLAAC
#### Discovering Duplicate Addresses Using NDP NS and NA
Обнаружение повторяющихся адресов с помощью NDP NS и NA   
__|__
--|--
|
IPv6 uses the Duplicate Address Detection (DAD) process before using a unicast address to make sure that no other node on that link is already using the address.|IPv6 использует процесс обнаружения повторяющегося адреса (DAD) перед использованием одноадресного адреса, чтобы убедиться, что никакой другой узел на этой ссылке уже не использует адрес.
Hosts use DAD not only at the end of the SLAAC process, but also any time that a host interface initializes, no matter whether using SLAAC, DHCP, or static address configuration.|Хосты используют DAD не только в конце процесса SLAAC, но и каждый раз, когда инициализируется интерфейс хоста, независимо от того, используется ли SLAAC, DHCP или статическая конфигурация адреса.
When performing DAD, if another host already uses that address, the first host simply does not use the address until the problem is resolved.|При выполнении DAD, если другой хост уже использует этот адрес, первый хост просто не использует адрес, пока проблема не будет решена.
|
The term DAD refers to the function, but the function uses NDP NS and NA messages.|Термин DAD относится к функции, но функция использует сообщения NDP NS и NA.
|
Basically, a host sends an NS message for its own IPv6 address.|По сути, хост отправляет NS-сообщение для своего собственного IPv6-адреса.
No other host should be using that address, so no other host should send an NDP NA in reply.|Никакой другой хост не должен использовать этот адрес, поэтому никакой другой хост не должен отправлять в ответ NDP NA.
However, if another host already uses that address, that host will reply with an NA, identifying a duplicate use of the address.|Однако, если другой хост уже использует этот адрес, этот хост ответит NA, идентифицируя повторное использование адреса.
|
Figure 25-11 shows an example.|На рисунке 25-11 показан пример.
PC1 initializes and does a DAD check, but PC2 happens to already be working and already be using the address.|ПК1 инициализируется и выполняет проверку DAD, но ПК2 уже работает и уже использует адрес.
The figure shows the following steps:|На рисунке показаны следующие шаги:
|
1. PC1, before using address 2001:DB8:1111:1::11, must use DAD.|1. ПК1 перед использованием адреса 2001: DB8: 1111: 1 :: 11 должен использовать DAD.
|
2. PC1 sends an NS message, listing the address PC1 now wants to use (2001:DB8:1111:1::11) as the target.|2. ПК1 отправляет сообщение NS, в котором указан адрес, который ПК1 теперь хочет использовать (2001: DB8: 1111: 1 :: 11) в качестве цели.
|
3. PC2 receives the NS, sees what PC2 already uses as its own address, and sends back an NA.|3. ПК2 получает NS, видит, что ПК2 уже использует в качестве своего адреса, и отправляет обратно NA.
|
4. PC1, on receiving the NA message for its own IPv6 address, realizes a duplicate address exists.|4. ПК1, получив сообщение NA для своего собственного IPv6-адреса, понимает, что существует повторяющийся адрес.
|
Figure 25-11 Example Duplicate Address Detection (DAD) with NDP NS/NA Hosts do the DAD check for each of their unicast addresses, link-local addresses included, both when the address is first used and each time the host’s interface comes up.|Рисунок 25-11 Пример обнаружения повторяющегося адреса (DAD) с NDP NS / NA Хосты выполняют проверку DAD для каждого из своих адресов одноадресной рассылки, включая локальные адреса канала, как при первом использовании адреса, так и при каждом подключении интерфейса узла.
#### NDP Summary
Резюме НПР   
__|__
--|--
|
This chapter explains some of the more important functions performed by NDP. NDP does more than what is listed in this chapter, and the protocol allows for addition of other functions, so NDP might continue to grow over time.|В этой главе объясняются некоторые из наиболее важных функций, выполняемых NDP. NDP делает больше, чем перечислено в этой главе, и протокол позволяет добавлять другие функции, поэтому NDP может со временем расти.
For now, use Table 25-3 as a study reference for the four NDP features discussed here.|А пока используйте Таблицу 25-3 в качестве справочного материала для изучения четырех обсуждаемых здесь функций NDP.
|
Table 25-3 NDP Function Summary Table end.|Таблица 25-3 Сводная таблица функций NDP Конец таблицы.
### Chapter Review
Обзор главы   
__|__
--|--
|
One key to doing well on the exams is to perform repetitive spaced review sessions.|Один из ключей к успешной сдаче экзаменов - повторение повторных сессий с интервалом.
Review this chapter’s material using either the tools in the book or interactive tools for the same material found on the book’s companion website.|Просмотрите материал этой главы, используя инструменты из книги или интерактивные инструменты для тех же материалов, которые можно найти на сопутствующем веб-сайте книги.
Refer to the “Your Study Plan” element for more details.|Обратитесь к элементу «Ваш учебный план» для получения более подробной информации.
Table 25-4 outlines the key review elements and where you can find them.|В Таблице 25-4 представлены ключевые элементы обзора и их местонахождение.
To better track your study progress, record when you completed these activities in the second column.|Чтобы лучше отслеживать свои успехи в учебе, отметьте, когда вы выполнили эти задания, во втором столбце.
|
Table 25-4 Chapter Review Tracking Table end.|Таблица 25-4 Окончание таблицы отслеживания обзора главы.
|
Review All the Key Topics Key Terms You Should Know IPv6 host route, local route, IPv6 local route, IPv6 administrative distance, IPv6 multicast scope Command References Tables 25-6 and 25-7 list configuration and verification commands used in this chapter.|Ознакомьтесь со всеми ключевыми темами. Ключевые термины, которые вы должны знать: маршрут узла IPv6, локальный маршрут, локальный маршрут IPv6, административное расстояние IPv6, область многоадресной рассылки IPv6. Ссылки на команды В таблицах 25-6 и 25-7 перечислены команды конфигурации и проверки, используемые в этой главе.
As an easy review exercise, cover the left column in a table, read the right column, and try to recall the command without looking.|В качестве простого упражнения на повторение закройте левый столбец таблицы, прочтите правый столбец и попытайтесь вспомнить команду, не глядя.
Then repeat the exercise, covering the right column, and try to recall what the command does.|Затем повторите упражнение, охватывая правый столбец, и попытайтесь вспомнить, что делает команда.
|
Table 25-6 Chapter 25 Configuration Command Reference Table end.|Таблица 25-6 Глава 25 Справочник команд конфигурации Конец таблицы.
|
Table 25-7 Chapter 25 EXEC Command Reference Table end.|Таблица 25-7 Глава 25 Справочник команд EXEC Конец таблицы.
|
Keep track of your part review progress with the checklist in Table P7-1.|Следите за ходом проверки детали с помощью контрольного списка в Таблице P7-1.
Details on each task follow the table.|Подробности по каждой задаче приведены в таблице.
|
Table P7-1 Part VII Part Review Checklist Activity 1st Date Completed 2nd Date Completed Repeat All DIKTA Questions Answer Part Review Questions Review Key Topics Do Labs Watch Videos Repeat All DIKTA Questions For this task, use the PCPT software to answer the “Do I Know This Already?” questions again for the chapters in this part of the book.|Таблица P7-1. Контрольный список проверки части VII. Действие 1-я дата завершения 2-я дата завершения Повторить все вопросы DIKTA Ответить на вопросы проверки части Пересмотреть ключевые темы Сделать лабораторные работы Посмотреть видео Повторить все вопросы DIKTA Для этой задачи используйте программное обеспечение PCPT, чтобы ответить на вопрос «Знаю ли я Это уже? » еще раз вопросы к главам этой части книги.
|
Answer Part Review Questions For this task, use PTP to answer the Part Review questions for this part of the book.|Ответы на вопросы обзора части Для этой задачи используйте PTP, чтобы ответить на вопросы обзора части для этой части книги.
|
Review Key Topics Review all key topics in all chapters in this part, either by browsing the chapters or using the Key Topics application on the companion website.|Обзор ключевых тем Просмотрите все ключевые темы во всех главах этой части, просматривая главы или используя приложение «Ключевые темы» на сопутствующем веб-сайте.
|
Do Labs Depending on your chosen lab tool, here are some suggestions for what to do in lab:|Выполните лабораторные работы В зависимости от выбранного вами лабораторного инструмента, вот несколько предложений о том, что делать в лаборатории:
|
Pearson Network Simulator: If you use the full Pearson simulator, focus more on the configuration scenario and troubleshooting scenario labs associated with the topics in this part of the book.|Симулятор сети Pearson: если вы используете полный симулятор Pearson, сконцентрируйтесь на сценарии конфигурации и лабораторных занятиях сценариев устранения неполадок, связанных с темами этой части книги.
These types of labs include a larger set of topics and work well as Part Review activities. (See the Introduction for some details about how to find which labs are about topics in this part of the book.)|Эти типы лабораторных работ включают более широкий набор тем и хорошо подходят для работы с обзором деталей. (См. Введение, чтобы узнать, как найти лабораторные работы по темам в этой части книги.)
|
Blog: Config Labs: The author’s blog includes a series of configuration-focused labs that you can do on paper, each in 10–15 minutes.|Блог: Config Labs: блог автора включает в себя серию лабораторных работ по настройке, которые вы можете выполнить на бумаге, каждая из которых занимает 10–15 минут.
Review and perform the labs for this part of the book, as found at http://blog.certskills.com.|Просмотрите и выполните лабораторные работы для этой части книги, которые можно найти на http://blog.certskills.com.
Then navigate to the Hands-on Config labs.|Затем перейдите к практическим занятиям по настройке.
## Part VII Review
Часть VII Обзор   
__|__
--|--
|
Other: If using other lab tools, here are a few suggestions: Configure IPv6 addresses on interfaces, and before using any show commands, predict the connected and local routes that should be added to the IPv6 routing table, and predict the link-local (unicast)|Другое: если вы используете другие лабораторные инструменты, вот несколько предложений: Настройте адреса IPv6 на интерфейсах и перед использованием любых команд show, спрогнозируйте подключенные и локальные маршруты, которые следует добавить в таблицу маршрутизации IPv6, и спрогнозируйте локальный канал ( одноадресная передача)
|
address and various multicast addresses you expect to see in the output of the show ipv6 interfaces command.|адрес и различные адреса многоадресной рассылки, которые вы ожидаете увидеть в выходных данных команды show ipv6 interfaces.
|
Watch Videos Chapter 24 mentions that the companion website’s section for Chapter 24 review includes a video about the EUI-64 address generation process, so consider using the video as a review.|Смотреть видео В главе 24 упоминается, что раздел сопутствующего веб-сайта, посвященный обзору главы 24, включает видео о процессе генерации адреса EUI-64, поэтому рассмотрите возможность использования этого видео в качестве обзора.
|
This book began with an overview of the fundamentals of LANs, WANs, and IP routing.|Эта книга началась с обзора основ LAN, WAN и IP-маршрутизации.
It then described Ethernet LANs (wired LANs) in some depth over the course of seven chapters.|Затем в семи главах были подробно описаны сети Ethernet (проводные сети).
|
The book then meandered through many chapters exploring the many concepts of IPv4 and IPv6 addressing, routing, and how to implement those features in Cisco devices.|Затем книга прошла через множество глав, посвященных изучению многих концепций адресации, маршрутизации IPv4 и IPv6 и способов реализации этих функций в устройствах Cisco.
|
This final part of Volume 1 turns our attention back to the LAN, not to wired Ethernet LANs, but to IEEE 802.11 wireless LANs—in other words, Wi-Fi. The four chapters in this part of the book lay down the foundations of how wireless LANs work and then show how to implement wireless LANs using Cisco devices.|В этой заключительной части тома 1 наше внимание снова возвращается к ЛВС, не к проводным локальным сетям Ethernet, а к беспроводным ЛВС IEEE 802.11 - другими словами, к Wi-Fi. Четыре главы этой части книги закладывают основы работы беспроводных локальных сетей, а затем показывают, как реализовать беспроводные локальные сети с использованием устройств Cisco.
|
Building wireless LANs requires some thought because the endpoints that use the LAN do not sit in one place and connect via a known cable and known switch port.|Построение беспроводных локальных сетей требует некоторого размышления, поскольку конечные точки, использующие локальную сеть, не находятся в одном месте и не подключаются через известный кабель и известный порт коммутатора.
To explain those details, Chapter 26 begins with the basics of how a wireless client can connect to the wireless network through a wireless access point (AP). After you learn the foundations in Chapter 26, Chapter 27 takes an architectural view of wireless LANs to discuss how you might build a wireless LAN for an enterprise, which requires much different thinking than, for instance, building a wireless LAN for your home.|Чтобы объяснить эти детали, глава 26 начинается с основ того, как беспроводной клиент может подключиться к беспроводной сети через точку беспроводного доступа (AP). После того, как вы изучите основы в главе 26, в главе 27 представлен архитектурный взгляд на беспроводные локальные сети, чтобы обсудить, как вы можете построить беспроводную локальную сеть для предприятия, что требует совершенно другого мышления, чем, например, создание беспроводной локальной сети для вашего дома.
|
Chapter 28 completes the three concepts-focused wireless LAN chapters by working through the alphabet soup that is wireless LAN security.|Глава 28 завершает три глав, посвященных концепциям беспроводной локальной сети, проработкой алфавитного супа, а именно безопасности беспроводной локальной сети.
The fact that wireless LAN clients come and go means that the LAN may be under constant attack as an easy place for an attacker to gain access to the network, so wireless LANs must use effective security.|Тот факт, что клиенты беспроводной ЛВС приходят и уходят, означает, что ЛВС может подвергаться постоянным атакам, поскольку злоумышленник может легко получить доступ к сети, поэтому в беспроводных ЛВС должна использоваться эффективная защита.
Finally, Chapter 29 closes by showing how to configure an enterprise wireless LAN using Cisco APs and the Cisco Wireless LAN Controller (WLC) from the WLC’s graphical interface.|Наконец, глава 29 завершается показом, как настроить корпоративную беспроводную локальную сеть с помощью точек доступа Cisco и контроллера беспроводной локальной сети Cisco (WLC) из графического интерфейса WLC.
|